var Te=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ie=Te((exports,module)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function makeMap(t,e){const n=Object.create(null),i=t.split(",");for(let r=0;r<i.length;r++)n[i[r]]=!0;return e?r=>!!n[r.toLowerCase()]:r=>!!n[r]}function normalizeStyle(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=isString(i)?parseStringStyle(i):normalizeStyle(i);if(r)for(const s in r)e[s]=r[s]}return e}else{if(isString(t))return t;if(isObject$2(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const i=n.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray$1(t))for(let n=0;n<t.length;n++){const i=normalizeClass(t[n]);i&&(e+=i+" ")}else if(isObject$2(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString=t=>isString(t)?t:t==null?"":isArray$1(t)||isObject$2(t)&&(t.toString===objectToString||!isFunction(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,r])=>(n[`${i} =>`]=r,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$2(e)&&!isArray$1(e)&&!isPlainObject(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty.call(t,e),isArray$1=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject$2=t=>t!==null&&typeof t=="object",isPromise$1=t=>isObject$2(t)&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this.active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let n=0;for(let i=0;i<e.length;i++){const r=e[i];wasTracked(r)&&!newTracked(r)?r.delete(t):e[n++]=r,r.w&=~trackOpBit,r.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,i){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,i)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,n){if(shouldTrack&&activeEffect){let i=targetMap.get(t);i||targetMap.set(t,i=new Map);let r=i.get(n);r||i.set(n,r=createDep()),trackEffects(r)}}function trackEffects(t,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,n=!wasTracked(t)):n=!t.has(activeEffect),n&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,n,i,r,s){const o=targetMap.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&isArray$1(t)){const l=toNumber(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":isArray$1(t)?isIntegerKey(n)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(t)||(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&a.push(o.get(ITERATE_KEY));break}if(a.length===1)a[0]&&triggerEffects(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);triggerEffects(createDep(l))}}function triggerEffects(t,e){const n=isArray$1(t)?t:[...t];for(const i of n)i.computed&&triggerEffect(i);for(const i of n)i.computed||triggerEffect(i)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),get=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=toRaw(this);for(let s=0,o=this.length;s<o;s++)track(i,"get",s+"");const r=i[e](...n);return r===-1||r===!1?i[e](...n.map(toRaw)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking();const i=toRaw(this)[e].apply(this,n);return resetTracking(),i}}),t}function createGetter(t=!1,e=!1){return function(i,r,s){if(r==="__v_isReactive")return!t;if(r==="__v_isReadonly")return t;if(r==="__v_isShallow")return e;if(r==="__v_raw"&&s===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(i))return i;const o=isArray$1(i);if(!t&&o&&hasOwn(arrayInstrumentations,r))return Reflect.get(arrayInstrumentations,r,s);const a=Reflect.get(i,r,s);return(isSymbol(r)?builtInSymbols.has(r):isNonTrackableKeys(r))||(t||track(i,"get",r),e)?a:isRef(a)?o&&isIntegerKey(r)?a:a.value:isObject$2(a)?t?readonly(a):reactive(a):a}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(n,i,r,s){let o=n[i];if(isReadonly(o)&&isRef(o)&&!isRef(r))return!1;if(!t&&(!isShallow(r)&&!isReadonly(r)&&(o=toRaw(o),r=toRaw(r)),!isArray$1(n)&&isRef(o)&&!isRef(r)))return o.value=r,!0;const a=isArray$1(n)&&isIntegerKey(i)?Number(i)<n.length:hasOwn(n,i),l=Reflect.set(n,i,r,s);return n===toRaw(s)&&(a?hasChanged(r,o)&&trigger(n,"set",i,r):trigger(n,"add",i,r)),l}}function deleteProperty(t,e){const n=hasOwn(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&n&&trigger(t,"delete",e,void 0),i}function has(t,e){const n=Reflect.has(t,e);return(!isSymbol(e)||!builtInSymbols.has(e))&&track(t,"has",e),n}function ownKeys(t){return track(t,"iterate",isArray$1(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get,set,deleteProperty,has,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$1(t,e,n=!1,i=!1){t=t.__v_raw;const r=toRaw(t),s=toRaw(e);n||(e!==s&&track(r,"get",e),track(r,"get",s));const{has:o}=getProto(r),a=i?toShallow:n?toReadonly:toReactive;if(o.call(r,e))return a(t.get(e));if(o.call(r,s))return a(t.get(s));t!==r&&t.get(e)}function has$1(t,e=!1){const n=this.__v_raw,i=toRaw(n),r=toRaw(t);return e||(t!==r&&track(i,"has",t),track(i,"has",r)),t===r?n.has(t):n.has(t)||n.has(r)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const n=toRaw(this),{has:i,get:r}=getProto(n);let s=i.call(n,t);s||(t=toRaw(t),s=i.call(n,t));const o=r.call(n,t);return n.set(t,e),s?hasChanged(e,o)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:i}=getProto(e);let r=n.call(e,t);r||(t=toRaw(t),r=n.call(e,t)),i&&i.call(e,t);const s=e.delete(t);return r&&trigger(e,"delete",t,void 0),s}function clear(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(i,r){const s=this,o=s.__v_raw,a=toRaw(o),l=e?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",ITERATE_KEY),o.forEach((c,u)=>i.call(r,l(c),l(u),s))}}function createIterableMethod(t,e,n){return function(...i){const r=this.__v_raw,s=toRaw(r),o=isMap(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=r[t](...i),u=n?toShallow:e?toReadonly:toReactive;return!e&&track(s,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:f,done:g}=c.next();return g?{value:f,done:g}:{value:a?[u(f[0]),u(f[1])]:u(f),done:g}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(s){return get$1(this,s)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},e={get(s){return get$1(this,s,!1,!0)},get size(){return size(this)},has:has$1,add,set:set$1,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},n={get(s){return get$1(this,s,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(s){return get$1(this,s,!0,!0)},get size(){return size(this,!0)},has(s){return has$1.call(this,s,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=createIterableMethod(s,!1,!1),n[s]=createIterableMethod(s,!0,!1),e[s]=createIterableMethod(s,!1,!0),i[s]=createIterableMethod(s,!0,!0)}),[t,n,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(i,r,s)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?i:Reflect.get(hasOwn(n,r)&&r in i?n:i,r,s)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,n,i,r){if(!isObject$2(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=r.get(t);if(s)return s;const o=getTargetType(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return r.set(t,a),a}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$2(t)?reactive(t):t,toReadonly=t=>isObject$2(t)?readonly(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return isRef(r)&&!isRef(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}var _a;class ComputedRefImpl{constructor(e,n,i,r){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=i}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a="__v_isReadonly";function computed$1(t,e,n=!1){let i,r;const s=isFunction(t);return s?(i=t,r=NOOP):(i=t.get,r=t.set),new ComputedRefImpl(i,r,s||!r,n)}function warn$1(t,...e){}function callWithErrorHandling(t,e,n,i){let r;try{r=i?t(...i):t()}catch(s){handleError(s,e,n)}return r}function callWithAsyncErrorHandling(t,e,n,i){if(isFunction(t)){const s=callWithErrorHandling(t,e,n,i);return s&&isPromise$1(s)&&s.catch(o=>{handleError(o,e,n)}),s}const r=[];for(let s=0;s<t.length;s++)r.push(callWithAsyncErrorHandling(t[s],e,n,i));return r}function handleError(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=n;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){callWithErrorHandling(l,null,10,[t,o,a]);return}}logError(t,n,r,i)}function logError(t,e,n,i=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const i=e+n>>>1;getId(queue[i])<t?e=i+1:n=i}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray$1(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue.length;e++){const n=queue[e];n&&n.pre&&(queue.splice(e,1),e--,n())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,i)=>getId(n)-getId(i)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const n=queue[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||EMPTY_OBJ;let r=n;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:f,trim:g}=i[u]||EMPTY_OBJ;g&&(r=n.map(v=>isString(v)?v.trim():v)),f&&(r=n.map(toNumber))}let a,l=i[a=toHandlerKey(e)]||i[a=toHandlerKey(camelize(e))];!l&&s&&(l=i[a=toHandlerKey(hyphenate(e))]),l&&callWithAsyncErrorHandling(l,t,6,r);const c=i[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,callWithAsyncErrorHandling(c,t,6,r)}}function normalizeEmitsOptions(t,e,n=!1){const i=e.emitsCache,r=i.get(t);if(r!==void 0)return r;const s=t.emits;let o={},a=!1;if(!isFunction(t)){const l=c=>{const u=normalizeEmitsOptions(c,e,!0);u&&(a=!0,extend(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(isObject$2(t)&&i.set(t,null),null):(isArray$1(s)?s.forEach(l=>o[l]=null):extend(o,s),isObject$2(t)&&i.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function pushScopeId(t){currentScopeId=t}function popScopeId(){currentScopeId=null}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const i=(...r)=>{i._d&&setBlockTracking(-1);const s=setCurrentRenderingInstance(e);let o;try{o=t(...r)}finally{setCurrentRenderingInstance(s),i._d&&setBlockTracking(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:i,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:f,data:g,setupState:v,ctx:C,inheritAttrs:w}=t;let O,U;const P=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const K=r||i;O=normalizeVNode(u.call(K,K,f,s,v,g,C)),U=l}else{const K=e;O=normalizeVNode(K.length>1?K(s,{attrs:l,slots:a,emit:c}):K(s,null)),U=e.props?l:getFunctionalFallthrough(l)}}catch(K){blockStack.length=0,handleError(K,t,1),O=createVNode(Comment)}let x=O;if(U&&w!==!1){const K=Object.keys(U),{shapeFlag:J}=x;K.length&&J&7&&(o&&K.some(isModelListener)&&(U=filterModelListeners(U,o)),x=cloneVNode(x,U))}return n.dirs&&(x=cloneVNode(x),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&(x.transition=n.transition),O=x,setCurrentRenderingInstance(P),O}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const i in t)(!isModelListener(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function shouldUpdateComponent(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?hasPropsChanged(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let f=0;f<u.length;f++){const g=u[f];if(o[g]!==i[g]&&!isEmitListener(c,g))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,c):!0:!!o;return!1}function hasPropsChanged(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!isEmitListener(n,s))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$1(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===n&&(n=currentInstance.provides=Object.create(i)),n[t]=e}}function inject(t,e,n=!1){const i=currentInstance||currentRenderingInstance;if(i){const r=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(r&&t in r)return r[t];if(arguments.length>1)return n&&isFunction(e)?e.call(i.proxy):e}}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:i,flush:r,onTrack:s,onTrigger:o}=EMPTY_OBJ){const a=currentInstance;let l,c=!1,u=!1;if(isRef(t)?(l=()=>t.value,c=isShallow(t)):isReactive(t)?(l=()=>t,i=!0):isArray$1(t)?(u=!0,c=t.some(x=>isReactive(x)||isShallow(x)),l=()=>t.map(x=>{if(isRef(x))return x.value;if(isReactive(x))return traverse(x);if(isFunction(x))return callWithErrorHandling(x,a,2)})):isFunction(t)?e?l=()=>callWithErrorHandling(t,a,2):l=()=>{if(!(a&&a.isUnmounted))return f&&f(),callWithAsyncErrorHandling(t,a,3,[g])}:l=NOOP,e&&i){const x=l;l=()=>traverse(x())}let f,g=x=>{f=U.onStop=()=>{callWithErrorHandling(x,a,4)}},v;if(isInSSRComponentSetup)if(g=NOOP,e?n&&callWithAsyncErrorHandling(e,a,3,[l(),u?[]:void 0,g]):l(),r==="sync"){const x=useSSRContext();v=x.__watcherHandles||(x.__watcherHandles=[])}else return NOOP;let C=u?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const w=()=>{if(!!U.active)if(e){const x=U.run();(i||c||(u?x.some((K,J)=>hasChanged(K,C[J])):hasChanged(x,C)))&&(f&&f(),callWithAsyncErrorHandling(e,a,3,[x,C===INITIAL_WATCHER_VALUE?void 0:u&&C[0]===INITIAL_WATCHER_VALUE?[]:C,g]),C=x)}else U.run()};w.allowRecurse=!!e;let O;r==="sync"?O=w:r==="post"?O=()=>queuePostRenderEffect(w,a&&a.suspense):(w.pre=!0,a&&(w.id=a.uid),O=()=>queueJob(w));const U=new ReactiveEffect(l,O);e?n?w():C=U.run():r==="post"?queuePostRenderEffect(U.run.bind(U),a&&a.suspense):U.run();const P=()=>{U.stop(),a&&a.scope&&remove(a.scope.effects,U)};return v&&v.push(P),P}function instanceWatch(t,e,n){const i=this.proxy,r=isString(t)?t.includes(".")?createPathGetter(i,t):()=>i[t]:t.bind(i,i);let s;isFunction(e)?s=e:(s=e.handler,n=e);const o=currentInstance;setCurrentInstance(this);const a=doWatch(r,s.bind(i),n);return o?setCurrentInstance(o):unsetCurrentInstance(),a}function createPathGetter(t,e){const n=e.split(".");return()=>{let i=t;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}function traverse(t,e){if(!isObject$2(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray$1(t))for(let n=0;n<t.length;n++)traverse(t[n],e);else if(isSet(t)||isMap(t))t.forEach(n=>{traverse(n,e)});else if(isPlainObject(t))for(const n in t)traverse(t[n],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const n=getCurrentInstance(),i=useTransitionState();let r;return()=>{const s=e.default&&getTransitionRawChildren(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const w of s)if(w.type!==Comment){o=w;break}}const a=toRaw(t),{mode:l}=a;if(i.isLeaving)return emptyPlaceholder(o);const c=getKeepAliveChild(o);if(!c)return emptyPlaceholder(o);const u=resolveTransitionHooks(c,a,i,n);setTransitionHooks(c,u);const f=n.subTree,g=f&&getKeepAliveChild(f);let v=!1;const{getTransitionKey:C}=c.type;if(C){const w=C();r===void 0?r=w:w!==r&&(r=w,v=!0)}if(g&&g.type!==Comment&&(!isSameVNodeType(c,g)||v)){const w=resolveTransitionHooks(g,a,i,n);if(setTransitionHooks(g,w),l==="out-in")return i.isLeaving=!0,w.afterLeave=()=>{i.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(o);l==="in-out"&&c.type!==Comment&&(w.delayLeave=(O,U,P)=>{const x=getLeavingNodesForType(i,g);x[String(g.key)]=g,O._leaveCb=()=>{U(),O._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=P})}return o}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function resolveTransitionHooks(t,e,n,i){const{appear:r,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:g,onAfterLeave:v,onLeaveCancelled:C,onBeforeAppear:w,onAppear:O,onAfterAppear:U,onAppearCancelled:P}=e,x=String(t.key),K=getLeavingNodesForType(n,t),J=(q,ie)=>{q&&callWithAsyncErrorHandling(q,i,9,ie)},Q=(q,ie)=>{const re=ie[1];J(q,ie),isArray$1(q)?q.every(ue=>ue.length<=1)&&re():q.length<=1&&re()},ae={mode:s,persisted:o,beforeEnter(q){let ie=a;if(!n.isMounted)if(r)ie=w||a;else return;q._leaveCb&&q._leaveCb(!0);const re=K[x];re&&isSameVNodeType(t,re)&&re.el._leaveCb&&re.el._leaveCb(),J(ie,[q])},enter(q){let ie=l,re=c,ue=u;if(!n.isMounted)if(r)ie=O||l,re=U||c,ue=P||u;else return;let de=!1;const Y=q._enterCb=he=>{de||(de=!0,he?J(ue,[q]):J(re,[q]),ae.delayedLeave&&ae.delayedLeave(),q._enterCb=void 0)};ie?Q(ie,[q,Y]):Y()},leave(q,ie){const re=String(t.key);if(q._enterCb&&q._enterCb(!0),n.isUnmounting)return ie();J(f,[q]);let ue=!1;const de=q._leaveCb=Y=>{ue||(ue=!0,ie(),Y?J(C,[q]):J(v,[q]),q._leaveCb=void 0,K[re]===t&&delete K[re])};K[re]=t,g?Q(g,[q,de]):de()},clone(q){return resolveTransitionHooks(q,e,n,i)}};return ae}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,n){let i=[],r=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===Fragment?(o.patchFlag&128&&r++,i=i.concat(getTransitionRawChildren(o.children,e,a))):(e||o.type!==Comment)&&i.push(a!=null?cloneVNode(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function defineComponent(t){return isFunction(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const i=t.__wdc||(t.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(injectHook(e,i,n),n){let r=n.parent;for(;r&&r.parent;)isKeepAlive(r.parent.vnode)&&injectToKeepAliveRoot(i,e,n,r),r=r.parent}}function injectToKeepAliveRoot(t,e,n,i){const r=injectHook(e,t,i,!0);onUnmounted(()=>{remove(i[e],r)},n)}function injectHook(t,e,n=currentInstance,i=!1){if(n){const r=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const a=callWithAsyncErrorHandling(e,n,t,o);return unsetCurrentInstance(),resetTracking(),a});return i?r.unshift(s):r.push(s),s}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...i)=>e(...i),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const n=currentRenderingInstance;if(n===null)return t;const i=getExposeProxy(n)||n.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=EMPTY_OBJ]=e[s];o&&(isFunction(o)&&(o={mounted:o,updated:o}),o.deep&&traverse(a),r.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return t}function invokeDirectiveHook(t,e,n,i){const r=t.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[t.el,a,t,e]),resetTracking())}}const COMPONENTS="components";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveAsset(t,e,n=!0,i=!1){const r=currentRenderingInstance||currentInstance;if(r){const s=r.type;if(t===COMPONENTS){const a=getComponentName(s,!1);if(a&&(a===e||a===camelize(e)||a===capitalize(camelize(e))))return s}const o=resolve(r[t]||s[t],e)||resolve(r.appContext[t],e);return!o&&i?s:o}}function resolve(t,e){return t&&(t[e]||t[camelize(e)]||t[capitalize(camelize(e))])}function renderList(t,e,n,i){let r;const s=n&&n[i];if(isArray$1(t)||isString(t)){r=new Array(t.length);for(let o=0,a=t.length;o<a;o++)r[o]=e(t[o],o,void 0,s&&s[o])}else if(typeof t=="number"){r=new Array(t);for(let o=0;o<t;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(isObject$2(t))if(t[Symbol.iterator])r=Array.from(t,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(t);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(t[c],c,a,s&&s[a])}}else r=[];return n&&(n[i]=r),r}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const v=o[e];if(v!==void 0)switch(v){case 1:return i[e];case 2:return r[e];case 4:return n[e];case 3:return s[e]}else{if(hasSetupBinding(i,e))return o[e]=1,i[e];if(r!==EMPTY_OBJ&&hasOwn(r,e))return o[e]=2,r[e];if((c=t.propsOptions[0])&&hasOwn(c,e))return o[e]=3,s[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];shouldCacheAccess&&(o[e]=0)}}const u=publicPropertiesMap[e];let f,g;if(u)return e==="$attrs"&&track(t,"get",e),u(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];if(g=l.config.globalProperties,hasOwn(g,e))return g[e]},set({_:t},e,n){const{data:i,setupState:r,ctx:s}=t;return hasSetupBinding(r,e)?(r[e]=n,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:r,propsOptions:s}},o){let a;return!!n[o]||t!==EMPTY_OBJ&&hasOwn(t,o)||hasSetupBinding(e,o)||(a=s[0])&&hasOwn(a,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(r.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,i=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:f,mounted:g,beforeUpdate:v,updated:C,activated:w,deactivated:O,beforeDestroy:U,beforeUnmount:P,destroyed:x,unmounted:K,render:J,renderTracked:Q,renderTriggered:ae,errorCaptured:q,serverPrefetch:ie,expose:re,inheritAttrs:ue,components:de,directives:Y,filters:he}=e;if(c&&resolveInjections(c,i,null,t.appContext.config.unwrapInjectedRef),o)for(const te in o){const se=o[te];isFunction(se)&&(i[te]=se.bind(n))}if(r){const te=r.call(n,n);isObject$2(te)&&(t.data=reactive(te))}if(shouldCacheAccess=!0,s)for(const te in s){const se=s[te],pe=isFunction(se)?se.bind(n,n):isFunction(se.get)?se.get.bind(n,n):NOOP,E=!isFunction(se)&&isFunction(se.set)?se.set.bind(n):NOOP,I=computed({get:pe,set:E});Object.defineProperty(i,te,{enumerable:!0,configurable:!0,get:()=>I.value,set:R=>I.value=R})}if(a)for(const te in a)createWatcher(a[te],i,n,te);if(l){const te=isFunction(l)?l.call(n):l;Reflect.ownKeys(te).forEach(se=>{provide(se,te[se])})}u&&callHook(u,t,"c");function le(te,se){isArray$1(se)?se.forEach(pe=>te(pe.bind(n))):se&&te(se.bind(n))}if(le(onBeforeMount,f),le(onMounted,g),le(onBeforeUpdate,v),le(onUpdated,C),le(onActivated,w),le(onDeactivated,O),le(onErrorCaptured,q),le(onRenderTracked,Q),le(onRenderTriggered,ae),le(onBeforeUnmount,P),le(onUnmounted,K),le(onServerPrefetch,ie),isArray$1(re))if(re.length){const te=t.exposed||(t.exposed={});re.forEach(se=>{Object.defineProperty(te,se,{get:()=>n[se],set:pe=>n[se]=pe})})}else t.exposed||(t.exposed={});J&&t.render===NOOP&&(t.render=J),ue!=null&&(t.inheritAttrs=ue),de&&(t.components=de),Y&&(t.directives=Y)}function resolveInjections(t,e,n=NOOP,i=!1){isArray$1(t)&&(t=normalizeInject(t));for(const r in t){const s=t[r];let o;isObject$2(s)?"default"in s?o=inject(s.from||r,s.default,!0):o=inject(s.from||r):o=inject(s),isRef(o)&&i?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):e[r]=o}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray$1(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,i){const r=i.includes(".")?createPathGetter(n,i):()=>n[i];if(isString(t)){const s=e[t];isFunction(s)&&watch(r,s)}else if(isFunction(t))watch(r,t.bind(n));else if(isObject$2(t))if(isArray$1(t))t.forEach(s=>createWatcher(s,e,n,i));else{const s=isFunction(t.handler)?t.handler.bind(n):e[t.handler];isFunction(s)&&watch(r,s,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!n&&!i?l=e:(l={},r.length&&r.forEach(c=>mergeOptions$1(l,c,o,!0)),mergeOptions$1(l,e,o)),isObject$2(e)&&s.set(e,l),l}function mergeOptions$1(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&mergeOptions$1(t,s,n,!0),r&&r.forEach(o=>mergeOptions$1(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=internalOptionMergeStrats[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend(extend(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend(Object.create(null),t);for(const i in e)n[i]=mergeAsArray(t[i],e[i]);return n}function initProps(t,e,n,i=!1){const r={},s={};def(s,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,r,s);for(const o in t.propsOptions[0])o in r||(r[o]=void 0);n?t.props=i?r:shallowReactive(r):t.type.props?t.props=r:t.props=s,t.attrs=s}function updateProps(t,e,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=t,a=toRaw(r),[l]=t.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let f=0;f<u.length;f++){let g=u[f];if(isEmitListener(t.emitsOptions,g))continue;const v=e[g];if(l)if(hasOwn(s,g))v!==s[g]&&(s[g]=v,c=!0);else{const C=camelize(g);r[C]=resolvePropValue(l,a,C,v,t,!1)}else v!==s[g]&&(s[g]=v,c=!0)}}}else{setFullProps(t,e,r,s)&&(c=!0);let u;for(const f in a)(!e||!hasOwn(e,f)&&((u=hyphenate(f))===f||!hasOwn(e,u)))&&(l?n&&(n[f]!==void 0||n[u]!==void 0)&&(r[f]=resolvePropValue(l,a,f,void 0,t,!0)):delete r[f]);if(s!==a)for(const f in s)(!e||!hasOwn(e,f)&&!0)&&(delete s[f],c=!0)}c&&trigger(t,"set","$attrs")}function setFullProps(t,e,n,i){const[r,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(isReservedProp(l))continue;const c=e[l];let u;r&&hasOwn(r,u=camelize(l))?!s||!s.includes(u)?n[u]=c:(a||(a={}))[u]=c:isEmitListener(t.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=toRaw(n),c=a||EMPTY_OBJ;for(let u=0;u<s.length;u++){const f=s[u];n[f]=resolvePropValue(r,l,f,c[f],t,!hasOwn(c,f))}}return o}function resolvePropValue(t,e,n,i,r,s){const o=t[n];if(o!=null){const a=hasOwn(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&isFunction(l)){const{propsDefaults:c}=r;n in c?i=c[n]:(setCurrentInstance(r),i=c[n]=l.call(null,e),unsetCurrentInstance())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===hyphenate(n))&&(i=!0))}return i}function normalizePropsOptions(t,e,n=!1){const i=e.propsCache,r=i.get(t);if(r)return r;const s=t.props,o={},a=[];let l=!1;if(!isFunction(t)){const u=f=>{l=!0;const[g,v]=normalizePropsOptions(f,e,!0);extend(o,g),v&&a.push(...v)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!s&&!l)return isObject$2(t)&&i.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$1(s))for(let u=0;u<s.length;u++){const f=camelize(s[u]);validatePropName(f)&&(o[f]=EMPTY_OBJ)}else if(s)for(const u in s){const f=camelize(u);if(validatePropName(f)){const g=s[u],v=o[f]=isArray$1(g)||isFunction(g)?{type:g}:Object.assign({},g);if(v){const C=getTypeIndex(Boolean,v.type),w=getTypeIndex(String,v.type);v[0]=C>-1,v[1]=w<0||C<w,(C>-1||hasOwn(v,"default"))&&a.push(f)}}}const c=[o,a];return isObject$2(t)&&i.set(t,c),c}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$1(e)?e.findIndex(n=>isSameType(n,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$1(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,n)=>{if(e._n)return e;const i=withCtx((...r)=>normalizeSlotValue(e(...r)),n);return i._c=!1,i},normalizeObjectSlots=(t,e,n)=>{const i=t._ctx;for(const r in t){if(isInternalKey(r))continue;const s=t[r];if(isFunction(s))e[r]=normalizeSlot$1(r,s,i);else if(s!=null){const o=normalizeSlotValue(s);e[r]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,n)=>{const{vnode:i,slots:r}=t;let s=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:(extend(r,e),!n&&a===1&&delete r._):(s=!e.$stable,normalizeObjectSlots(e,r)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(s)for(const a in r)!isInternalKey(a)&&!(a in o)&&delete r[a]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(i,r=null){isFunction(i)||(i=Object.assign({},i)),r!=null&&!isObject$2(r)&&(r=null);const s=createAppContext(),o=new Set;let a=!1;const l=s.app={_uid:uid++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:version$4,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&isFunction(c.install)?(o.add(c),c.install(l,...u)):isFunction(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,f){if(!a){const g=createVNode(i,r);return g.appContext=s,u&&e?e(g,c):t(g,c,f),a=!0,l._container=c,c.__vue_app__=l,getExposeProxy(g.component)||g.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l}};return l}}function setRef(t,e,n,i,r=!1){if(isArray$1(t)){t.forEach((g,v)=>setRef(g,e&&(isArray$1(e)?e[v]:e),n,i,r));return}if(isAsyncWrapper(i)&&!r)return;const s=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=r?null:s,{i:a,r:l}=t,c=e&&e.r,u=a.refs===EMPTY_OBJ?a.refs={}:a.refs,f=a.setupState;if(c!=null&&c!==l&&(isString(c)?(u[c]=null,hasOwn(f,c)&&(f[c]=null)):isRef(c)&&(c.value=null)),isFunction(l))callWithErrorHandling(l,a,12,[o,u]);else{const g=isString(l),v=isRef(l);if(g||v){const C=()=>{if(t.f){const w=g?hasOwn(f,l)?f[l]:u[l]:l.value;r?isArray$1(w)&&remove(w,s):isArray$1(w)?w.includes(s)||w.push(s):g?(u[l]=[s],hasOwn(f,l)&&(f[l]=u[l])):(l.value=[s],t.k&&(u[t.k]=l.value))}else g?(u[l]=o,hasOwn(f,l)&&(f[l]=o)):v&&(l.value=o,t.k&&(u[t.k]=o))};o?(C.id=-1,queuePostRenderEffect(C,n)):C()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:f,nextSibling:g,setScopeId:v=NOOP,insertStaticContent:C}=t,w=(d,m,y,T=null,S=null,F=null,W=!1,D=null,H=!!m.dynamicChildren)=>{if(d===m)return;d&&!isSameVNodeType(d,m)&&(T=k(d),R(d,S,F,!0),d=null),m.patchFlag===-2&&(H=!1,m.dynamicChildren=null);const{type:L,ref:G,shapeFlag:z}=m;switch(L){case Text:O(d,m,y,T);break;case Comment:U(d,m,y,T);break;case Static:d==null&&P(m,y,T,W);break;case Fragment:de(d,m,y,T,S,F,W,D,H);break;default:z&1?J(d,m,y,T,S,F,W,D,H):z&6?Y(d,m,y,T,S,F,W,D,H):(z&64||z&128)&&L.process(d,m,y,T,S,F,W,D,H,j)}G!=null&&S&&setRef(G,d&&d.ref,F,m||d,!m)},O=(d,m,y,T)=>{if(d==null)i(m.el=a(m.children),y,T);else{const S=m.el=d.el;m.children!==d.children&&c(S,m.children)}},U=(d,m,y,T)=>{d==null?i(m.el=l(m.children||""),y,T):m.el=d.el},P=(d,m,y,T)=>{[d.el,d.anchor]=C(d.children,m,y,T,d.el,d.anchor)},x=({el:d,anchor:m},y,T)=>{let S;for(;d&&d!==m;)S=g(d),i(d,y,T),d=S;i(m,y,T)},K=({el:d,anchor:m})=>{let y;for(;d&&d!==m;)y=g(d),r(d),d=y;r(m)},J=(d,m,y,T,S,F,W,D,H)=>{W=W||m.type==="svg",d==null?Q(m,y,T,S,F,W,D,H):ie(d,m,S,F,W,D,H)},Q=(d,m,y,T,S,F,W,D)=>{let H,L;const{type:G,props:z,shapeFlag:X,transition:ee,dirs:ne}=d;if(H=d.el=o(d.type,F,z&&z.is,z),X&8?u(H,d.children):X&16&&q(d.children,H,null,T,S,F&&G!=="foreignObject",W,D),ne&&invokeDirectiveHook(d,null,T,"created"),z){for(const oe in z)oe!=="value"&&!isReservedProp(oe)&&s(H,oe,null,z[oe],F,d.children,T,S,A);"value"in z&&s(H,"value",null,z.value),(L=z.onVnodeBeforeMount)&&invokeVNodeHook(L,T,d)}ae(H,d,d.scopeId,W,T),ne&&invokeDirectiveHook(d,null,T,"beforeMount");const ce=(!S||S&&!S.pendingBranch)&&ee&&!ee.persisted;ce&&ee.beforeEnter(H),i(H,m,y),((L=z&&z.onVnodeMounted)||ce||ne)&&queuePostRenderEffect(()=>{L&&invokeVNodeHook(L,T,d),ce&&ee.enter(H),ne&&invokeDirectiveHook(d,null,T,"mounted")},S)},ae=(d,m,y,T,S)=>{if(y&&v(d,y),T)for(let F=0;F<T.length;F++)v(d,T[F]);if(S){let F=S.subTree;if(m===F){const W=S.vnode;ae(d,W,W.scopeId,W.slotScopeIds,S.parent)}}},q=(d,m,y,T,S,F,W,D,H=0)=>{for(let L=H;L<d.length;L++){const G=d[L]=D?cloneIfMounted(d[L]):normalizeVNode(d[L]);w(null,G,m,y,T,S,F,W,D)}},ie=(d,m,y,T,S,F,W)=>{const D=m.el=d.el;let{patchFlag:H,dynamicChildren:L,dirs:G}=m;H|=d.patchFlag&16;const z=d.props||EMPTY_OBJ,X=m.props||EMPTY_OBJ;let ee;y&&toggleRecurse(y,!1),(ee=X.onVnodeBeforeUpdate)&&invokeVNodeHook(ee,y,m,d),G&&invokeDirectiveHook(m,d,y,"beforeUpdate"),y&&toggleRecurse(y,!0);const ne=S&&m.type!=="foreignObject";if(L?re(d.dynamicChildren,L,D,y,T,ne,F):W||se(d,m,D,null,y,T,ne,F,!1),H>0){if(H&16)ue(D,m,z,X,y,T,S);else if(H&2&&z.class!==X.class&&s(D,"class",null,X.class,S),H&4&&s(D,"style",z.style,X.style,S),H&8){const ce=m.dynamicProps;for(let oe=0;oe<ce.length;oe++){const fe=ce[oe],ge=z[fe],ye=X[fe];(ye!==ge||fe==="value")&&s(D,fe,ge,ye,S,d.children,y,T,A)}}H&1&&d.children!==m.children&&u(D,m.children)}else!W&&L==null&&ue(D,m,z,X,y,T,S);((ee=X.onVnodeUpdated)||G)&&queuePostRenderEffect(()=>{ee&&invokeVNodeHook(ee,y,m,d),G&&invokeDirectiveHook(m,d,y,"updated")},T)},re=(d,m,y,T,S,F,W)=>{for(let D=0;D<m.length;D++){const H=d[D],L=m[D],G=H.el&&(H.type===Fragment||!isSameVNodeType(H,L)||H.shapeFlag&70)?f(H.el):y;w(H,L,G,null,T,S,F,W,!0)}},ue=(d,m,y,T,S,F,W)=>{if(y!==T){if(y!==EMPTY_OBJ)for(const D in y)!isReservedProp(D)&&!(D in T)&&s(d,D,y[D],null,W,m.children,S,F,A);for(const D in T){if(isReservedProp(D))continue;const H=T[D],L=y[D];H!==L&&D!=="value"&&s(d,D,L,H,W,m.children,S,F,A)}"value"in T&&s(d,"value",y.value,T.value)}},de=(d,m,y,T,S,F,W,D,H)=>{const L=m.el=d?d.el:a(""),G=m.anchor=d?d.anchor:a("");let{patchFlag:z,dynamicChildren:X,slotScopeIds:ee}=m;ee&&(D=D?D.concat(ee):ee),d==null?(i(L,y,T),i(G,y,T),q(m.children,y,G,S,F,W,D,H)):z>0&&z&64&&X&&d.dynamicChildren?(re(d.dynamicChildren,X,y,S,F,W,D),(m.key!=null||S&&m===S.subTree)&&traverseStaticChildren(d,m,!0)):se(d,m,y,G,S,F,W,D,H)},Y=(d,m,y,T,S,F,W,D,H)=>{m.slotScopeIds=D,d==null?m.shapeFlag&512?S.ctx.activate(m,y,T,W,H):he(m,y,T,S,F,W,H):_e(d,m,H)},he=(d,m,y,T,S,F,W)=>{const D=d.component=createComponentInstance(d,T,S);if(isKeepAlive(d)&&(D.ctx.renderer=j),setupComponent(D),D.asyncDep){if(S&&S.registerDep(D,le),!d.el){const H=D.subTree=createVNode(Comment);U(null,H,m,y)}return}le(D,d,m,y,S,F,W)},_e=(d,m,y)=>{const T=m.component=d.component;if(shouldUpdateComponent(d,m,y))if(T.asyncDep&&!T.asyncResolved){te(T,m,y);return}else T.next=m,invalidateJob(T.update),T.update();else m.el=d.el,T.vnode=m},le=(d,m,y,T,S,F,W)=>{const D=()=>{if(d.isMounted){let{next:G,bu:z,u:X,parent:ee,vnode:ne}=d,ce=G,oe;toggleRecurse(d,!1),G?(G.el=ne.el,te(d,G,W)):G=ne,z&&invokeArrayFns(z),(oe=G.props&&G.props.onVnodeBeforeUpdate)&&invokeVNodeHook(oe,ee,G,ne),toggleRecurse(d,!0);const fe=renderComponentRoot(d),ge=d.subTree;d.subTree=fe,w(ge,fe,f(ge.el),k(ge),d,S,F),G.el=fe.el,ce===null&&updateHOCHostEl(d,fe.el),X&&queuePostRenderEffect(X,S),(oe=G.props&&G.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(oe,ee,G,ne),S)}else{let G;const{el:z,props:X}=m,{bm:ee,m:ne,parent:ce}=d,oe=isAsyncWrapper(m);if(toggleRecurse(d,!1),ee&&invokeArrayFns(ee),!oe&&(G=X&&X.onVnodeBeforeMount)&&invokeVNodeHook(G,ce,m),toggleRecurse(d,!0),z&&_){const fe=()=>{d.subTree=renderComponentRoot(d),_(z,d.subTree,d,S,null)};oe?m.type.__asyncLoader().then(()=>!d.isUnmounted&&fe()):fe()}else{const fe=d.subTree=renderComponentRoot(d);w(null,fe,y,T,d,S,F),m.el=fe.el}if(ne&&queuePostRenderEffect(ne,S),!oe&&(G=X&&X.onVnodeMounted)){const fe=m;queuePostRenderEffect(()=>invokeVNodeHook(G,ce,fe),S)}(m.shapeFlag&256||ce&&isAsyncWrapper(ce.vnode)&&ce.vnode.shapeFlag&256)&&d.a&&queuePostRenderEffect(d.a,S),d.isMounted=!0,m=y=T=null}},H=d.effect=new ReactiveEffect(D,()=>queueJob(L),d.scope),L=d.update=()=>H.run();L.id=d.uid,toggleRecurse(d,!0),L()},te=(d,m,y)=>{m.component=d;const T=d.vnode.props;d.vnode=m,d.next=null,updateProps(d,m.props,T,y),updateSlots(d,m.children,y),pauseTracking(),flushPreFlushCbs(),resetTracking()},se=(d,m,y,T,S,F,W,D,H=!1)=>{const L=d&&d.children,G=d?d.shapeFlag:0,z=m.children,{patchFlag:X,shapeFlag:ee}=m;if(X>0){if(X&128){E(L,z,y,T,S,F,W,D,H);return}else if(X&256){pe(L,z,y,T,S,F,W,D,H);return}}ee&8?(G&16&&A(L,S,F),z!==L&&u(y,z)):G&16?ee&16?E(L,z,y,T,S,F,W,D,H):A(L,S,F,!0):(G&8&&u(y,""),ee&16&&q(z,y,T,S,F,W,D,H))},pe=(d,m,y,T,S,F,W,D,H)=>{d=d||EMPTY_ARR,m=m||EMPTY_ARR;const L=d.length,G=m.length,z=Math.min(L,G);let X;for(X=0;X<z;X++){const ee=m[X]=H?cloneIfMounted(m[X]):normalizeVNode(m[X]);w(d[X],ee,y,null,S,F,W,D,H)}L>G?A(d,S,F,!0,!1,z):q(m,y,T,S,F,W,D,H,z)},E=(d,m,y,T,S,F,W,D,H)=>{let L=0;const G=m.length;let z=d.length-1,X=G-1;for(;L<=z&&L<=X;){const ee=d[L],ne=m[L]=H?cloneIfMounted(m[L]):normalizeVNode(m[L]);if(isSameVNodeType(ee,ne))w(ee,ne,y,null,S,F,W,D,H);else break;L++}for(;L<=z&&L<=X;){const ee=d[z],ne=m[X]=H?cloneIfMounted(m[X]):normalizeVNode(m[X]);if(isSameVNodeType(ee,ne))w(ee,ne,y,null,S,F,W,D,H);else break;z--,X--}if(L>z){if(L<=X){const ee=X+1,ne=ee<G?m[ee].el:T;for(;L<=X;)w(null,m[L]=H?cloneIfMounted(m[L]):normalizeVNode(m[L]),y,ne,S,F,W,D,H),L++}}else if(L>X)for(;L<=z;)R(d[L],S,F,!0),L++;else{const ee=L,ne=L,ce=new Map;for(L=ne;L<=X;L++){const me=m[L]=H?cloneIfMounted(m[L]):normalizeVNode(m[L]);me.key!=null&&ce.set(me.key,L)}let oe,fe=0;const ge=X-ne+1;let ye=!1,Ce=0;const Ee=new Array(ge);for(L=0;L<ge;L++)Ee[L]=0;for(L=ee;L<=z;L++){const me=d[L];if(fe>=ge){R(me,S,F,!0);continue}let ve;if(me.key!=null)ve=ce.get(me.key);else for(oe=ne;oe<=X;oe++)if(Ee[oe-ne]===0&&isSameVNodeType(me,m[oe])){ve=oe;break}ve===void 0?R(me,S,F,!0):(Ee[ve-ne]=L+1,ve>=Ce?Ce=ve:ye=!0,w(me,m[ve],y,null,S,F,W,D,H),fe++)}const be=ye?getSequence(Ee):EMPTY_ARR;for(oe=be.length-1,L=ge-1;L>=0;L--){const me=ne+L,ve=m[me],we=me+1<G?m[me+1].el:T;Ee[L]===0?w(null,ve,y,we,S,F,W,D,H):ye&&(oe<0||L!==be[oe]?I(ve,y,we,2):oe--)}}},I=(d,m,y,T,S=null)=>{const{el:F,type:W,transition:D,children:H,shapeFlag:L}=d;if(L&6){I(d.component.subTree,m,y,T);return}if(L&128){d.suspense.move(m,y,T);return}if(L&64){W.move(d,m,y,j);return}if(W===Fragment){i(F,m,y);for(let z=0;z<H.length;z++)I(H[z],m,y,T);i(d.anchor,m,y);return}if(W===Static){x(d,m,y);return}if(T!==2&&L&1&&D)if(T===0)D.beforeEnter(F),i(F,m,y),queuePostRenderEffect(()=>D.enter(F),S);else{const{leave:z,delayLeave:X,afterLeave:ee}=D,ne=()=>i(F,m,y),ce=()=>{z(F,()=>{ne(),ee&&ee()})};X?X(F,ne,ce):ce()}else i(F,m,y)},R=(d,m,y,T=!1,S=!1)=>{const{type:F,props:W,ref:D,children:H,dynamicChildren:L,shapeFlag:G,patchFlag:z,dirs:X}=d;if(D!=null&&setRef(D,null,y,d,!0),G&256){m.ctx.deactivate(d);return}const ee=G&1&&X,ne=!isAsyncWrapper(d);let ce;if(ne&&(ce=W&&W.onVnodeBeforeUnmount)&&invokeVNodeHook(ce,m,d),G&6)b(d.component,y,T);else{if(G&128){d.suspense.unmount(y,T);return}ee&&invokeDirectiveHook(d,null,m,"beforeUnmount"),G&64?d.type.remove(d,m,y,S,j,T):L&&(F!==Fragment||z>0&&z&64)?A(L,m,y,!1,!0):(F===Fragment&&z&384||!S&&G&16)&&A(H,m,y),T&&N(d)}(ne&&(ce=W&&W.onVnodeUnmounted)||ee)&&queuePostRenderEffect(()=>{ce&&invokeVNodeHook(ce,m,d),ee&&invokeDirectiveHook(d,null,m,"unmounted")},y)},N=d=>{const{type:m,el:y,anchor:T,transition:S}=d;if(m===Fragment){V(y,T);return}if(m===Static){K(d);return}const F=()=>{r(y),S&&!S.persisted&&S.afterLeave&&S.afterLeave()};if(d.shapeFlag&1&&S&&!S.persisted){const{leave:W,delayLeave:D}=S,H=()=>W(y,F);D?D(d.el,F,H):H()}else F()},V=(d,m)=>{let y;for(;d!==m;)y=g(d),r(d),d=y;r(m)},b=(d,m,y)=>{const{bum:T,scope:S,update:F,subTree:W,um:D}=d;T&&invokeArrayFns(T),S.stop(),F&&(F.active=!1,R(W,d,m,y)),D&&queuePostRenderEffect(D,m),queuePostRenderEffect(()=>{d.isUnmounted=!0},m),m&&m.pendingBranch&&!m.isUnmounted&&d.asyncDep&&!d.asyncResolved&&d.suspenseId===m.pendingId&&(m.deps--,m.deps===0&&m.resolve())},A=(d,m,y,T=!1,S=!1,F=0)=>{for(let W=F;W<d.length;W++)R(d[W],m,y,T,S)},k=d=>d.shapeFlag&6?k(d.component.subTree):d.shapeFlag&128?d.suspense.next():g(d.anchor||d.el),B=(d,m,y)=>{d==null?m._vnode&&R(m._vnode,null,null,!0):w(m._vnode||null,d,m,null,null,null,y),flushPreFlushCbs(),flushPostFlushCbs(),m._vnode=d},j={p:w,um:R,m:I,r:N,mt:he,mc:q,pc:se,pbc:re,n:k,o:t};let Z,_;return e&&([Z,_]=e(j)),{render:B,hydrate:Z,createApp:createAppAPI(B,Z)}}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(t,e,n=!1){const i=t.children,r=e.children;if(isArray$1(i)&&isArray$1(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=cloneIfMounted(r[s]),a.el=o.el),n||traverseStaticChildren(o,a)),a.type===Text&&(a.el=o.el)}}function getSequence(t){const e=t.slice(),n=[0];let i,r,s,o,a;const l=t.length;for(i=0;i<l;i++){const c=t[i];if(c!==0){if(r=n[n.length-1],t[r]<c){e[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,i,r,s){return setupBlock(createBaseVNode(t,e,n,i,r,s,!0))}function createBlock(t,e,n,i,r){return setupBlock(createVNode(t,e,n,i,r,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t!=null?t:null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null;function createBaseVNode(t,e=null,n=null,i=0,r=null,s=t===Fragment?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,i=0,r=null,s=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const a=cloneVNode(t,e,!0);return n&&normalizeChildren(a,n),isBlockTreeEnabled>0&&!s&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=a:currentBlock.push(a)),a.patchFlag|=-2,a}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:l}=e;a&&!isString(a)&&(e.class=normalizeClass(a)),isObject$2(l)&&(isProxy(l)&&!isArray$1(l)&&(l=extend({},l)),e.style=normalizeStyle(l))}const o=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$2(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,n,i,r,o,s,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend({},t):t:null}function cloneVNode(t,e,n=!1){const{props:i,ref:r,patchFlag:s,children:o}=t,a=e?mergeProps(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&normalizeKey(a),ref:e&&e.ref?n&&r?isArray$1(r)?r.concat(normalizeRef(e)):[r,normalizeRef(e)]:normalizeRef(e):r,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?s===-1?16:s|16:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$1(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(isArray$1(e))n=16;else if(typeof e=="object")if(i&65){const r=e.default;r&&(r._c&&(r._d=!1),normalizeChildren(t,r()),r._c&&(r._d=!0));return}else{n=32;const r=e._;!r&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:r===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),i&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const r in i)if(r==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(r==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(r)){const s=e[r],o=i[r];o&&s!==o&&!(isArray$1(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=i[r])}return e}function invokeVNodeHook(t,e,n,i=null){callWithAsyncErrorHandling(t,e,7,[n,i])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,n){const i=t.type,r=(e?e.appContext:t.appContext)||emptyAppContext,s={uid:uid$1++,vnode:t,type:i,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,r),emitsOptions:normalizeEmitsOptions(i,r),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=emit$1.bind(null,s),t.ce&&t.ce(s),s}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:n,children:i}=t.vnode,r=isStatefulComponent(t);initProps(t,n,r,e),initSlots(t,i);const s=r?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,s}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:i}=n;if(i){const r=t.setupContext=i.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const s=callWithErrorHandling(i,t,0,[t.props,r]);if(resetTracking(),unsetCurrentInstance(),isPromise$1(s)){if(s.then(unsetCurrentInstance,unsetCurrentInstance),e)return s.then(o=>{handleSetupResult(t,o,e)}).catch(o=>{handleError(o,t,0)});t.asyncDep=s}else handleSetupResult(t,s,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject$2(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const i=t.type;if(!t.render){if(!e&&compile&&!i.render){const r=i.template||resolveMergedOptions(t).template;if(r){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=i,c=extend(extend({isCustomElement:s,delimiters:a},o),l);i.render=compile(r,c)}}t.render=i.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,n){return track(t,"get","$attrs"),e[n]}})}function createSetupContext(t){const e=i=>{t.exposed=i||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,n){const i=arguments.length;return i===2?isObject$2(e)&&!isArray$1(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&isVNode(n)&&(n=[n]),createVNode(t,e,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version$4="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r=e?doc.createElementNS(svgNS,t):doc.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,s){const o=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{templateContainer.innerHTML=i?`<svg>${t}</svg>`:t;const a=templateContainer.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(t,e,n){const i=t._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,n){const i=t.style,r=isString(n);if(n&&!r){for(const s in n)setStyle(i,s,n[s]);if(e&&!isString(e))for(const s in e)n[s]==null&&setStyle(i,s,"")}else{const s=i.display;r?e!==n&&(i.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(i.display=s)}}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray$1(n))n.forEach(i=>setStyle(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(i),n.replace(importantRE,""),"important"):t[i]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let i=camelize(e);if(i!=="filter"&&i in t)return prefixCache[e]=i;i=capitalize(i);for(let r=0;r<prefixes.length;r++){const s=prefixes[r]+i;if(s in t)return prefixCache[e]=s}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,i,r){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const s=isSpecialBooleanAttr(e);n==null||s&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,s?"":n)}}function patchDOMProp(t,e,n,i,r,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,r,s),t[e]=n==null?"":n;return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const l=n==null?"":n;(t.value!==l||t.tagName==="OPTION")&&(t.value=l),n==null&&t.removeAttribute(e);return}let a=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=includeBooleanAttr(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{t[e]=n}catch{}a&&t.removeAttribute(e)}function addEventListener(t,e,n,i){t.addEventListener(e,n,i)}function removeEventListener(t,e,n,i){t.removeEventListener(e,n,i)}function patchEvent(t,e,n,i,r=null){const s=t._vei||(t._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=parseName(e);if(i){const c=s[e]=createInvoker(i,r);addEventListener(t,a,c,l)}else o&&(removeEventListener(t,a,o,l),s[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let i;for(;i=t.match(optionsModifierRE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,n.value),e,5,[i])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray$1(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>r=>!r._stopped&&i&&i(r))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,n,i,r=!1,s,o,a,l)=>{e==="class"?patchClass(t,i,r):e==="style"?patchStyle(t,n,i):isOn(e)?isModelListener(e)||patchEvent(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,i,r))?patchDOMProp(t,e,i,s,o,a,l):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),patchAttr(t,e,i,r))};function shouldSetAsProp(t,e,n,i){return i?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString(n)?!1:e in t}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray$1(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:e,trim:n,number:i}},r){t._assign=getModelAssigner(r);const s=i||r.props&&r.props.type==="number";addEventListener(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=toNumber(a)),t._assign(a)}),n&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e==null?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:r}},s){if(t._assign=getModelAssigner(s),t.composing||document.activeElement===t&&t.type!=="range"&&(n||i&&t.value.trim()===e||(r||t.type==="number")&&toNumber(t.value)===e))return;const o=e==null?"":e;t.value!==o&&(t.value=o)}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(n=>t[`${n}Key`]&&!e.includes(n))},withModifiers=(t,e)=>(n,...i)=>{for(let r=0;r<e.length;r++){const s=modifierGuards[e[r]];if(s&&s(n,e))return}return t(n,...i)},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=i=>{const r=normalizeContainer(i);if(!r)return;const s=e._component;!isFunction(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function normalizeContainer(t){return isString(t)?document.querySelector(t):t}function getDevtoolsGlobalHook(){return getTarget().__VUE_DEVTOOLS_GLOBAL_HOOK__}function getTarget(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const isProxyAvailable=typeof Proxy=="function",HOOK_SETUP="devtools-plugin:setup",HOOK_PLUGIN_SETTINGS_SET="plugin:settings:set";let supported,perf;function isPerformanceSupported(){var t;return supported!==void 0||(typeof window<"u"&&window.performance?(supported=!0,perf=window.performance):typeof global<"u"&&((t=global.perf_hooks)===null||t===void 0?void 0:t.performance)?(supported=!0,perf=global.perf_hooks.performance):supported=!1),supported}function now(){return isPerformanceSupported()?perf.now():Date.now()}class ApiProxy{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const r=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(r),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(r,JSON.stringify(o))}catch{}s=o},now(){return now()}},n&&n.on(HOOK_PLUGIN_SETTINGS_SET,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function setupDevtoolsPlugin(t,e){const n=t,i=getTarget(),r=getDevtoolsGlobalHook(),s=isProxyAvailable&&n.enableEarlyProxy;if(r&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))r.emit(HOOK_SETUP,t,e);else{const o=s?new ApiProxy(n,r):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,e){const n={};for(const i in e){const r=e[i];n[i]=isArray(r)?r.map(t):t(r)}return n}const noop$1=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,n="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=t(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=resolveRelativePath(i!=null?i:e,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:o}}function stringifyURL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&isSameRouteRecord(e.matched[i],n.matched[r])&&isSameRouteLocationParams(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!isSameRouteLocationParamsValue(t[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray(t)?isEquivalentArray(t,e):isArray(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/");let r=n.length-1,s,o;for(s=0;s<i.length;s++)if(o=i[s],o!==".")if(o==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),r=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=getElementPosition(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let a=r.includes(t.slice(s))?t.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),stripBase(l,"")}return stripBase(n,t)+i+r}function useHistoryListeners(t,e,n,i){let r=[],s=[],o=null;const a=({state:g})=>{const v=createCurrentLocation(t,location),C=n.value,w=e.value;let O=0;if(g){if(n.value=v,e.value=g,o&&o===C){o=null;return}O=w?g.position-w.position:0}else i(v);r.forEach(U=>{U(n.value,C,{delta:O,type:NavigationType.pop,direction:O?O>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function l(){o=n.value}function c(g){r.push(g);const v=()=>{const C=r.indexOf(g);C>-1&&r.splice(C,1)};return s.push(v),v}function u(){const{history:g}=window;!g.state||g.replaceState(assign({},g.state,{scroll:computeScrollPosition()}),"")}function f(){for(const g of s)g();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:l,listen:c,destroy:f}}function buildState(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:n}=window,i={value:createCurrentLocation(t,n)},r={value:e.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const f=t.indexOf("#"),g=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+l:createBaseLocation()+t+l;try{e[u?"replaceState":"pushState"](c,"",g),r.value=c}catch(v){console.error(v),n[u?"replace":"assign"](g)}}function o(l,c){const u=assign({},e.state,buildState(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=assign({},r.value,e.state,{forward:l,scroll:computeScrollPosition()});s(u.current,u,!0);const f=assign({},buildState(i.value,l,null),{position:u.position+1},c);s(l,f,!1),i.value=l}return{location:i,state:r,push:a,replace:o}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),n=useHistoryListeners(t,e.state,e.location,e.replace);function i(s,o=!0){o||n.pauseListeners(),history.go(s)}const r=assign({location:"",base:t,go:i,createHref:createHref.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function createWebHashHistory(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),createWebHistory(t)}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),i=[];let r=n.start?"^":"";const s=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(r+="/");for(let f=0;f<c.length;f++){const g=c[f];let v=40+(n.sensitive?.25:0);if(g.type===0)f||(r+="/"),r+=g.value.replace(REGEX_CHARS_RE,"\\$&"),v+=40;else if(g.type===1){const{value:C,repeatable:w,optional:O,regexp:U}=g;s.push({name:C,repeatable:w,optional:O});const P=U||BASE_PARAM_PATTERN;if(P!==BASE_PARAM_PATTERN){v+=10;try{new RegExp(`(${P})`)}catch(K){throw new Error(`Invalid custom RegExp for param "${C}" (${P}): `+K.message)}}let x=w?`((?:${P})(?:/(?:${P}))*)`:`(${P})`;f||(x=O&&c.length<2?`(?:/${x})`:"/"+x),O&&(x+="?"),r+=x,v+=20,O&&(v+=-8),w&&(v+=-20),P===".*"&&(v+=-50)}u.push(v)}i.push(u)}if(n.strict&&n.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function a(c){const u=c.match(o),f={};if(!u)return null;for(let g=1;g<u.length;g++){const v=u[g]||"",C=s[g-1];f[C.name]=v&&C.repeatable?v.split("/"):v}return f}function l(c){let u="",f=!1;for(const g of t){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const v of g)if(v.type===0)u+=v.value;else if(v.type===1){const{value:C,repeatable:w,optional:O}=v,U=C in c?c[C]:"";if(isArray(U)&&!w)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const P=isArray(U)?U.join("/"):U;if(!P)if(O)g.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${C}"`);u+=P}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function compareScoreArray(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(t,e){let n=0;const i=t.score,r=e.score;for(;n<i.length&&n<r.length;){const s=compareScoreArray(i[n],r[n]);if(s)return s;n++}if(Math.abs(r.length-i.length)===1){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(r))return-1}return r.length-i.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(v){throw new Error(`ERR (${n})/"${c}": ${v}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function f(){!c||(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function g(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:l==="/"?(c&&f(),o()):l===":"?(f(),n=1):g();break;case 4:g(),n=i;break;case 1:l==="("?n=2:VALID_PARAM_RE.test(l)?g():(f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:f(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),f(),o(),r}function createRouteRecordMatcher(t,e,n){const i=tokensToParser(tokenizePath(t.path),n),r=assign(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function createRouterMatcher(t,e){const n=[],i=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function r(u){return i.get(u)}function s(u,f,g){const v=!g,C=normalizeRouteRecord(u);C.aliasOf=g&&g.record;const w=mergeOptions(e,u),O=[C];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const K of x)O.push(assign({},C,{components:g?g.record.components:C.components,path:K,aliasOf:g?g.record:C}))}let U,P;for(const x of O){const{path:K}=x;if(f&&K[0]!=="/"){const J=f.record.path,Q=J[J.length-1]==="/"?"":"/";x.path=f.record.path+(K&&Q+K)}if(U=createRouteRecordMatcher(x,f,w),g?g.alias.push(U):(P=P||U,P!==U&&P.alias.push(U),v&&u.name&&!isAliasRecord(U)&&o(u.name)),C.children){const J=C.children;for(let Q=0;Q<J.length;Q++)s(J[Q],U,g&&g.children[Q])}g=g||U,(U.record.components&&Object.keys(U.record.components).length||U.record.name||U.record.redirect)&&l(U)}return P?()=>{o(P)}:noop$1}function o(u){if(isRouteName(u)){const f=i.get(u);f&&(i.delete(u),n.splice(n.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=n.indexOf(u);f>-1&&(n.splice(f,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let f=0;for(;f<n.length&&comparePathParserScore(u,n[f])>=0&&(u.record.path!==n[f].record.path||!isRecordChildOf(u,n[f]));)f++;n.splice(f,0,u),u.record.name&&!isAliasRecord(u)&&i.set(u.record.name,u)}function c(u,f){let g,v={},C,w;if("name"in u&&u.name){if(g=i.get(u.name),!g)throw createRouterError(1,{location:u});w=g.record.name,v=assign(paramsFromLocation(f.params,g.keys.filter(P=>!P.optional).map(P=>P.name)),u.params&&paramsFromLocation(u.params,g.keys.map(P=>P.name))),C=g.stringify(v)}else if("path"in u)C=u.path,g=n.find(P=>P.re.test(C)),g&&(v=g.parse(C),w=g.record.name);else{if(g=f.name?i.get(f.name):n.find(P=>P.re.test(f.path)),!g)throw createRouterError(1,{location:u,currentLocation:f});w=g.record.name,v=assign({},f.params,u.params),C=g.stringify(v)}const O=[];let U=g;for(;U;)O.unshift(U.record),U=U.parent;return{name:w,path:C,params:v,matched:O,meta:mergeMetaFields(O)}}return t.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function paramsFromLocation(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="boolean"?n:n[i];return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function isRecordChildOf(t,e){return e.children.some(n=>n===t||isRecordChildOf(t,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode$1(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(PLUS_RE," "),o=s.indexOf("="),a=decode$1(o<0?s:s.slice(0,o)),l=o<0?null:decode$1(s.slice(o+1));if(a in e){let c=e[a];isArray(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function stringifyQuery(t){let e="";for(let n in t){const i=t[n];if(n=encodeQueryKey(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray(i)?i.map(s=>s&&encodeQueryValue(s)):[i&&encodeQueryValue(i)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function normalizeQuery(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=isArray(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(i){return t.push(i),()=>{const r=t.indexOf(i);r>-1&&t.splice(r,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function guardToPromiseFn(t,e,n,i,r){const s=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((o,a)=>{const l=f=>{f===!1?a(createRouterError(4,{from:n,to:e})):f instanceof Error?a(f):isRouteLocation(f)?a(createRouterError(2,{from:e,to:f})):(s&&i.enterCallbacks[r]===s&&typeof f=="function"&&s.push(f),o())},c=t.call(i&&i.instances[r],e,n,l);let u=Promise.resolve(c);t.length<3&&(u=u.then(l)),u.catch(f=>a(f))})}function extractComponentsGuards(t,e,n,i){const r=[];for(const s of t)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(isRouteComponent(a)){const c=(a.__vccOpts||a)[e];c&&r.push(guardToPromiseFn(c,n,i,s,o))}else{let l=a();r.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=isESModule(c)?c.default:c;s.components[o]=u;const g=(u.__vccOpts||u)[e];return g&&guardToPromiseFn(g,n,i,s,o)()}))}}return r}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject(routerKey),n=inject(routeLocationKey),i=computed(()=>e.resolve(unref(t.to))),r=computed(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],f=n.matched;if(!u||!f.length)return-1;const g=f.findIndex(isSameRouteRecord.bind(null,u));if(g>-1)return g;const v=getOriginalPath(l[c-2]);return c>1&&getOriginalPath(u)===v&&f[f.length-1].path!==v?f.findIndex(isSameRouteRecord.bind(null,l[c-2])):g}),s=computed(()=>r.value>-1&&includesParams(n.params,i.value.params)),o=computed(()=>r.value>-1&&r.value===n.matched.length-1&&isSameRouteLocationParams(n.params,i.value.params));function a(l={}){return guardEvent(l)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop$1):Promise.resolve()}return{route:i,href:computed(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const n=reactive(useLink(t)),{options:i}=inject(routerKey),r=computed(()=>({[getLinkClass(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&e.default(n);return t.custom?s:h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:r.value},s)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const n in e){const i=e[n],r=t[n];if(typeof i=="string"){if(i!==r)return!1}else if(!isArray(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,n)=>t!=null?t:e!=null?e:n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=inject(routerViewLocationKey),r=computed(()=>t.route||i.value),s=inject(viewDepthKey,0),o=computed(()=>{let c=unref(s);const{matched:u}=r.value;let f;for(;(f=u[c])&&!f.components;)c++;return c}),a=computed(()=>r.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,a),provide(routerViewLocationKey,r);const l=ref();return watch(()=>[l.value,a.value,t.name],([c,u,f],[g,v,C])=>{u&&(u.instances[f]=c,v&&v!==u&&c&&c===g&&(u.leaveGuards.size||(u.leaveGuards=v.leaveGuards),u.updateGuards.size||(u.updateGuards=v.updateGuards))),c&&u&&(!v||!isSameRouteRecord(u,v)||!g)&&(u.enterCallbacks[f]||[]).forEach(w=>w(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,f=a.value,g=f&&f.components[u];if(!g)return normalizeSlot(n.default,{Component:g,route:c});const v=f.props[u],C=v?v===!0?c.params:typeof v=="function"?v(c):v:null,O=h(g,assign({},C,e,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(f.instances[u]=null)},ref:l}));return normalizeSlot(n.default,{Component:O,route:c})||O}}});function normalizeSlot(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),n=t.parseQuery||parseQuery,i=t.stringifyQuery||stringifyQuery,r=t.history,s=useCallbacks(),o=useCallbacks(),a=useCallbacks(),l=shallowRef(START_LOCATION_NORMALIZED);let c=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=applyToParams.bind(null,b=>""+b),f=applyToParams.bind(null,encodeParam),g=applyToParams.bind(null,decode$1);function v(b,A){let k,B;return isRouteName(b)?(k=e.getRecordMatcher(b),B=A):B=b,e.addRoute(B,k)}function C(b){const A=e.getRecordMatcher(b);A&&e.removeRoute(A)}function w(){return e.getRoutes().map(b=>b.record)}function O(b){return!!e.getRecordMatcher(b)}function U(b,A){if(A=assign({},A||l.value),typeof b=="string"){const d=parseURL(n,b,A.path),m=e.resolve({path:d.path},A),y=r.createHref(d.fullPath);return assign(d,m,{params:g(m.params),hash:decode$1(d.hash),redirectedFrom:void 0,href:y})}let k;if("path"in b)k=assign({},b,{path:parseURL(n,b.path,A.path).path});else{const d=assign({},b.params);for(const m in d)d[m]==null&&delete d[m];k=assign({},b,{params:f(b.params)}),A.params=f(A.params)}const B=e.resolve(k,A),j=b.hash||"";B.params=u(g(B.params));const Z=stringifyURL(i,assign({},b,{hash:encodeHash(j),path:B.path})),_=r.createHref(Z);return assign({fullPath:Z,hash:j,query:i===stringifyQuery?normalizeQuery(b.query):b.query||{}},B,{redirectedFrom:void 0,href:_})}function P(b){return typeof b=="string"?parseURL(n,b,l.value.path):assign({},b)}function x(b,A){if(c!==b)return createRouterError(8,{from:A,to:b})}function K(b){return ae(b)}function J(b){return K(assign(P(b),{replace:!0}))}function Q(b){const A=b.matched[b.matched.length-1];if(A&&A.redirect){const{redirect:k}=A;let B=typeof k=="function"?k(b):k;return typeof B=="string"&&(B=B.includes("?")||B.includes("#")?B=P(B):{path:B},B.params={}),assign({query:b.query,hash:b.hash,params:"path"in B?{}:b.params},B)}}function ae(b,A){const k=c=U(b),B=l.value,j=b.state,Z=b.force,_=b.replace===!0,d=Q(k);if(d)return ae(assign(P(d),{state:typeof d=="object"?assign({},j,d.state):j,force:Z,replace:_}),A||k);const m=k;m.redirectedFrom=A;let y;return!Z&&isSameRouteLocation(i,B,k)&&(y=createRouterError(16,{to:m,from:B}),E(B,B,!0,!1)),(y?Promise.resolve(y):ie(m,B)).catch(T=>isNavigationFailure(T)?isNavigationFailure(T,2)?T:pe(T):te(T,m,B)).then(T=>{if(T){if(isNavigationFailure(T,2))return ae(assign({replace:_},P(T.to),{state:typeof T.to=="object"?assign({},j,T.to.state):j,force:Z}),A||m)}else T=ue(m,B,!0,_,j);return re(m,B,T),T})}function q(b,A){const k=x(b,A);return k?Promise.reject(k):Promise.resolve()}function ie(b,A){let k;const[B,j,Z]=extractChangingRecords(b,A);k=extractComponentsGuards(B.reverse(),"beforeRouteLeave",b,A);for(const d of B)d.leaveGuards.forEach(m=>{k.push(guardToPromiseFn(m,b,A))});const _=q.bind(null,b,A);return k.push(_),runGuardQueue(k).then(()=>{k=[];for(const d of s.list())k.push(guardToPromiseFn(d,b,A));return k.push(_),runGuardQueue(k)}).then(()=>{k=extractComponentsGuards(j,"beforeRouteUpdate",b,A);for(const d of j)d.updateGuards.forEach(m=>{k.push(guardToPromiseFn(m,b,A))});return k.push(_),runGuardQueue(k)}).then(()=>{k=[];for(const d of b.matched)if(d.beforeEnter&&!A.matched.includes(d))if(isArray(d.beforeEnter))for(const m of d.beforeEnter)k.push(guardToPromiseFn(m,b,A));else k.push(guardToPromiseFn(d.beforeEnter,b,A));return k.push(_),runGuardQueue(k)}).then(()=>(b.matched.forEach(d=>d.enterCallbacks={}),k=extractComponentsGuards(Z,"beforeRouteEnter",b,A),k.push(_),runGuardQueue(k))).then(()=>{k=[];for(const d of o.list())k.push(guardToPromiseFn(d,b,A));return k.push(_),runGuardQueue(k)}).catch(d=>isNavigationFailure(d,8)?d:Promise.reject(d))}function re(b,A,k){for(const B of a.list())B(b,A,k)}function ue(b,A,k,B,j){const Z=x(b,A);if(Z)return Z;const _=A===START_LOCATION_NORMALIZED,d=isBrowser?history.state:{};k&&(B||_?r.replace(b.fullPath,assign({scroll:_&&d&&d.scroll},j)):r.push(b.fullPath,j)),l.value=b,E(b,A,k,_),pe()}let de;function Y(){de||(de=r.listen((b,A,k)=>{if(!V.listening)return;const B=U(b),j=Q(B);if(j){ae(assign(j,{replace:!0}),B).catch(noop$1);return}c=B;const Z=l.value;isBrowser&&saveScrollPosition(getScrollKey(Z.fullPath,k.delta),computeScrollPosition()),ie(B,Z).catch(_=>isNavigationFailure(_,12)?_:isNavigationFailure(_,2)?(ae(_.to,B).then(d=>{isNavigationFailure(d,20)&&!k.delta&&k.type===NavigationType.pop&&r.go(-1,!1)}).catch(noop$1),Promise.reject()):(k.delta&&r.go(-k.delta,!1),te(_,B,Z))).then(_=>{_=_||ue(B,Z,!1),_&&(k.delta&&!isNavigationFailure(_,8)?r.go(-k.delta,!1):k.type===NavigationType.pop&&isNavigationFailure(_,20)&&r.go(-1,!1)),re(B,Z,_)}).catch(noop$1)}))}let he=useCallbacks(),_e=useCallbacks(),le;function te(b,A,k){pe(b);const B=_e.list();return B.length?B.forEach(j=>j(b,A,k)):console.error(b),Promise.reject(b)}function se(){return le&&l.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((b,A)=>{he.add([b,A])})}function pe(b){return le||(le=!b,Y(),he.list().forEach(([A,k])=>b?k(b):A()),he.reset()),b}function E(b,A,k,B){const{scrollBehavior:j}=t;if(!isBrowser||!j)return Promise.resolve();const Z=!k&&getSavedScrollPosition(getScrollKey(b.fullPath,0))||(B||!k)&&history.state&&history.state.scroll||null;return nextTick().then(()=>j(b,A,Z)).then(_=>_&&scrollToPosition(_)).catch(_=>te(_,b,A))}const I=b=>r.go(b);let R;const N=new Set,V={currentRoute:l,listening:!0,addRoute:v,removeRoute:C,hasRoute:O,getRoutes:w,resolve:U,options:t,push:K,replace:J,go:I,back:()=>I(-1),forward:()=>I(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:_e.add,isReady:se,install(b){const A=this;b.component("RouterLink",RouterLink),b.component("RouterView",RouterView),b.config.globalProperties.$router=A,Object.defineProperty(b.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(l)}),isBrowser&&!R&&l.value===START_LOCATION_NORMALIZED&&(R=!0,K(r.location).catch(j=>{}));const k={};for(const j in START_LOCATION_NORMALIZED)k[j]=computed(()=>l.value[j]);b.provide(routerKey,A),b.provide(routeLocationKey,reactive(k)),b.provide(routerViewLocationKey,l);const B=b.unmount;N.add(b),b.unmount=function(){N.delete(b),N.size<1&&(c=START_LOCATION_NORMALIZED,de&&de(),de=null,l.value=START_LOCATION_NORMALIZED,R=!1,le=!1),B()}}};return V}function runGuardQueue(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function extractChangingRecords(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>isSameRouteRecord(c,a))?i.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>isSameRouteRecord(c,l))||r.push(l))}return[n,i,r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(t,e){if(!t)throw assertionError(e)},assertionError=function(t){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},byteArrayToString=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let g=(a&15)<<2|c>>6,v=c&63;l||(v=64,o||(g=64)),i.push(n[u],n[f],n[g],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(stringToByteArray$1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):byteArrayToString(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const c=r<t.length?n[t.charAt(r)]:64;++r;const f=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||f==null)throw Error();const g=s<<2|a>>4;if(i.push(g),c!==64){const v=a<<4&240|c>>2;if(i.push(v),f!==64){const C=c<<6&192|f;i.push(C)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},base64Encode=function(t){const e=stringToByteArray$1(t);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(t){return base64Encode(t).replace(/\./g,"")},base64Decode=function(t){try{return base64.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(t){return deepExtend(void 0,t)}function deepExtend(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!isValidKey$1(n)||(t[n]=deepExtend(t[n],e[n]));return t}function isValidKey$1(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const t=getUA();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isIndexedDBAvailable(){return typeof indexedDB=="object"}function validateIndexedDBOpenable(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&base64Decode(t[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},getDefaultEmulatorHost=t=>{var e,n;return(n=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},getDefaultAppConfig=()=>{var t;return(t=getDefaults())===null||t===void 0?void 0:t.config},getExperimentalSetting=t=>{var e;return(e=getDefaults())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?replaceTemplate(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new FirebaseError(r,a,i)}}function replaceTemplate(t,e){return t.replace(PATTERN,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(t){return JSON.parse(t)}function stringify(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode=function(t){let e={},n={},i={},r="";try{const s=t.split(".");e=jsonEval(base64Decode(s[0])||""),n=jsonEval(base64Decode(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}},isValidFormat=function(t){const e=decode(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},isAdmin=function(t){const e=decode(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function safeGet(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function isEmpty(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function map(t,e,n){const i={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function deepEqual(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(isObject$1(s)&&isObject$1(o)){if(!deepEqual(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function isObject$1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function querystringDecode(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function extractQuerystring(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let f=0;f<16;f++)i[f]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let f=0;f<16;f++)i[f]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let f=16;f<80;f++){const g=i[f-3]^i[f-8]^i[f-14]^i[f-16];i[f]=(g<<1|g>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let f=0;f<80;f++){f<40?f<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):f<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);const g=(r<<5|r>>>27)+c+l+u+i[f]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=g}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let r=0;const s=this.buf_;let o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}}function createSubscribe(t,e){const n=new ObserverProxy(t,e);return n.subscribe.bind(n)}class ObserverProxy{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");implementsAnyMethods(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=noop),r.error===void 0&&(r.error=noop),r.complete===void 0&&(r.complete=noop);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function noop(){}function errorPrefix(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){const s=r-55296;i++,assert(i<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},stringLength=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(t){return t&&t._delegate?t._delegate:t}class Component$1{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Deferred;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(!!i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(t){return t===DEFAULT_ENTRY_NAME$1?void 0:t}function isComponentEager(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Provider(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=ConsoleMethod[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(t,e)=>e.some(n=>t instanceof n);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(wrap(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cursorRequestMap.set(n,t)}).catch(()=>{}),reverseTransformCache.set(e,t),e}function cacheDonePromiseForTransaction(t){if(transactionDoneMap.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});transactionDoneMap.set(t,e)}let idbProxyTraps={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(t);if(e==="objectStoreNames")return t.objectStoreNames||transactionStoreNamesMap.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wrap(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function replaceTraps(t){idbProxyTraps=t(idbProxyTraps)}function wrapFunction(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(unwrap(this),e,...n);return transactionStoreNamesMap.set(i,e.sort?e.sort():[e]),wrap(i)}:getCursorAdvanceMethods().includes(t)?function(...e){return t.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(t.apply(unwrap(this),e))}}function transformCachableValue(t){return typeof t=="function"?wrapFunction(t):(t instanceof IDBTransaction&&cacheDonePromiseForTransaction(t),instanceOfAny(t,getIdbProxyableTypes())?new Proxy(t,idbProxyTraps):t)}function wrap(t){if(t instanceof IDBRequest)return promisifyRequest(t);if(transformCache.has(t))return transformCache.get(t);const e=transformCachableValue(t);return e!==t&&(transformCache.set(t,e),reverseTransformCache.set(e,t)),e}const unwrap=t=>reverseTransformCache.get(t);function openDB(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=wrap(o);return i&&o.addEventListener("upgradeneeded",l=>{i(wrap(o.result),l.oldVersion,l.newVersion,wrap(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",()=>r())}).catch(()=>{}),a}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=writeMethods.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||readMethods.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),r&&l.done]))[0]};return cachedMethods.set(e,s),s}replaceTraps(t=>({...t,get:(e,n,i)=>getMethod(e,n)||t.get(e,n,i),has:(e,n)=>!!getMethod(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(isVersionServiceProvider(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function isVersionServiceProvider(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.8.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3$1="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$3="9.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3$1]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(t,e){try{t.container.addComponent(e)}catch(n){logger$1.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _registerComponent(t){const e=t.name;if(_components.has(e))return logger$1.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,t);for(const n of _apps.values())_addComponent(n,t);return!0}function _getProvider(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Component$1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$3;function initializeApp(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ERROR_FACTORY.create("bad-app-name",{appName:String(r)});if(n||(n=getDefaultAppConfig()),!n)throw ERROR_FACTORY.create("no-options");const s=_apps.get(r);if(s){if(deepEqual(n,s.options)&&deepEqual(i,s.config))return s;throw ERROR_FACTORY.create("duplicate-app",{appName:r})}const o=new ComponentContainer(r);for(const l of _components.values())o.addComponent(l);const a=new FirebaseAppImpl(n,i,o);return _apps.set(r,a),a}function getApp(t=DEFAULT_ENTRY_NAME){const e=_apps.get(t);if(!e&&t===DEFAULT_ENTRY_NAME)return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:t});return e}function registerVersion(t,e,n){var i;let r=(i=PLATFORM_LOG_STRING[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger$1.warn(a.join(" "));return}_registerComponent(new Component$1(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(STORE_NAME)}}}).catch(t=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:t.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(t){var e;try{return(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(t))}catch(n){if(n instanceof FirebaseError)logger$1.warn(n.message);else{const i=ERROR_FACTORY.create("idb-get",{originalErrorMessage:(e=n)===null||e===void 0?void 0:e.message});logger$1.warn(i.message)}}}async function writeHeartbeatsToIndexedDB(t,e){var n;try{const r=(await getDbPromise()).transaction(STORE_NAME,"readwrite");return await r.objectStore(STORE_NAME).put(e,computeKey(t)),r.done}catch(i){if(i instanceof FirebaseError)logger$1.warn(i.message);else{const r=ERROR_FACTORY.create("idb-set",{originalErrorMessage:(n=i)===null||n===void 0?void 0:n.message});logger$1.warn(r.message)}}}function computeKey(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=getUTCDateString();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(r=>r.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(r=>{const s=new Date(r.date).valueOf();return Date.now()-s<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:n,unsentEntries:i}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),r=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(t,e=MAX_HEADER_BYTES){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),countBytes(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),countBytes(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await readHeartbeatsFromIndexedDB(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function countBytes(t){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(t){_registerComponent(new Component$1("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component$1("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$o,version$1$1,t),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");function __rest(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function _prodErrorMap(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logError(t,...e){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(t,...e){throw createErrorInternal(t,...e)}function _createError(t,...e){return createErrorInternal(t,...e)}function _errorWithCustomMessage(t,e,n){const i=Object.assign(Object.assign({},prodErrorMap()),{[e]:n});return new ErrorFactory("auth","Firebase",i).create(e,{appName:t.name})}function createErrorInternal(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return _DEFAULT_AUTH_ERROR_FACTORY.create(t,...e)}function _assert(t,e,...n){if(!t)throw createErrorInternal(e,...n)}function debugFail(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _logError(e),new Error(e)}function debugAssert(t,e){t||debugFail(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(t){debugAssert(t instanceof Function,"Expected a class definition");let e=instanceCache.get(t);return e?(debugAssert(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,instanceCache.set(t,e),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(t,e){const n=_getProvider(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(deepEqual(s,e!=null?e:{}))return r;_fail(r,"already-initialized")}return n.initialize({options:e})}function _initializeAuthInstance(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(_getInstance);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(e,n){this.shortDelay=e,this.longDelay=n,debugAssert(n>e,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(t,e){debugAssert(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function _performApiRequest(t,e,n,i,r={}){return _performFetchWithErrorHandling(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=querystring(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),FetchProvider.fetch()(_getFinalTarget(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))})}async function _performFetchWithErrorHandling(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},SERVER_ERROR_MAP),e);try{const r=new NetworkTimeout(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw _makeTaggedError(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _makeTaggedError(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _makeTaggedError(t,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw _errorWithCustomMessage(t,u,c);_fail(t,u)}}catch(r){if(r instanceof FirebaseError)throw r;_fail(t,"network-request-failed")}}async function _performSignInRequest(t,e,n,i,r={}){const s=await _performApiRequest(t,e,n,i,r);return"mfaPendingCredential"in s&&_fail(t,"multi-factor-auth-required",{_serverResponse:s}),s}function _getFinalTarget(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?_emulatorUrl(t.config,r):`${t.config.apiScheme}://${r}`}class NetworkTimeout{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=_createError(t,e,i);return r.customData._tokenResponse=n,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(t,e){return _performApiRequest(t,"POST","/v1/accounts:delete",e)}async function getAccountInfo(t,e){return _performApiRequest(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function getIdTokenResult(t,e=!1){const n=getModularInstance(t),i=await n.getIdToken(e),r=_parseToken(i);_assert(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:utcTimestampToDateString(secondsStringToMilliseconds(r.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(r.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function secondsStringToMilliseconds(t){return Number(t)*1e3}function _parseToken(t){var e;const[n,i,r]=t.split(".");if(n===void 0||i===void 0||r===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const s=base64Decode(i);return s?JSON.parse(s):(_logError("Failed to decode base64 JWT payload"),null)}catch(s){return _logError("Caught error parsing JWT payload as JSON",(e=s)===null||e===void 0?void 0:e.toString()),null}}function _tokenExpiresIn(t){const e=_parseToken(t);return _assert(e,"internal-error"),_assert(typeof e.exp<"u","internal-error"),_assert(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof FirebaseError&&isUserInvalidated(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function isUserInvalidated({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){var e;try{await this.user.getIdToken(!0)}catch(n){((e=n)===null||e===void 0?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(t){var e;const n=t.auth,i=await t.getIdToken(),r=await _logoutIfInvalidated(t,getAccountInfo(n,{idToken:i}));_assert(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?extractProviderData(s.providerUserInfo):[],a=mergeProviderData(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new UserMetadata(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function reload(t){const e=getModularInstance(t);await _reloadWithoutSaving(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mergeProviderData(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function extractProviderData(t){return t.map(e=>{var{providerId:n}=e,i=__rest(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(t,e){const n=await _performFetchWithErrorHandling(t,{},async()=>{const i=querystring({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=_getFinalTarget(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_assert(e.idToken,"internal-error"),_assert(typeof e.idToken<"u","internal-error"),_assert(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_tokenExpiresIn(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return _assert(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await requestStsToken(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new StsTokenManager;return i&&(_assert(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(_assert(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(_assert(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(t,e){_assert(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class UserImpl{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=__rest(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new UserMetadata(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,e));return _assert(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return getIdTokenResult(this,e)}reload(){return reload(this)}_assign(e){this!==e&&(_assert(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new UserImpl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;const f=(i=n.displayName)!==null&&i!==void 0?i:void 0,g=(r=n.email)!==null&&r!==void 0?r:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,C=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,O=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,U=(c=n.createdAt)!==null&&c!==void 0?c:void 0,P=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:x,emailVerified:K,isAnonymous:J,providerData:Q,stsTokenManager:ae}=n;_assert(x&&ae,e,"internal-error");const q=StsTokenManager.fromJSON(this.name,ae);_assert(typeof x=="string",e,"internal-error"),assertStringOrUndefined(f,e.name),assertStringOrUndefined(g,e.name),_assert(typeof K=="boolean",e,"internal-error"),_assert(typeof J=="boolean",e,"internal-error"),assertStringOrUndefined(v,e.name),assertStringOrUndefined(C,e.name),assertStringOrUndefined(w,e.name),assertStringOrUndefined(O,e.name),assertStringOrUndefined(U,e.name),assertStringOrUndefined(P,e.name);const ie=new UserImpl({uid:x,auth:e,email:g,emailVerified:K,displayName:f,isAnonymous:J,photoURL:C,phoneNumber:v,tenantId:w,stsTokenManager:q,createdAt:U,lastLoginAt:P});return Q&&Array.isArray(Q)&&(ie.providerData=Q.map(re=>Object.assign({},re))),O&&(ie._redirectEventId=O),ie}static async _fromIdTokenResponse(e,n,i=!1){const r=new StsTokenManager;r.updateFromServerResponse(n);const s=new UserImpl({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await _reloadWithoutSaving(s),s}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(t,e,n){return`firebase:${t}:${e}:${n}`}class PersistenceUserManager{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,r.apiKey,s),this.fullPersistenceKey=_persistenceKeyName("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?UserImpl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),e,i);const r=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||_getInstance(inMemoryPersistence);const o=_persistenceKeyName(i,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=UserImpl._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new PersistenceUserManager(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new PersistenceUserManager(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_isIEMobile(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_isFirefox(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_isBlackBerry(e))return"Blackberry";if(_isWebOS(e))return"Webos";if(_isSafari(e))return"Safari";if((e.includes("chrome/")||_isChromeIOS(e))&&!e.includes("edge/"))return"Chrome";if(_isAndroid(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function _isFirefox(t=getUA()){return/firefox\//i.test(t)}function _isSafari(t=getUA()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _isChromeIOS(t=getUA()){return/crios\//i.test(t)}function _isIEMobile(t=getUA()){return/iemobile/i.test(t)}function _isAndroid(t=getUA()){return/android/i.test(t)}function _isBlackBerry(t=getUA()){return/blackberry/i.test(t)}function _isWebOS(t=getUA()){return/webos/i.test(t)}function _isIOS(t=getUA()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _isIOSStandalone(t=getUA()){var e;return _isIOS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(t=getUA()){return _isIOS(t)||_isAndroid(t)||_isWebOS(t)||_isBlackBerry(t)||/windows phone/i.test(t)||_isIEMobile(t)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(t,e=[]){let n;switch(t){case"Browser":n=_getBrowserName(getUA());break;case"Worker":n=`${_getBrowserName(getUA())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${SDK_VERSION$1}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){var n;if(this.auth.currentUser===e)return;const i=[];try{for(const r of this.queue)await r(e),r.onAbort&&i.push(r.onAbort)}catch(r){i.reverse();for(const s of i)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:(n=r)===null||n===void 0?void 0:n.message})}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(e,n,i){this.app=e,this.heartbeatServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=_getInstance(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){var n;try{await _reloadWithoutSaving(e)}catch(i){if(((n=i)===null||n===void 0?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?getModularInstance(e):null;return n&&_assert(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&_assert(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ErrorFactory("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&_getInstance(e)||this._popupRedirectResolver;_assert(n,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return _assert(o,this,"internal-error"),o.then(()=>s(this.currentUser)),typeof n=="function"?e.addObserver(n,i,r):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return i&&(n["X-Firebase-Client"]=i),n}}function _castAuth(t){return getModularInstance(t)}class Subscription{constructor(e){this.auth=e,this.observer=null,this.addObserver=createSubscribe(n=>this.observer=n)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function connectAuthEmulator(t,e,n){const i=_castAuth(t);_assert(i._canInitEmulator,i,"emulator-config-failed"),_assert(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(n!=null&&n.disableWarnings),s=extractProtocol(e),{host:o,port:a}=extractHostAndPort(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||emitEmulatorWarning()}function extractProtocol(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function extractHostAndPort(t){const e=extractProtocol(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:parsePort(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:parsePort(o)}}}function parsePort(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function emitEmulatorWarning(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(e){return debugFail("not implemented")}_linkToIdToken(e,n){return debugFail("not implemented")}_getReauthenticationResolver(e){return debugFail("not implemented")}}async function updateEmailPassword(t,e){return _performApiRequest(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}async function signInWithEmailLinkForLinking(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthCredential extends AuthCredential{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new EmailAuthCredential(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new EmailAuthCredential(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return signInWithPassword(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLink$1(e,{email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return updateEmailPassword(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLinkForLinking(e,{idToken:n,email:this._email,oobCode:this._password});default:_fail(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new OAuthCredential(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):_fail("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=__rest(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new OAuthCredential(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return signInWithIdp(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,signInWithIdp(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,signInWithIdp(e,n)}buildRequest(){const e={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=querystring(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parseMode(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function parseDeepLink(t){const e=querystringDecode(extractQuerystring(t)).link,n=e?querystringDecode(extractQuerystring(e)).deep_link_id:null,i=querystringDecode(extractQuerystring(t)).deep_link_id;return(i?querystringDecode(extractQuerystring(i)).link:null)||i||n||e||t}class ActionCodeURL{constructor(e){var n,i,r,s,o,a;const l=querystringDecode(extractQuerystring(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,f=parseMode((r=l.mode)!==null&&r!==void 0?r:null);_assert(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=parseDeepLink(e);try{return new ActionCodeURL(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(e,n){return EmailAuthCredential._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ActionCodeURL.parseLink(n);return _assert(i,"argument-error"),EmailAuthCredential._fromEmailAndCode(e,i.code,i.tenantId)}}EmailAuthProvider.PROVIDER_ID="password";EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password";EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(e){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return FacebookAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return FacebookAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return GoogleAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GoogleAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return GoogleAuthProvider.credential(n,i)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(e){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return GithubAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return GithubAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return GithubAuthProvider.credential(e.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(e,n){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return TwitterAuthProvider.credentialFromTaggedObject(e)}static credentialFromError(e){return TwitterAuthProvider.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return TwitterAuthProvider.credential(n,i)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(t,e){return _performSignInRequest(t,"POST","/v1/accounts:signUp",_addTidIfNecessary(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await UserImpl._fromIdTokenResponse(e,i,r),o=providerIdForResponse(i);return new UserCredentialImpl({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=providerIdForResponse(i);return new UserCredentialImpl({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function providerIdForResponse(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new MultiFactorError(e,n,i,r)}}function _processCredentialSavingMfaContextIfNecessary(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(t,s,e,i):s})}async function _link$1(t,e,n=!1){const i=await _logoutIfInvalidated(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return UserCredentialImpl._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(t,e,n=!1){var i;const{auth:r}=t,s="reauthenticate";try{const o=await _logoutIfInvalidated(t,_processCredentialSavingMfaContextIfNecessary(r,s,e,t),n);_assert(o.idToken,r,"internal-error");const a=_parseToken(o.idToken);_assert(a,r,"internal-error");const{sub:l}=a;return _assert(t.uid===l,r,"user-mismatch"),UserCredentialImpl._forOperation(t,s,o)}catch(o){throw((i=o)===null||i===void 0?void 0:i.code)==="auth/user-not-found"&&_fail(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(t,e,n=!1){const i="signIn",r=await _processCredentialSavingMfaContextIfNecessary(t,i,e),s=await UserCredentialImpl._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function signInWithCredential(t,e){return _signInWithCredential(_castAuth(t),e)}async function createUserWithEmailAndPassword(t,e,n){const i=_castAuth(t),r=await signUp(i,{returnSecureToken:!0,email:e,password:n}),s=await UserCredentialImpl._fromIdTokenResponse(i,"signIn",r);return await i._updateCurrentUser(s.user),s}function signInWithEmailAndPassword(t,e,n){return signInWithCredential(getModularInstance(t),EmailAuthProvider.credential(e,n))}function onIdTokenChanged(t,e,n,i){return getModularInstance(t).onIdTokenChanged(e,n,i)}function beforeAuthStateChanged(t,e,n){return getModularInstance(t).beforeAuthStateChanged(e,n)}function signOut(t){return getModularInstance(t).signOut()}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const t=getUA();return _isSafari(t)||_isIOS(t)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(i);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(i,e.newValue):this.storage.removeItem(i);else if(this.localCache[i]===e.newValue&&!n)return}const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);_isIE10()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,IE10_LOCAL_STORAGE_SYNC_DELAY):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Receiver(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await _allSettled(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=_generateEventId("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){const g=f;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(t){_window().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function getObjectStore(t,e){return t.transaction([DB_OBJECTSTORE_NAME],e?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const t=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(t).toPromise()}function _openDatabase(){const t=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?e(i):(i.close(),await _deleteDatabase(),e(await _openDatabase()))})})}async function _putObject(t,e,n){const i=getObjectStore(t,!0).put({[DB_DATA_KEYPATH]:e,value:n});return new DBPromise(i).toPromise()}async function getObject(t,e){const n=getObjectStore(t,!1).get(e),i=await new DBPromise(n).toPromise();return i===void 0?null:i.value}function _deleteObject(t,e){const n=getObjectStore(t,!0).delete(e);return new DBPromise(n).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>_TRANSACTION_RETRY_COUNT)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);!i||((e=i[0])===null||e===void 0?void 0:e.fulfilled)&&((n=i[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _openDatabase();return await _putObject(e,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(e,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>_putObject(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>getObject(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>_deleteObject(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=getObjectStore(r,!1).getAll();return new DBPromise(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function _loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=_createError("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",getScriptParentElement().appendChild(i)})}function _generateCallbackName(t){return`__${t}${Math.floor(Math.random()*1e6)}`}new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(t,e){return e?_getInstance(e):(_assert(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return signInWithIdp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return signInWithIdp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return signInWithIdp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _signIn(t){return _signInWithCredential(t.auth,new IdpCredential(t),t.bypassAuthState)}function _reauth(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_reauthenticate(n,new IdpCredential(t),t.bypassAuthState)}async function _link(t){const{auth:e,user:n}=t;return _assert(n,e,"internal-error"),_link$1(n,new IdpCredential(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);class PopupOperation extends AbstractPopupRedirectOperation{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _assert(e,this.auth,"internal-error"),e}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const e=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,_POLL_WINDOW_CLOSE_TIMEOUT.get())};e()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=redirectOutcomeMap.get(this.auth._key());if(!e){try{const i=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}redirectOutcomeMap.set(this.auth._key(),e)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(t,e){const n=pendingRedirectKey(e),i=resolverPersistence(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function _overrideRedirectResult(t,e){redirectOutcomeMap.set(t._key(),e)}function resolverPersistence(t){return _getInstance(t._redirectPersistence)}function pendingRedirectKey(t){return _persistenceKeyName(PENDING_REDIRECT_KEY,t.config.apiKey,t.name)}async function _getRedirectResult(t,e,n=!1){const i=_castAuth(t),r=_withDefaultResolver(i,e),o=await new RedirectAction(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!isRedirectEvent(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!isNullRedirectEvent(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(_createError(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(e))}saveEventToCache(e){this.cachedEventUids.add(eventUid(e)),this.lastProcessedEventTime=Date.now()}}function eventUid(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function isNullRedirectEvent({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function isRedirectEvent(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(t,e={}){return _performApiRequest(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _getProjectConfig(t);for(const n of e)try{if(matchDomain(n))return}catch{}_fail(t,"unauthorized-domain")}function matchDomain(t){const e=_getCurrentUrl(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!HTTP_REGEX.test(n))return!1;if(IP_ADDRESS_REGEX.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const t=_window().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function loadGapi(t){return new Promise((e,n)=>{var i,r,s;function o(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),n(_createError(t,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((r=(i=_window().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=_window().gapi)===null||s===void 0)&&s.load)o();else{const a=_generateCallbackName("iframefcb");return _window()[a]=()=>{gapi.load?o():n(_createError(t,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw cachedGApiLoader=null,e})}let cachedGApiLoader=null;function _loadGapi(t){return cachedGApiLoader=cachedGApiLoader||loadGapi(t),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(t){const e=t.config;_assert(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_emulatorUrl(e,EMULATED_IFRAME_PATH):`https://${t.config.authDomain}/${IFRAME_PATH}`,i={apiKey:e.apiKey,appName:t.name,v:SDK_VERSION$1},r=EID_FROM_APIHOST.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${querystring(i).slice(1)}`}async function _openIframe(t){const e=await _loadGapi(t),n=_window().gapi;return _assert(n,t,"internal-error"),e.open({where:document.body,url:getIframeUrl(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=_createError(t,"network-request-failed"),a=_window().setTimeout(()=>{s(o)},PING_TIMEOUT.get());function l(){_window().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(t,e,n,i=DEFAULT_WIDTH,r=DEFAULT_HEIGHT){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:i.toString(),height:r.toString(),top:s,left:o}),c=getUA().toLowerCase();n&&(a=_isChromeIOS(c)?TARGET_BLANK:n),_isFirefox(c)&&(e=e||FIREFOX_EMPTY_URL,l.scrollbars="yes");const u=Object.entries(l).reduce((g,[v,C])=>`${g}${v}=${C},`,"");if(_isIOSStandalone(c)&&a!=="_self")return openAsNewWindowIOS(e||"",a),new AuthPopup(null);const f=window.open(e||"",a,u);_assert(f,t,"popup-blocked");try{f.focus()}catch{}return new AuthPopup(f)}function openAsNewWindowIOS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler";function _getRedirectUrl(t,e,n,i,r,s){_assert(t.config.authDomain,t,"auth-domain-config-required"),_assert(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:SDK_VERSION$1,eventId:r};if(e instanceof FederatedAuthProvider){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",isEmpty(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,c]of Object.entries(s||{}))o[l]=c}if(e instanceof BaseOAuthProvider){const l=e.getScopes().filter(c=>c!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${getHandlerBase(t)}?${querystring(a).slice(1)}`}function getHandlerBase({config:t}){return t.emulator?_emulatorUrl(t,EMULATOR_WIDGET_PATH):`https://${t.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(e,n,i,r){var s;debugAssert((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=_getRedirectUrl(e,n,i,_getCurrentUrl(),r);return _open(e,o,_generateEventId())}async _openRedirect(e,n,i,r){return await this._originValidation(e),_setWindowLocation(_getRedirectUrl(e,n,i,_getCurrentUrl(),r)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(debugAssert(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await _openIframe(e),i=new AuthEventManager(e);return n.register("authEvent",r=>(_assert(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[WEB_STORAGE_SUPPORT_KEY];o!==void 0&&n(!!o),_fail(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=_validateOrigin(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$3="@firebase/auth",version$2="0.20.11";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{var r;e(((r=i)===null||r===void 0?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(t){_registerComponent(new Component$1("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),{apiKey:s,authDomain:o}=i.options;return((a,l)=>{_assert(s&&!s.includes(":"),"invalid-api-key",{appName:a.name}),_assert(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const c={apiKey:s,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(t)},u=new AuthImpl(a,l,c);return _initializeAuthInstance(u,n),u})(i,r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),_registerComponent(new Component$1("auth-internal",e=>{const n=_castAuth(e.getProvider("auth").getImmediate());return(i=>new AuthInterop(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$3,version$2,getVersionForPlatform(t)),registerVersion(name$3,version$2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>authIdTokenMaxAge)return;const r=n==null?void 0:n.token;lastPostedIdToken!==r&&(lastPostedIdToken=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function getAuth(t=getApp()){const e=_getProvider(t,"auth");if(e.isInitialized())return e.getImmediate();const n=initializeAuth(t,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),i=getExperimentalSetting("authTokenSyncURL");if(i){const s=mintCookieFactory(i);beforeAuthStateChanged(n,s,()=>s(n.currentUser)),onIdTokenChanged(n,o=>s(o))}const r=getDefaultEmulatorHost("auth");return r&&connectAuthEmulator(n,`http://${r}`),n}registerAuth("Browser");const name$2="@firebase/database",version$1="0.13.10";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(t){SDK_VERSION=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),stringify(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:jsonEval(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return contains(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DOMStorageWrapper(e)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let t=1;return function(){return t++}}(),sha1=function(t){const e=stringToByteArray(t),n=new Sha1;n.update(e);const i=n.digest();return base64.encodeByteArray(i)},buildLogMessage_=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=buildLogMessage_.apply(null,i):typeof i=="object"?e+=stringify(i):e+=i,e+=" "}return e};let logger=null,firstLog_=!0;const enableLogging$1=function(t,e){assert(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),e&&SessionStorage.set("logging_enabled",!0)):typeof t=="function"?logger=t:(logger=null,SessionStorage.remove("logging_enabled"))},log=function(...t){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const e=buildLogMessage_.apply(null,t);logger(e)}},logWrapper=function(t){return function(...e){log(t,...e)}},error=function(...t){const e="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...t);logClient.error(e)},fatal=function(...t){const e=`FIREBASE FATAL ERROR: ${buildLogMessage_(...t)}`;throw logClient.error(e),new Error(e)},warn=function(...t){const e="FIREBASE WARNING: "+buildLogMessage_(...t);logClient.warn(e)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(t,e){if(t===e)return 0;if(t===MIN_NAME||e===MAX_NAME)return-1;if(e===MIN_NAME||t===MAX_NAME)return 1;{const n=tryParseInt(t),i=tryParseInt(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},stringCompare=function(t,e){return t===e?0:t<e?-1:1},requireKey=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+stringify(e))},ObjectToUniqueKey=function(t){if(typeof t!="object"||t===null)return stringify(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=stringify(e[i]),n+=":",n+=ObjectToUniqueKey(t[e[i]]);return n+="}",n},splitStringBySize=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function each(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const doubleToIEEE754String=function(t){assert(!isInvalidJSONNumber(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));const c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();const u=c.join("");let f="";for(l=0;l<64;l+=8){let g=parseInt(u.substr(l,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(t){if(INTEGER_REGEXP_.test(t)){const e=Number(t);if(e>=INTEGER_32_MIN&&e<=INTEGER_32_MAX)return e}return null},exceptionGuard=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw warn("Exception was thrown by user callback.",n),e},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(log("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(e)}}class EmulatorTokenProvider{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(e,n,i,r,s=!1,o="",a=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function repoInfoNeedsQueryParam(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function repoInfoConnectionURL(t,e,n){assert(typeof e=="string","typeof type must == string"),assert(typeof n=="object","typeof params must == object");let i;if(e===WEBSOCKET)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===LONG_POLLING)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);repoInfoNeedsQueryParam(t)&&(n.ns=t.namespace);const r=[];return each(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(e,n=1){contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(t){const e=t.toString();return collections[e]||(collections[e]=new StatsCollection),collections[e]}function statsManagerGetOrCreateReporter(t,e){const n=t.toString();return reporters[n]||(reporters[n]=e()),reporters[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&exceptionGuard(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(e),this.stats_=statsManagerGetCollection(n),this.urlFn=l=>(this.appCheckToken&&(l[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(n,LONG_POLLING,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new PacketReceiver(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...s)=>{const[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===FIREBASE_LONGPOLL_START_PARAM)this.id=a,this.password=l;else if(o===FIREBASE_LONGPOLL_CLOSE_COMMAND)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const i={};i[FIREBASE_LONGPOLL_START_PARAM]="t",i[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),i[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(i[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(i[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(i[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(i[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(i[REFERER_PARAM]=FORGE_REF);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=stringify(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=base64Encode(n),r=splitStringBySize(i,MAX_PAYLOAD_SIZE);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",i[FIREBASE_LONGPOLL_ID_PARAM]=e,i[FIREBASE_LONGPOLL_PW_PARAM]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=stringify(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class FirebaseIFrameScriptHolder{constructor(e,n,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=e,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=n,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){log("frame writing exception"),a.stack&&log(a.stack),log(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||log("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,e[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,e[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+i.length<=MAX_URL_DATA_SIZE;){const o=this.pendingSegs.shift();i=i+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+r+"="+o.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+r+"="+o.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{log("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(e,n,i,r,s,o,a){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(n),this.connURL=WebSocketConnection.connectionURL_(n,o,a,r,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,r,s){const o={};return o[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(o[REFERER_PARAM]=FORGE_REF),n&&(o[TRANSPORT_SESSION_PARAM]=n),i&&(o[LAST_SESSION_PARAM]=i),r&&(o[APP_CHECK_TOKEN_PARAM]=r),s&&(o[APPLICATION_ID_PARAM]=s),repoInfoConnectionURL(e,WEBSOCKET,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let i;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=jsonEval(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(assert(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=stringify(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=splitStringBySize(n,WEBSOCKET_MAX_FRAME_SIZE);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=WebSocketConnection&&WebSocketConnection.isAvailable();let i=n&&!WebSocketConnection.previouslyFailed();if(e.webSocketOnly&&(n||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[WebSocketConnection];else{const r=this.transports_=[];for(const s of TransportManager.ALL_TRANSPORTS)s&&s.isAvailable()&&r.push(s);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(MESSAGE_TYPE in e){const n=e[MESSAGE_TYPE];n===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():n===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=requireKey("t",e),i=requireKey("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=requireKey("t",e),i=requireKey("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=requireKey(MESSAGE_TYPE,e);if(MESSAGE_DATA in e){const i=e[MESSAGE_DATA];if(n===SERVER_HELLO)this.onHandshake_(i);else if(n===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===CONTROL_SHUTDOWN?this.onConnectionShutdown_(i):n===CONTROL_RESET?this.onReset_(i):n===CONTROL_ERROR?error("Server Error: "+i):n===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),PROTOCOL_VERSION!==i&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventEmitter{constructor(e){this.allowedEvents_=e,this.listeners_={},assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){assert(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(e){return assert(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;class Path{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pathGetLength(t){return t.pieces_.length-t.pieceNum_}function pathPopFront(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Path(t.pieces_,e)}function pathGetBack(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function pathToUrlEncodedString(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function pathSlice(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function pathParent(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Path(e,0)}function pathChild(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Path)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new Path(n,0)}function pathIsEmpty(t){return t.pieceNum_>=t.pieces_.length}function newRelativePath(t,e){const n=pathGetFront(t),i=pathGetFront(e);if(n===null)return e;if(n===i)return newRelativePath(pathPopFront(t),pathPopFront(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pathEquals(t,e){if(pathGetLength(t)!==pathGetLength(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function pathContains(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(pathGetLength(t)>pathGetLength(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class ValidationPath{constructor(e,n){this.errorPrefix_=n,this.parts_=pathSlice(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=stringLength(this.parts_[i]);validationPathCheckValid(this)}}function validationPathPush(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=stringLength(e),validationPathCheckValid(t)}function validationPathPop(t){const e=t.parts_.pop();t.byteLength_-=stringLength(e),t.parts_.length>0&&(t.byteLength_-=1)}function validationPathCheckValid(t){if(t.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(t.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+t.byteLength_+").");if(t.parts_.length>MAX_PATH_DEPTH)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(t))}function validationPathToErrorString(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(e){return assert(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(e,n,i,r,s,o,a,l){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=l,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const r=++this.requestNumber_,s={r,a:e,b:n};this.log_(stringify(s)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const n=new Deferred,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const a=o.d;o.s==="ok"?n.resolve(a):n.reject(a)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,i,r){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),assert(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:n,query:e,tag:i};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),r=n._queryIdentifier;this.log_("Listen on "+i+" for "+r);const s={p:i},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,a=>{const l=a.d,c=a.s;PersistentConnection.warnOnListenWarnings_(l,n),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",a),c!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(c,l))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&contains(e,"w")){const i=safeGet(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=isValidFormat(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,r=>{const s=r.s,o=r.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),assert(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,n)}sendUnlisten_(e,n,i,r){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";r&&(s.q=i,s.t=r),this.sendRequest(o,s)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,r){const s={p:n,d:i};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{r&&setTimeout(()=>{r(o.s,o.d)},Math.floor(0))})}put(e,n,i,r){this.putInternal("p",e,n,i,r)}merge(e,n,i,r){this.putInternal("m",e,n,i,r)}putInternal(e,n,i,r,s){this.initConnection_();const o={p:n,d:i};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;const a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+stringify(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):error("Unrecognized action received from server: "+stringify(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+PersistentConnection.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const l=function(){a?a.close():(o=!0,i())},c=function(f){assert(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(f)};this.realtime_={close:l,sendRequest:c};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[f,g]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?log("getToken() completed but was canceled"):(log("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=g&&g.token,a=new Connection(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,v=>{warn(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},s))}catch(f){this.log_("Failed to get token: "+f),o||(this.repoInfo_.nodeAdmin&&warn(f),l())}}}interrupt(e){log("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){log("Resuming connection for reason: "+e),delete this.interruptReasons_[e],isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(s=>ObjectToUniqueKey(s)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,n){const i=new Path(e).toString();let r;if(this.listens.has(i)){const s=this.listens.get(i);r=s.get(n),s.delete(n),s.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,n){log("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){log("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?e["framework.cordova"]=1:isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=OnlineMonitor.getInstance().currentlyOnline();return isEmpty(this.interruptReasons_)&&e}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new NamedNode(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new NamedNode(MIN_NAME,e),r=new NamedNode(MIN_NAME,n);return this.compare(i,r)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(e){__EMPTY_NODE=e}compare(e,n){return nameCompare(e.name,n.name)}isDefinedOn(e){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(e,n){return assert(typeof e=="string","KeyIndex indexValue must always be a string."),new NamedNode(e,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class LLRBNode{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i!=null?i:LLRBNode.RED,this.left=r!=null?r:SortedMap.EMPTY_NODE,this.right=s!=null?s:SortedMap.EMPTY_NODE}copy(e,n,i,r,s){return new LLRBNode(e!=null?e:this.key,n!=null?n:this.value,i!=null?i:this.color,r!=null?r:this.left,s!=null?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return s<0?r=r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r=r.copy(null,n,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,r;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return SortedMap.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(e,n,i,r,s){return this}insert(e,n,i){return new LLRBNode(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(e,n=SortedMap.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new SortedMap(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new SortedMapIterator(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new SortedMapIterator(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new SortedMapIterator(this.root_,null,this.comparator_,!0,e)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(t,e){return nameCompare(t.name,e.name)}function NAME_COMPARATOR(t,e){return nameCompare(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(t){MAX_NODE$2=t}const priorityHashText=function(t){return typeof t=="number"?"number:"+doubleToIEEE754String(t):"string:"+t},validatePriorityNode=function(t){if(t.isLeafNode()){const e=t.val();assert(typeof e=="string"||typeof e=="number"||typeof e=="object"&&contains(e,".sv"),"Priority must be a string or number.")}else assert(t===MAX_NODE$2||t.isEmpty(),"priority of unexpected type.");assert(t===MAX_NODE$2||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(e,n=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(e){__childrenNodeConstructor=e}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new LeafNode(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return pathIsEmpty(e)?this:pathGetFront(e)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=pathGetFront(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:(assert(i!==".priority"||pathGetLength(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+priorityHashText(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=doubleToIEEE754String(this.value_):e+=this.value_,this.lazyHash_=sha1(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof LeafNode.__childrenNodeConstructor?-1:(assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,r=LeafNode.VALUE_TYPE_ORDER.indexOf(n),s=LeafNode.VALUE_TYPE_ORDER.indexOf(i);return assert(r>=0,"Unknown leaf type: "+n),assert(s>=0,"Unknown leaf type: "+i),r===s?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(t){nodeFromJSON$1=t}function setMaxNode(t){MAX_NODE$1=t}class PriorityIndex extends Index{compare(e,n){const i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?nameCompare(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(e,n){const i=nodeFromJSON$1(e);return new NamedNode(n,new LeafNode("[PRIORITY-POST]",i))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(e){const n=s=>parseInt(Math.log(s)/LOG_2,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const buildChildSet=function(t,e,n,i){t.sort(e);const r=function(l,c){const u=c-l;let f,g;if(u===0)return null;if(u===1)return f=t[l],g=n?n(f):f,new LLRBNode(g,f.node,LLRBNode.BLACK,null,null);{const v=parseInt(u/2,10)+l,C=r(l,v),w=r(v+1,c);return f=t[v],g=n?n(f):f,new LLRBNode(g,f.node,LLRBNode.BLACK,C,w)}},s=function(l){let c=null,u=null,f=t.length;const g=function(C,w){const O=f-C,U=f;f-=C;const P=r(O+1,U),x=t[O],K=n?n(x):x;v(new LLRBNode(K,x.node,w,null,P))},v=function(C){c?(c.left=C,c=C):(u=C,c=C)};for(let C=0;C<l.count;++C){const w=l.nextBitIsOne(),O=Math.pow(2,l.count-(C+1));w?g(O,LLRBNode.BLACK):(g(O,LLRBNode.BLACK),g(O,LLRBNode.RED))}return u},o=new Base12Num(t.length),a=s(o);return new SortedMap(i||e,a)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(e){const n=safeGet(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof SortedMap?n:null}hasIndex(e){return contains(this.indexSet_,e.toString())}addIndex(e,n){assert(e!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=n.getIterator(NamedNode.Wrap);let o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=buildChildSet(i,e.getCompare()):a=fallbackObject;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const u=Object.assign({},this.indexes_);return u[l]=a,new IndexMap(u,c)}addToIndexes(e,n){const i=map(this.indexes_,(r,s)=>{const o=safeGet(this.indexSet_,s);if(assert(o,"Missing index implementation for "+s),r===fallbackObject)if(o.isDefinedOn(e.node)){const a=[],l=n.getIterator(NamedNode.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),buildChildSet(a,o.getCompare())}else return fallbackObject;else{const a=n.get(e.name);let l=r;return a&&(l=l.remove(new NamedNode(e.name,a))),l.insert(e,e.node)}});return new IndexMap(i,this.indexSet_)}removeFromIndexes(e,n){const i=map(this.indexes_,r=>{if(r===fallbackObject)return r;{const s=n.get(e.name);return s?r.remove(new NamedNode(e.name,s)):r}});return new IndexMap(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(e){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?EMPTY_NODE:n}}getChild(e){const n=pathGetFront(e);return n===null?this:this.getImmediateChild(n).getChild(pathPopFront(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(assert(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new NamedNode(e,n);let r,s;n.isEmpty()?(r=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(i,this.children_));const o=r.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(r,o,s)}}updateChild(e,n){const i=pathGetFront(e);if(i===null)return n;{assert(pathGetFront(e)!==".priority"||pathGetLength(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(pathPopFront(e),n);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,r=0,s=!0;if(this.forEachChild(PRIORITY_INDEX,(o,a)=>{n[o]=a.val(e),i++,s&&ChildrenNode.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):s=!1}),!e&&s&&r<2*i){const o=[];for(const a in n)o[a]=n[a];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(n,i)=>{const r=i.hash();r!==""&&(e+=":"+n+":"+r)}),this.lazyHash_=e===""?"":sha1(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const r=this.resolveIndex_(i);if(r){const s=r.getPredecessorKey(new NamedNode(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new NamedNode(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new NamedNode(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>n(r.name,r.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,NamedNode.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)<0;)r.getNext(),s=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,NamedNode.Wrap);let s=r.peek();for(;s!=null&&n.compare(s,e)>0;)r.getNext(),s=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===MAX_NODE?-1:0}withIndex(e){if(e===KEY_INDEX||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===KEY_INDEX||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(PRIORITY_INDEX),r=n.getIterator(PRIORITY_INDEX);let s=i.getNext(),o=r.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=i.getNext(),o=r.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===KEY_INDEX?null:this.indexMap_.get(e.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(t,e=null){if(t===null)return ChildrenNode.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),assert(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new LeafNode(n,nodeFromJSON(e))}if(!(t instanceof Array)&&USE_HINZE){const n=[];let i=!1;if(each(t,(o,a)=>{if(o.substring(0,1)!=="."){const l=nodeFromJSON(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new NamedNode(o,l)))}}),n.length===0)return ChildrenNode.EMPTY_NODE;const s=buildChildSet(n,NAME_ONLY_COMPARATOR,o=>o.name,NAME_COMPARATOR);if(i){const o=buildChildSet(n,PRIORITY_INDEX.getCompare());return new ChildrenNode(s,nodeFromJSON(e),new IndexMap({".priority":o},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(s,nodeFromJSON(e),IndexMap.Default)}else{let n=ChildrenNode.EMPTY_NODE;return each(t,(i,r)=>{if(contains(t,i)&&i.substring(0,1)!=="."){const s=nodeFromJSON(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(nodeFromJSON(e))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(e){super(),this.indexPath_=e,assert(!pathIsEmpty(e)&&pathGetFront(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?nameCompare(e.name,n.name):s}makePost(e,n){const i=nodeFromJSON(e),r=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,i);return new NamedNode(n,r)}maxPost(){const e=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,e)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(e,n){const i=e.node.compareTo(n.node);return i===0?nameCompare(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(e,n){const i=nodeFromJSON(e);return new NamedNode(n,i)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(t){return{type:"value",snapshotNode:t}}function changeChildAdded(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function changeChildRemoved(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function changeChildChanged(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function changeChildMoved(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const e=new QueryParams;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function queryParamsToRestQueryStringParameters(t){const e={};if(t.isDefault())return e;let n;return t.index_===PRIORITY_INDEX?n="$priority":t.index_===VALUE_INDEX?n="$value":t.index_===KEY_INDEX?n="$key":(assert(t.index_ instanceof PathIndex,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=stringify(n),t.startSet_&&(e.startAt=stringify(t.indexStartValue_),t.startNameSet_&&(e.startAt+=","+stringify(t.indexStartName_))),t.endSet_&&(e.endAt=stringify(t.indexEndValue_),t.endNameSet_&&(e.endAt+=","+stringify(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function queryParamsGetQueryObject(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==PRIORITY_INDEX&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(assert(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=ReadonlyRestClient.getListenId_(e,i),a={};this.listens_[o]=a;const l=queryParamsToRestQueryStringParameters(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let f=u;if(c===404&&(f=null,c=null),c===null&&this.onDataUpdate_(s,f,!1,i),safeGet(this.listens_,o)===a){let g;c?c===401?g="permission_denied":g="rest_error:"+c:g="ok",r(g,null)}})}unlisten(e,n){const i=ReadonlyRestClient.getListenId_(e,n);delete this.listens_[i]}get(e){const n=queryParamsToRestQueryStringParameters(e._queryParams),i=e._path.toString(),r=new Deferred;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+querystring(n);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=jsonEval(a.responseText)}catch{warn("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&warn("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(t,e,n){if(pathIsEmpty(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=pathGetFront(e);t.children.has(i)||t.children.set(i,newSparseSnapshotTree());const r=t.children.get(i);e=pathPopFront(e),sparseSnapshotTreeRemember(r,e,n)}}function sparseSnapshotTreeForEachTree(t,e,n){t.value!==null?n(e,t.value):sparseSnapshotTreeForEachChild(t,(i,r)=>{const s=new Path(e.toString()+"/"+i);sparseSnapshotTreeForEachTree(r,s,n)})}function sparseSnapshotTreeForEachChild(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&each(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new StatsListener(e);const i=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;each(e,(r,s)=>{s>0&&contains(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(e){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Path(e));return new AckUserWrite(newEmptyPath(),n,this.revert)}}else return assert(pathGetFront(this.path)===e,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=OperationType.OVERWRITE}operationForChild(e){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(e)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=OperationType.MERGE}operationForChild(e){if(pathIsEmpty(this.path)){const n=this.children.subtree(new Path(e));return n.isEmpty()?null:n.value?new Overwrite(this.source,newEmptyPath(),n.value):new Merge(this.source,newEmptyPath(),n)}else return assert(pathGetFront(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(pathIsEmpty(e))return this.isFullyInitialized()&&!this.filtered_;const n=pathGetFront(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function eventGeneratorGenerateEventsForChanges(t,e,n,i){const r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(changeChildMoved(o.childName,o.snapshotNode))}),eventGeneratorGenerateEventsForType(t,r,"child_removed",e,i,n),eventGeneratorGenerateEventsForType(t,r,"child_added",e,i,n),eventGeneratorGenerateEventsForType(t,r,"child_moved",s,i,n),eventGeneratorGenerateEventsForType(t,r,"child_changed",e,i,n),eventGeneratorGenerateEventsForType(t,r,"value",e,i,n),r}function eventGeneratorGenerateEventsForType(t,e,n,i,r,s){const o=i.filter(a=>a.type===n);o.sort((a,l)=>eventGeneratorCompareChanges(t,a,l)),o.forEach(a=>{const l=eventGeneratorMaterializeSingleChange(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function eventGeneratorMaterializeSingleChange(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function eventGeneratorCompareChanges(t,e,n){if(e.childName==null||n.childName==null)throw assertionError("Should only compare child_ events.");const i=new NamedNode(e.childName,e.snapshotNode),r=new NamedNode(n.childName,n.snapshotNode);return t.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(t,e){return{eventCache:t,serverCache:e}}function viewCacheUpdateEventSnap(t,e,n,i){return newViewCache(new CacheNode(e,n,i),t.serverCache)}function viewCacheUpdateServerSnap(t,e,n,i){return newViewCache(t.eventCache,new CacheNode(e,n,i))}function viewCacheGetCompleteEventSnap(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(e,n=EmptyChildren()){this.value=e,this.children=n}static fromObject(e){let n=new ImmutableTree(null);return each(e,(i,r)=>{n=n.set(new Path(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(e))return null;{const i=pathGetFront(e),r=this.children.get(i);if(r!==null){const s=r.findRootMostMatchingPathAndValue(pathPopFront(e),n);return s!=null?{path:pathChild(new Path(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(pathIsEmpty(e))return this;{const n=pathGetFront(e),i=this.children.get(n);return i!==null?i.subtree(pathPopFront(e)):new ImmutableTree(null)}}set(e,n){if(pathIsEmpty(e))return new ImmutableTree(n,this.children);{const i=pathGetFront(e),s=(this.children.get(i)||new ImmutableTree(null)).set(pathPopFront(e),n),o=this.children.insert(i,s);return new ImmutableTree(this.value,o)}}remove(e){if(pathIsEmpty(e))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const n=pathGetFront(e),i=this.children.get(n);if(i){const r=i.remove(pathPopFront(e));let s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,s)}else return this}}get(e){if(pathIsEmpty(e))return this.value;{const n=pathGetFront(e),i=this.children.get(n);return i?i.get(pathPopFront(e)):null}}setTree(e,n){if(pathIsEmpty(e))return n;{const i=pathGetFront(e),s=(this.children.get(i)||new ImmutableTree(null)).setTree(pathPopFront(e),n);let o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new ImmutableTree(this.value,o)}}fold(e){return this.fold_(newEmptyPath(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(pathChild(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,newEmptyPath(),n)}findOnPath_(e,n,i){const r=this.value?i(n,this.value):!1;if(r)return r;if(pathIsEmpty(e))return null;{const s=pathGetFront(e),o=this.children.get(s);return o?o.findOnPath_(pathPopFront(e),pathChild(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,newEmptyPath(),n)}foreachOnPath_(e,n,i){if(pathIsEmpty(e))return this;{this.value&&i(n,this.value);const r=pathGetFront(e),s=this.children.get(r);return s?s.foreachOnPath_(pathPopFront(e),pathChild(n,r),i):new ImmutableTree(null)}}foreach(e){this.foreach_(newEmptyPath(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(pathChild(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(e){this.writeTree_=e}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(t,e,n){if(pathIsEmpty(e))return new CompoundWrite(new ImmutableTree(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let s=i.value;const o=newRelativePath(r,e);return s=s.updateChild(o,n),new CompoundWrite(t.writeTree_.set(r,s))}else{const r=new ImmutableTree(n),s=t.writeTree_.setTree(e,r);return new CompoundWrite(s)}}}function compoundWriteAddWrites(t,e,n){let i=t;return each(n,(r,s)=>{i=compoundWriteAddWrite(i,pathChild(e,r),s)}),i}function compoundWriteRemoveWrite(t,e){if(pathIsEmpty(e))return CompoundWrite.empty();{const n=t.writeTree_.setTree(e,new ImmutableTree(null));return new CompoundWrite(n)}}function compoundWriteHasCompleteWrite(t,e){return compoundWriteGetCompleteNode(t,e)!=null}function compoundWriteGetCompleteNode(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(newRelativePath(n.path,e)):null}function compoundWriteGetCompleteChildren(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(PRIORITY_INDEX,(i,r)=>{e.push(new NamedNode(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new NamedNode(i,r.value))}),e}function compoundWriteChildCompoundWrite(t,e){if(pathIsEmpty(e))return t;{const n=compoundWriteGetCompleteNode(t,e);return n!=null?new CompoundWrite(new ImmutableTree(n)):new CompoundWrite(t.writeTree_.subtree(e))}}function compoundWriteIsEmpty(t){return t.writeTree_.isEmpty()}function compoundWriteApply(t,e){return applySubtreeWrite(newEmptyPath(),t.writeTree_,e)}function applySubtreeWrite(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(assert(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=applySubtreeWrite(pathChild(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(pathChild(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(t,e){return newWriteTreeRef(e,t)}function writeTreeAddOverwrite(t,e,n,i,r){assert(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=compoundWriteAddWrite(t.visibleWrites,e,n)),t.lastWriteId=i}function writeTreeGetWrite(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function writeTreeRemoveWrite(t,e){const n=t.allWrites.findIndex(a=>a.writeId===e);assert(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){const a=t.allWrites[o];a.visible&&(o>=n&&writeTreeRecordContainsPath_(a,i.path)?r=!1:pathContains(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return writeTreeResetTree_(t),!0;if(i.snap)t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,i.path);else{const a=i.children;each(a,l=>{t.visibleWrites=compoundWriteRemoveWrite(t.visibleWrites,pathChild(i.path,l))})}return!0}else return!1}function writeTreeRecordContainsPath_(t,e){if(t.snap)return pathContains(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&pathContains(pathChild(t.path,n),e))return!0;return!1}function writeTreeResetTree_(t){t.visibleWrites=writeTreeLayerTree_(t.allWrites,writeTreeDefaultFilter_,newEmptyPath()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function writeTreeDefaultFilter_(t){return t.visible}function writeTreeLayerTree_(t,e,n){let i=CompoundWrite.empty();for(let r=0;r<t.length;++r){const s=t[r];if(e(s)){const o=s.path;let a;if(s.snap)pathContains(n,o)?(a=newRelativePath(n,o),i=compoundWriteAddWrite(i,a,s.snap)):pathContains(o,n)&&(a=newRelativePath(o,n),i=compoundWriteAddWrite(i,newEmptyPath(),s.snap.getChild(a)));else if(s.children){if(pathContains(n,o))a=newRelativePath(n,o),i=compoundWriteAddWrites(i,a,s.children);else if(pathContains(o,n))if(a=newRelativePath(o,n),pathIsEmpty(a))i=compoundWriteAddWrites(i,newEmptyPath(),s.children);else{const l=safeGet(s.children,pathGetFront(a));if(l){const c=l.getChild(pathPopFront(a));i=compoundWriteAddWrite(i,newEmptyPath(),c)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return i}function writeTreeCalcCompleteEventCache(t,e,n,i,r){if(!i&&!r){const s=compoundWriteGetCompleteNode(t.visibleWrites,e);if(s!=null)return s;{const o=compoundWriteChildCompoundWrite(t.visibleWrites,e);if(compoundWriteIsEmpty(o))return n;if(n==null&&!compoundWriteHasCompleteWrite(o,newEmptyPath()))return null;{const a=n||ChildrenNode.EMPTY_NODE;return compoundWriteApply(o,a)}}}else{const s=compoundWriteChildCompoundWrite(t.visibleWrites,e);if(!r&&compoundWriteIsEmpty(s))return n;if(!r&&n==null&&!compoundWriteHasCompleteWrite(s,newEmptyPath()))return null;{const o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(pathContains(c.path,e)||pathContains(e,c.path))},a=writeTreeLayerTree_(t.allWrites,o,e),l=n||ChildrenNode.EMPTY_NODE;return compoundWriteApply(a,l)}}}function writeTreeCalcCompleteEventChildren(t,e,n){let i=ChildrenNode.EMPTY_NODE;const r=compoundWriteGetCompleteNode(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(PRIORITY_INDEX,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){const s=compoundWriteChildCompoundWrite(t.visibleWrites,e);return n.forEachChild(PRIORITY_INDEX,(o,a)=>{const l=compoundWriteApply(compoundWriteChildCompoundWrite(s,new Path(o)),a);i=i.updateImmediateChild(o,l)}),compoundWriteGetCompleteChildren(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{const s=compoundWriteChildCompoundWrite(t.visibleWrites,e);return compoundWriteGetCompleteChildren(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function writeTreeCalcEventCacheAfterServerOverwrite(t,e,n,i,r){assert(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=pathChild(e,n);if(compoundWriteHasCompleteWrite(t.visibleWrites,s))return null;{const o=compoundWriteChildCompoundWrite(t.visibleWrites,s);return compoundWriteIsEmpty(o)?r.getChild(n):compoundWriteApply(o,r.getChild(n))}}function writeTreeCalcCompleteChild(t,e,n,i){const r=pathChild(e,n),s=compoundWriteGetCompleteNode(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){const o=compoundWriteChildCompoundWrite(t.visibleWrites,r);return compoundWriteApply(o,i.getNode().getImmediateChild(n))}else return null}function writeTreeShadowingWrite(t,e){return compoundWriteGetCompleteNode(t.visibleWrites,e)}function writeTreeCalcIndexedSlice(t,e,n,i,r,s,o){let a;const l=compoundWriteChildCompoundWrite(t.visibleWrites,e),c=compoundWriteGetCompleteNode(l,newEmptyPath());if(c!=null)a=c;else if(n!=null)a=compoundWriteApply(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){const u=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let v=g.getNext();for(;v&&u.length<r;)f(v,i)!==0&&u.push(v),v=g.getNext();return u}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(t,e,n,i){return writeTreeCalcCompleteEventCache(t.writeTree,t.treePath,e,n,i)}function writeTreeRefCalcCompleteEventChildren(t,e){return writeTreeCalcCompleteEventChildren(t.writeTree,t.treePath,e)}function writeTreeRefCalcEventCacheAfterServerOverwrite(t,e,n,i){return writeTreeCalcEventCacheAfterServerOverwrite(t.writeTree,t.treePath,e,n,i)}function writeTreeRefShadowingWrite(t,e){return writeTreeShadowingWrite(t.writeTree,pathChild(t.treePath,e))}function writeTreeRefCalcIndexedSlice(t,e,n,i,r,s){return writeTreeCalcIndexedSlice(t.writeTree,t.treePath,e,n,i,r,s)}function writeTreeRefCalcCompleteChild(t,e,n){return writeTreeCalcCompleteChild(t.writeTree,t.treePath,e,n)}function writeTreeRefChild(t,e){return newWriteTreeRef(pathChild(t.treePath,e),t.writeTree)}function newWriteTreeRef(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;assert(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),assert(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,changeChildChanged(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,changeChildRemoved(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,changeChildAdded(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,changeChildChanged(i,e.snapshotNode,r.oldSnap));else throw assertionError("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,e,i)}}getChildAfterChild(e,n,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),s=writeTreeRefCalcIndexedSlice(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}}function viewProcessorAssertIndexed(t,e){assert(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),assert(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(t,e,n,i,r){const s=new ChildChangeAccumulator;let o,a;if(n.type===OperationType.OVERWRITE){const c=n;c.source.fromUser?o=viewProcessorApplyUserOverwrite(t,e,c.path,c.snap,i,r,s):(assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!pathIsEmpty(c.path),o=viewProcessorApplyServerOverwrite(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===OperationType.MERGE){const c=n;c.source.fromUser?o=viewProcessorApplyUserMerge(t,e,c.path,c.children,i,r,s):(assert(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=viewProcessorApplyServerMerge(t,e,c.path,c.children,i,r,a,s))}else if(n.type===OperationType.ACK_USER_WRITE){const c=n;c.revert?o=viewProcessorRevertUserWrite(t,e,c.path,i,r,s):o=viewProcessorAckUserWrite(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===OperationType.LISTEN_COMPLETE)o=viewProcessorListenComplete(t,e,n.path,i,s);else throw assertionError("Unknown operation type: "+n.type);const l=s.getChanges();return viewProcessorMaybeAddValueEvent(e,o,l),{viewCache:o,changes:l}}function viewProcessorMaybeAddValueEvent(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=viewCacheGetCompleteEventSnap(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(changeValue(viewCacheGetCompleteEventSnap(e)))}}function viewProcessorGenerateEventCacheAfterServerEvent(t,e,n,i,r,s){const o=e.eventCache;if(writeTreeRefShadowingWrite(i,n)!=null)return e;{let a,l;if(pathIsEmpty(n))if(assert(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=viewCacheGetCompleteServerSnap(e),u=c instanceof ChildrenNode?c:ChildrenNode.EMPTY_NODE,f=writeTreeRefCalcCompleteEventChildren(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const c=writeTreeRefCalcCompleteEventCache(i,viewCacheGetCompleteServerSnap(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=pathGetFront(n);if(c===".priority"){assert(pathGetLength(n)===1,"Can't have a priority with additional path components");const u=o.getNode();l=e.serverCache.getNode();const f=writeTreeRefCalcEventCacheAfterServerOverwrite(i,n,u,l);f!=null?a=t.filter.updatePriority(u,f):a=o.getNode()}else{const u=pathPopFront(n);let f;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const g=writeTreeRefCalcEventCacheAfterServerOverwrite(i,n,o.getNode(),l);g!=null?f=o.getNode().getImmediateChild(c).updateChild(u,g):f=o.getNode().getImmediateChild(c)}else f=writeTreeRefCalcCompleteChild(i,c,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),c,f,u,r,s):a=o.getNode()}}return viewCacheUpdateEventSnap(e,a,o.isFullyInitialized()||pathIsEmpty(n),t.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(t,e,n,i,r,s,o,a){const l=e.serverCache;let c;const u=o?t.filter:t.filter.getIndexedFilter();if(pathIsEmpty(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const v=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),v,null)}else{const v=pathGetFront(n);if(!l.isCompleteForPath(n)&&pathGetLength(n)>1)return e;const C=pathPopFront(n),O=l.getNode().getImmediateChild(v).updateChild(C,i);v===".priority"?c=u.updatePriority(l.getNode(),O):c=u.updateChild(l.getNode(),v,O,C,NO_COMPLETE_CHILD_SOURCE,null)}const f=viewCacheUpdateServerSnap(e,c,l.isFullyInitialized()||pathIsEmpty(n),u.filtersNodes()),g=new WriteTreeCompleteChildSource(r,f,s);return viewProcessorGenerateEventCacheAfterServerEvent(t,f,n,r,g,a)}function viewProcessorApplyUserOverwrite(t,e,n,i,r,s,o){const a=e.eventCache;let l,c;const u=new WriteTreeCompleteChildSource(r,e,s);if(pathIsEmpty(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=viewCacheUpdateEventSnap(e,c,!0,t.filter.filtersNodes());else{const f=pathGetFront(n);if(f===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=viewCacheUpdateEventSnap(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=pathPopFront(n),v=a.getNode().getImmediateChild(f);let C;if(pathIsEmpty(g))C=i;else{const w=u.getCompleteChild(f);w!=null?pathGetBack(g)===".priority"&&w.getChild(pathParent(g)).isEmpty()?C=w:C=w.updateChild(g,i):C=ChildrenNode.EMPTY_NODE}if(v.equals(C))l=e;else{const w=t.filter.updateChild(a.getNode(),f,C,g,u,o);l=viewCacheUpdateEventSnap(e,w,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function viewProcessorCacheHasChild(t,e){return t.eventCache.isCompleteForChild(e)}function viewProcessorApplyUserMerge(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{const u=pathChild(n,l);viewProcessorCacheHasChild(e,pathGetFront(u))&&(a=viewProcessorApplyUserOverwrite(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{const u=pathChild(n,l);viewProcessorCacheHasChild(e,pathGetFront(u))||(a=viewProcessorApplyUserOverwrite(t,a,u,c,r,s,o))}),a}function viewProcessorApplyMerge(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function viewProcessorApplyServerMerge(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;pathIsEmpty(n)?c=i:c=new ImmutableTree(null).setTree(n,i);const u=e.serverCache.getNode();return c.children.inorderTraversal((f,g)=>{if(u.hasChild(f)){const v=e.serverCache.getNode().getImmediateChild(f),C=viewProcessorApplyMerge(t,v,g);l=viewProcessorApplyServerOverwrite(t,l,new Path(f),C,r,s,o,a)}}),c.children.inorderTraversal((f,g)=>{const v=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!u.hasChild(f)&&!v){const C=e.serverCache.getNode().getImmediateChild(f),w=viewProcessorApplyMerge(t,C,g);l=viewProcessorApplyServerOverwrite(t,l,new Path(f),w,r,s,o,a)}}),l}function viewProcessorAckUserWrite(t,e,n,i,r,s,o){if(writeTreeRefShadowingWrite(r,n)!=null)return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(pathIsEmpty(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return viewProcessorApplyServerOverwrite(t,e,n,l.getNode().getChild(n),r,s,a,o);if(pathIsEmpty(n)){let c=new ImmutableTree(null);return l.getNode().forEachChild(KEY_INDEX,(u,f)=>{c=c.set(new Path(u),f)}),viewProcessorApplyServerMerge(t,e,n,c,r,s,a,o)}else return e}else{let c=new ImmutableTree(null);return i.foreach((u,f)=>{const g=pathChild(n,u);l.isCompleteForPath(g)&&(c=c.set(u,l.getNode().getChild(g)))}),viewProcessorApplyServerMerge(t,e,n,c,r,s,a,o)}}function viewProcessorListenComplete(t,e,n,i,r){const s=e.serverCache,o=viewCacheUpdateServerSnap(e,s.getNode(),s.isFullyInitialized()||pathIsEmpty(n),s.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(t,o,n,i,NO_COMPLETE_CHILD_SOURCE,r)}function viewProcessorRevertUserWrite(t,e,n,i,r,s){let o;if(writeTreeRefShadowingWrite(i,n)!=null)return e;{const a=new WriteTreeCompleteChildSource(i,e,r),l=e.eventCache.getNode();let c;if(pathIsEmpty(n)||pathGetFront(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=writeTreeRefCalcCompleteEventCache(i,viewCacheGetCompleteServerSnap(e));else{const f=e.serverCache.getNode();assert(f instanceof ChildrenNode,"serverChildren would be complete if leaf node"),u=writeTreeRefCalcCompleteEventChildren(i,f)}u=u,c=t.filter.updateFullNode(l,u,s)}else{const u=pathGetFront(n);let f=writeTreeRefCalcCompleteChild(i,u,e.serverCache);f==null&&e.serverCache.isCompleteForChild(u)&&(f=l.getImmediateChild(u)),f!=null?c=t.filter.updateChild(l,u,f,pathPopFront(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,ChildrenNode.EMPTY_NODE,pathPopFront(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=writeTreeRefCalcCompleteEventCache(i,viewCacheGetCompleteServerSnap(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(i,newEmptyPath())!=null,viewCacheUpdateEventSnap(e,c,o,t.filter.filtersNodes())}}function viewGetCompleteServerCache(t,e){const n=viewCacheGetCompleteServerSnap(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!pathIsEmpty(e)&&!n.getImmediateChild(pathGetFront(e)).isEmpty())?n.getChild(e):null}function viewApplyOperation(t,e,n,i){e.type===OperationType.MERGE&&e.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(t.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(t.viewCache_),"Missing event cache, even though we have a server cache"));const r=t.viewCache_,s=viewProcessorApplyOperation(t.processor_,r,e,n,i);return viewProcessorAssertIndexed(t.processor_,s.viewCache),assert(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,viewGenerateEventsForChanges_(t,s.changes,s.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(t,e,n,i){const r=i?[i]:t.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(t.eventGenerator_,e,n,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;function syncPointSetReferenceConstructor(t){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=t}function syncPointApplyOperation(t,e,n,i){const r=e.source.queryId;if(r!==null){const s=t.views.get(r);return assert(s!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(s,e,n,i)}else{let s=[];for(const o of t.views.values())s=s.concat(viewApplyOperation(o,e,n,i));return s}}function syncPointGetCompleteServerCache(t,e){let n=null;for(const i of t.views.values())n=n||viewGetCompleteServerCache(i,e);return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(t){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=t}class SyncTree{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(t,e,n,i,r){return writeTreeAddOverwrite(t.pendingWriteTree_,e,n,i,r),r?syncTreeApplyOperationToSyncPoints_(t,new Overwrite(newOperationSourceUser(),e,n)):[]}function syncTreeAckUserWrite(t,e,n=!1){const i=writeTreeGetWrite(t.pendingWriteTree_,e);if(writeTreeRemoveWrite(t.pendingWriteTree_,e)){let s=new ImmutableTree(null);return i.snap!=null?s=s.set(newEmptyPath(),!0):each(i.children,o=>{s=s.set(new Path(o),!0)}),syncTreeApplyOperationToSyncPoints_(t,new AckUserWrite(i.path,s,n))}else return[]}function syncTreeApplyServerOverwrite(t,e,n){return syncTreeApplyOperationToSyncPoints_(t,new Overwrite(newOperationSourceServer(),e,n))}function syncTreeApplyServerMerge(t,e,n){const i=ImmutableTree.fromObject(n);return syncTreeApplyOperationToSyncPoints_(t,new Merge(newOperationSourceServer(),e,i))}function syncTreeApplyTaggedQueryOverwrite(t,e,n,i){const r=syncTreeQueryKeyForTag_(t,i);if(r!=null){const s=syncTreeParseQueryKey_(r),o=s.path,a=s.queryId,l=newRelativePath(o,e),c=new Overwrite(newOperationSourceServerTaggedQuery(a),l,n);return syncTreeApplyTaggedOperation_(t,o,c)}else return[]}function syncTreeApplyTaggedQueryMerge(t,e,n,i){const r=syncTreeQueryKeyForTag_(t,i);if(r){const s=syncTreeParseQueryKey_(r),o=s.path,a=s.queryId,l=newRelativePath(o,e),c=ImmutableTree.fromObject(n),u=new Merge(newOperationSourceServerTaggedQuery(a),l,c);return syncTreeApplyTaggedOperation_(t,o,u)}else return[]}function syncTreeCalcCompleteEventCache(t,e,n){const r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{const l=newRelativePath(o,e),c=syncPointGetCompleteServerCache(a,l);if(c)return c});return writeTreeCalcCompleteEventCache(r,e,s,n,!0)}function syncTreeApplyOperationToSyncPoints_(t,e){return syncTreeApplyOperationHelper_(e,t.syncPointTree_,null,writeTreeChildWrites(t.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(t,e,n,i){if(pathIsEmpty(t.path))return syncTreeApplyOperationDescendantsHelper_(t,e,n,i);{const r=e.get(newEmptyPath());n==null&&r!=null&&(n=syncPointGetCompleteServerCache(r,newEmptyPath()));let s=[];const o=pathGetFront(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){const c=n?n.getImmediateChild(o):null,u=writeTreeRefChild(i,o);s=s.concat(syncTreeApplyOperationHelper_(a,l,c,u))}return r&&(s=s.concat(syncPointApplyOperation(r,t,i,n))),s}}function syncTreeApplyOperationDescendantsHelper_(t,e,n,i){const r=e.get(newEmptyPath());n==null&&r!=null&&(n=syncPointGetCompleteServerCache(r,newEmptyPath()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=n?n.getImmediateChild(o):null,c=writeTreeRefChild(i,o),u=t.operationForChild(o);u&&(s=s.concat(syncTreeApplyOperationDescendantsHelper_(u,a,l,c)))}),r&&(s=s.concat(syncPointApplyOperation(r,t,i,n))),s}function syncTreeQueryKeyForTag_(t,e){return t.tagToQueryMap.get(e)}function syncTreeParseQueryKey_(t){const e=t.indexOf("$");return assert(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Path(t.substr(0,e))}}function syncTreeApplyTaggedOperation_(t,e,n){const i=t.syncPointTree_.get(e);assert(i,"Missing sync point for query tag that we're tracking");const r=writeTreeChildWrites(t.pendingWriteTree_,e);return syncPointApplyOperation(i,n,r,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new ExistingValueProvider(n)}node(){return this.node_}}class DeferredValueProvider{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=pathChild(this.path_,e);return new DeferredValueProvider(this.syncTree_,n)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},resolveDeferredLeafValue=function(t,e,n){if(!t||typeof t!="object")return t;if(assert(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return resolveScalarDeferredValue(t[".sv"],e,n);if(typeof t[".sv"]=="object")return resolveComplexDeferredValue(t[".sv"],e);assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},resolveScalarDeferredValue=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:assert(!1,"Unexpected server value: "+t)}},resolveComplexDeferredValue=function(t,e,n){t.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&assert(!1,"Unexpected increment value: "+i);const r=e.node();if(assert(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const o=r.getValue();return typeof o!="number"?i:o+i},resolveDeferredValueTree=function(t,e,n,i){return resolveDeferredValue(e,new DeferredValueProvider(n,t),i)},resolveDeferredValueSnapshot=function(t,e,n){return resolveDeferredValue(t,new ExistingValueProvider(e),n)};function resolveDeferredValue(t,e,n){const i=t.getPriority().val(),r=resolveDeferredLeafValue(i,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,a=resolveDeferredLeafValue(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new LeafNode(a,nodeFromJSON(r)):t}else{const o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new LeafNode(r))),o.forEachChild(PRIORITY_INDEX,(a,l)=>{const c=resolveDeferredValue(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function treeSubTree(t,e){let n=e instanceof Path?e:new Path(e),i=t,r=pathGetFront(n);for(;r!==null;){const s=safeGet(i.node.children,r)||{children:{},childCount:0};i=new Tree(r,i,s),n=pathPopFront(n),r=pathGetFront(n)}return i}function treeGetValue(t){return t.node.value}function treeSetValue(t,e){t.node.value=e,treeUpdateParents(t)}function treeHasChildren(t){return t.node.childCount>0}function treeIsEmpty(t){return treeGetValue(t)===void 0&&!treeHasChildren(t)}function treeForEachChild(t,e){each(t.node.children,(n,i)=>{e(new Tree(n,t,i))})}function treeForEachDescendant(t,e,n,i){n&&!i&&e(t),treeForEachChild(t,r=>{treeForEachDescendant(r,e,!0,i)}),n&&i&&e(t)}function treeForEachAncestor(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function treeGetPath(t){return new Path(t.parent===null?t.name:treeGetPath(t.parent)+"/"+t.name)}function treeUpdateParents(t){t.parent!==null&&treeUpdateChild(t.parent,t.name,t)}function treeUpdateChild(t,e,n){const i=treeIsEmpty(n),r=contains(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,treeUpdateParents(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,treeUpdateParents(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(t){return typeof t=="string"&&t.length!==0&&!INVALID_KEY_REGEX_.test(t)},isValidPathString=function(t){return typeof t=="string"&&t.length!==0&&!INVALID_PATH_REGEX_.test(t)},isValidRootPathString=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(t)},validateFirebaseData=function(t,e,n){const i=n instanceof Path?new ValidationPath(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+validationPathToErrorString(i));if(typeof e=="function")throw new Error(t+"contains a function "+validationPathToErrorString(i)+" with contents = "+e.toString());if(isInvalidJSONNumber(e))throw new Error(t+"contains "+e.toString()+" "+validationPathToErrorString(i));if(typeof e=="string"&&e.length>MAX_LEAF_SIZE_/3&&stringLength(e)>MAX_LEAF_SIZE_)throw new Error(t+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(each(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!isValidKey(o)))throw new Error(t+" contains an invalid key ("+o+") "+validationPathToErrorString(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(i,o),validateFirebaseData(t,a,i),validationPathPop(i)}),r&&s)throw new Error(t+' contains ".value" child '+validationPathToErrorString(i)+" in addition to actual children.")}},validateUrl=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!isValidKey(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!isValidRootPathString(n))throw new Error(errorPrefix(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(t,e){let n=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();n!==null&&!pathEquals(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function eventQueueRaiseEventsForChangedPath(t,e,n){eventQueueQueueEvents(t,n),eventQueueRaiseQueuedEventsMatchingPredicate(t,i=>pathContains(i,e)||pathContains(e,i))}function eventQueueRaiseQueuedEventsMatchingPredicate(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const r=t.eventLists_[i];if(r){const s=r.path;e(s)?(eventListRaise(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function eventListRaise(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();logger&&log("event: "+n.toString()),exceptionGuard(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(t,e,n){if(t.stats_=statsManagerGetCollection(t.repoInfo_),t.forceRestClient_||beingCrawled())t.server_=new ReadonlyRestClient(t.repoInfo_,(i,r,s,o)=>{repoOnDataUpdate(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new PersistentConnection(t.repoInfo_,e,(i,r,s,o)=>{repoOnDataUpdate(t,i,r,s,o)},i=>{repoOnConnectStatus(t,i)},i=>{repoOnServerInfoUpdate(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=statsManagerGetOrCreateReporter(t.repoInfo_,()=>new StatsReporter(t.stats_,t.server_)),t.infoData_=new SnapshotHolder,t.infoSyncTree_=new SyncTree({startListening:(i,r,s,o)=>{let a=[];const l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=syncTreeApplyServerOverwrite(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),repoUpdateInfo(t,"connected",!1),t.serverSyncTree_=new SyncTree({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{const c=o(a,l);eventQueueRaiseEventsForChangedPath(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function repoServerTime(t){const n=t.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function repoGenerateServerValues(t){return generateWithValues({timestamp:repoServerTime(t)})}function repoOnDataUpdate(t,e,n,i,r){t.dataUpdateCount++;const s=new Path(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){const l=map(n,c=>nodeFromJSON(c));o=syncTreeApplyTaggedQueryMerge(t.serverSyncTree_,s,l,r)}else{const l=nodeFromJSON(n);o=syncTreeApplyTaggedQueryOverwrite(t.serverSyncTree_,s,l,r)}else if(i){const l=map(n,c=>nodeFromJSON(c));o=syncTreeApplyServerMerge(t.serverSyncTree_,s,l)}else{const l=nodeFromJSON(n);o=syncTreeApplyServerOverwrite(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=repoRerunTransactions(t,s)),eventQueueRaiseEventsForChangedPath(t.eventQueue_,a,o)}function repoOnConnectStatus(t,e){repoUpdateInfo(t,"connected",e),e===!1&&repoRunOnDisconnectEvents(t)}function repoOnServerInfoUpdate(t,e){each(e,(n,i)=>{repoUpdateInfo(t,n,i)})}function repoUpdateInfo(t,e,n){const i=new Path("/.info/"+e),r=nodeFromJSON(n);t.infoData_.updateSnapshot(i,r);const s=syncTreeApplyServerOverwrite(t.infoSyncTree_,i,r);eventQueueRaiseEventsForChangedPath(t.eventQueue_,i,s)}function repoGetNextWriteId(t){return t.nextWriteId_++}function repoRunOnDisconnectEvents(t){repoLog(t,"onDisconnectEvents");const e=repoGenerateServerValues(t),n=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(t.onDisconnect_,newEmptyPath(),(r,s)=>{const o=resolveDeferredValueTree(r,s,t.serverSyncTree_,e);sparseSnapshotTreeRemember(n,r,o)});let i=[];sparseSnapshotTreeForEachTree(n,newEmptyPath(),(r,s)=>{i=i.concat(syncTreeApplyServerOverwrite(t.serverSyncTree_,r,s));const o=repoAbortTransactions(t,r);repoRerunTransactions(t,o)}),t.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(t.eventQueue_,newEmptyPath(),i)}function repoInterrupt(t){t.persistentConnection_&&t.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),log(n,...e)}function repoGetLatestState(t,e,n){return syncTreeCalcCompleteEventCache(t.serverSyncTree_,e,n)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(t,e=t.transactionQueueTree_){if(e||repoPruneCompletedTransactionsBelowNode(t,e),treeGetValue(e)){const n=repoBuildTransactionQueue(t,e);assert(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&repoSendTransactionQueue(t,treeGetPath(e),n)}else treeHasChildren(e)&&treeForEachChild(e,n=>{repoSendReadyTransactions(t,n)})}function repoSendTransactionQueue(t,e,n){const i=n.map(c=>c.currentWriteId),r=repoGetLatestState(t,e,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const u=n[c];assert(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;const f=newRelativePath(e,u.path);s=s.updateChild(f,u.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{repoLog(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){const f=[];for(let g=0;g<n.length;g++)n[g].status=2,u=u.concat(syncTreeAckUserWrite(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();repoPruneCompletedTransactionsBelowNode(t,treeSubTree(t.transactionQueueTree_,e)),repoSendReadyTransactions(t,t.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(t.eventQueue_,e,u);for(let g=0;g<f.length;g++)exceptionGuard(f[g])}else{if(c==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{warn("transaction at "+l.toString()+" failed: "+c);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=c}repoRerunTransactions(t,e)}},o)}function repoRerunTransactions(t,e){const n=repoGetAncestorTransactionNode(t,e),i=treeGetPath(n),r=repoBuildTransactionQueue(t,n);return repoRerunTransactionQueue(t,r,i),i}function repoRerunTransactionQueue(t,e,n){if(e.length===0)return;const i=[];let r=[];const o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=newRelativePath(n,l.path);let u=!1,f;if(assert(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,f=l.abortReason,r=r.concat(syncTreeAckUserWrite(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=MAX_TRANSACTION_RETRIES)u=!0,f="maxretry",r=r.concat(syncTreeAckUserWrite(t.serverSyncTree_,l.currentWriteId,!0));else{const g=repoGetLatestState(t,l.path,o);l.currentInputSnapshot=g;const v=e[a].update(g.val());if(v!==void 0){validateFirebaseData("transaction failed: Data returned ",v,l.path);let C=nodeFromJSON(v);typeof v=="object"&&v!=null&&contains(v,".priority")||(C=C.updatePriority(g.getPriority()));const O=l.currentWriteId,U=repoGenerateServerValues(t),P=resolveDeferredValueSnapshot(C,g,U);l.currentOutputSnapshotRaw=C,l.currentOutputSnapshotResolved=P,l.currentWriteId=repoGetNextWriteId(t),o.splice(o.indexOf(O),1),r=r.concat(syncTreeApplyUserOverwrite(t.serverSyncTree_,l.path,P,l.currentWriteId,l.applyLocally)),r=r.concat(syncTreeAckUserWrite(t.serverSyncTree_,O,!0))}else u=!0,f="nodata",r=r.concat(syncTreeAckUserWrite(t.serverSyncTree_,l.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(f),!1,null))))}repoPruneCompletedTransactionsBelowNode(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)exceptionGuard(i[a]);repoSendReadyTransactions(t,t.transactionQueueTree_)}function repoGetAncestorTransactionNode(t,e){let n,i=t.transactionQueueTree_;for(n=pathGetFront(e);n!==null&&treeGetValue(i)===void 0;)i=treeSubTree(i,n),e=pathPopFront(e),n=pathGetFront(e);return i}function repoBuildTransactionQueue(t,e){const n=[];return repoAggregateTransactionQueuesForNode(t,e,n),n.sort((i,r)=>i.order-r.order),n}function repoAggregateTransactionQueuesForNode(t,e,n){const i=treeGetValue(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);treeForEachChild(e,r=>{repoAggregateTransactionQueuesForNode(t,r,n)})}function repoPruneCompletedTransactionsBelowNode(t,e){const n=treeGetValue(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,treeSetValue(e,n.length>0?n:void 0)}treeForEachChild(e,i=>{repoPruneCompletedTransactionsBelowNode(t,i)})}function repoAbortTransactions(t,e){const n=treeGetPath(repoGetAncestorTransactionNode(t,e)),i=treeSubTree(t.transactionQueueTree_,e);return treeForEachAncestor(i,r=>{repoAbortTransactionsOnNode(t,r)}),repoAbortTransactionsOnNode(t,i),treeForEachDescendant(i,r=>{repoAbortTransactionsOnNode(t,r)}),n}function repoAbortTransactionsOnNode(t,e){const n=treeGetValue(e);if(n){const i=[];let r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(assert(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(assert(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(syncTreeAckUserWrite(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?treeSetValue(e,void 0):n.length=s+1,eventQueueRaiseEventsForChangedPath(t.eventQueue_,treeGetPath(e),r);for(let o=0;o<i.length;o++)exceptionGuard(i[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function decodeQuery(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):warn(`Invalid query segment '${n}' in query '${t}'`)}return e}const parseRepoInfo=function(t,e){const n=parseDatabaseURL(t),i=n.namespace;n.domain==="firebase.com"&&fatal(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||warnIfPageIsSecure();const r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new RepoInfo(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new Path(n.pathString)}},parseDatabaseURL=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(u,f)),u<f&&(r=decodePath(t.substring(u,f)));const g=decodeQuery(t.substring(Math.min(t.length,f)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;const v=e.slice(0,c);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const C=e.indexOf(".");i=e.substring(0,C).toLowerCase(),n=e.substring(C+1),s=i}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const e=queryParamsGetQueryObject(this._queryParams),n=ObjectToUniqueKey(e);return n==="{}"?"default":n}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(e){if(e=getModularInstance(e),!(e instanceof QueryImpl))return!1;const n=this._repo===e._repo,i=pathEquals(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(e,n){super(e,n,new QueryParams,!1)}get parent(){const e=pathParent(this._path);return e===null?null:new ReferenceImpl(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerDatabaseFromApp(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=parseRepoInfo(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=parseRepoInfo(s,r),a=o.repoInfo):l=!o.repoInfo.secure;const u=r&&l?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(t.name,t.options,e);validateUrl("Invalid Firebase Database URL",o),pathIsEmpty(o.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const f=repoManagerCreateRepo(a,t,u,new AppCheckTokenProvider(t.name,n));return new Database(f,t)}function repoManagerDeleteRepo(t,e){const n=repos[e];(!n||n[t.key]!==t)&&fatal(`Database ${e}(${t.repoInfo_}) has already been deleted.`),repoInterrupt(t),delete n[t.key]}function repoManagerCreateRepo(t,e,n,i){let r=repos[e.name];r||(r={},repos[e.name]=r);let s=r[t.toURLString()];return s&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Repo(t,useRestClient,n,i),r[t.toURLString()]=s,s}class Database{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&fatal("Cannot call "+e+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(t){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component$1("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return repoManagerDatabaseFromApp(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name$2,version$1,t),registerVersion(name$2,version$1,"esm2017")}PersistentConnection.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};PersistentConnection.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};registerDatabase();var name$1="firebase",version="9.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version,"app");const firebaseConfig={apiKey:"AIzaSyDj6Fsz-Aem3ydUr-LwZB8FrEBsjhb_qgA",authDomain:"vue-training-dd609.firebaseapp.com",projectId:"vue-training-dd609",storageBucket:"vue-training-dd609.appspot.com",messagingSenderId:"64576047074",appId:"1:64576047074:web:a6c026e1f88360649f5bbb",measurementId:"G-EZ89R773TQ"},app=initializeApp(firebaseConfig),auth=getAuth(app);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var storeKey="store";function useStore(t){return t===void 0&&(t=null),inject(t!==null?t:storeKey)}function forEachValue(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function isObject(t){return t!==null&&typeof t=="object"}function isPromise(t){return t&&typeof t.then=="function"}function partial(t,e){return function(){return t(e)}}function genericSubscribe(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function resetStore(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;installModule(t,n,[],t._modules.root,!0),resetStoreState(t,n,e)}function resetStoreState(t,e,n){var i=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var r=t._wrappedGetters,s={};forEachValue(r,function(o,a){s[a]=partial(o,t),Object.defineProperty(t.getters,a,{get:function(){return s[a]()},enumerable:!0})}),t._state=reactive({data:e}),t.strict&&enableStrictMode(t),i&&n&&t._withCommit(function(){i.data=null})}function installModule(t,e,n,i,r){var s=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=i),!s&&!r){var a=getNestedState(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=i.state})}var c=i.context=makeLocalContext(t,o,n);i.forEachMutation(function(u,f){var g=o+f;registerMutation(t,g,u,c)}),i.forEachAction(function(u,f){var g=u.root?f:o+f,v=u.handler||u;registerAction(t,g,v,c)}),i.forEachGetter(function(u,f){var g=o+f;registerGetter(t,g,u,c)}),i.forEachChild(function(u,f){installModule(t,e,n.concat(f),u,r)})}function makeLocalContext(t,e,n){var i=e==="",r={dispatch:i?t.dispatch:function(s,o,a){var l=unifyObjectStyle(s,o,a),c=l.payload,u=l.options,f=l.type;return(!u||!u.root)&&(f=e+f),t.dispatch(f,c)},commit:i?t.commit:function(s,o,a){var l=unifyObjectStyle(s,o,a),c=l.payload,u=l.options,f=l.type;(!u||!u.root)&&(f=e+f),t.commit(f,c,u)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return makeLocalGetters(t,e)}},state:{get:function(){return getNestedState(t.state,n)}}}),r}function makeLocalGetters(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach(function(r){if(r.slice(0,i)===e){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return t.getters[r]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function registerMutation(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push(function(o){n.call(t,i.state,o)})}function registerAction(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push(function(o){var a=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},o);return isPromise(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function registerGetter(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(s){return n(i.state,i.getters,s.state,s.getters)})}function enableStrictMode(t){watch(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function getNestedState(t,e){return e.reduce(function(n,i){return n[i]},t)}function unifyObjectStyle(t,e,n){return isObject(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var LABEL_VUEX_BINDINGS="vuex bindings",MUTATIONS_LAYER_ID="vuex:mutations",ACTIONS_LAYER_ID="vuex:actions",INSPECTOR_ID="vuex",actionId=0;function addDevtools(t,e){setupDevtoolsPlugin({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[LABEL_VUEX_BINDINGS]},function(n){n.addTimelineLayer({id:MUTATIONS_LAYER_ID,label:"Vuex Mutations",color:COLOR_LIME_500}),n.addTimelineLayer({id:ACTIONS_LAYER_ID,label:"Vuex Actions",color:COLOR_LIME_500}),n.addInspector({id:INSPECTOR_ID,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(i){if(i.app===t&&i.inspectorId===INSPECTOR_ID)if(i.filter){var r=[];flattenStoreForInspectorTree(r,e._modules.root,i.filter,""),i.rootNodes=r}else i.rootNodes=[formatStoreForInspectorTree(e._modules.root,"")]}),n.on.getInspectorState(function(i){if(i.app===t&&i.inspectorId===INSPECTOR_ID){var r=i.nodeId;makeLocalGetters(e,r),i.state=formatStoreForInspectorState(getStoreModule(e._modules,r),r==="root"?e.getters:e._makeLocalGettersCache,r)}}),n.on.editInspectorState(function(i){if(i.app===t&&i.inspectorId===INSPECTOR_ID){var r=i.nodeId,s=i.path;r!=="root"&&(s=r.split("/").filter(Boolean).concat(s)),e._withCommit(function(){i.set(e._state.data,s,i.state.value)})}}),e.subscribe(function(i,r){var s={};i.payload&&(s.payload=i.payload),s.state=r,n.notifyComponentUpdate(),n.sendInspectorTree(INSPECTOR_ID),n.sendInspectorState(INSPECTOR_ID),n.addTimelineEvent({layerId:MUTATIONS_LAYER_ID,event:{time:Date.now(),title:i.type,data:s}})}),e.subscribeAction({before:function(i,r){var s={};i.payload&&(s.payload=i.payload),i._id=actionId++,i._time=Date.now(),s.state=r,n.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,r){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=r,n.addTimelineEvent({layerId:ACTIONS_LAYER_ID,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var COLOR_LIME_500=8702998,COLOR_DARK=6710886,COLOR_WHITE=16777215,TAG_NAMESPACED={label:"namespaced",textColor:COLOR_WHITE,backgroundColor:COLOR_DARK};function extractNameFromPath(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function formatStoreForInspectorTree(t,e){return{id:e||"root",label:extractNameFromPath(e),tags:t.namespaced?[TAG_NAMESPACED]:[],children:Object.keys(t._children).map(function(n){return formatStoreForInspectorTree(t._children[n],e+n+"/")})}}function flattenStoreForInspectorTree(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[TAG_NAMESPACED]:[]}),Object.keys(e._children).forEach(function(r){flattenStoreForInspectorTree(t,e._children[r],n,i+r+"/")})}function formatStoreForInspectorState(t,e,n){e=n==="root"?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(i.length){var s=transformPathsToObjectTree(e);r.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?extractNameFromPath(o):o,editable:!1,value:canThrow(function(){return s[o]})}})}return r}function transformPathsToObjectTree(t){var e={};return Object.keys(t).forEach(function(n){var i=n.split("/");if(i.length>1){var r=e,s=i.pop();i.forEach(function(o){r[o]||(r[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),r=r[o]._custom.value}),r[s]=canThrow(function(){return t[n]})}else e[n]=canThrow(function(){return t[n]})}),e}function getStoreModule(t,e){var n=e.split("/").filter(function(i){return i});return n.reduce(function(i,r,s){var o=i[r];if(!o)throw new Error('Missing module "'+r+'" for path "'+e+'".');return s===n.length-1?o:o._children},e==="root"?t:t.root._children)}function canThrow(t){try{return t()}catch(e){return e}}var Module=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=(typeof i=="function"?i():i)||{}},prototypeAccessors$1={namespaced:{configurable:!0}};prototypeAccessors$1.namespaced.get=function(){return!!this._rawModule.namespaced};Module.prototype.addChild=function(e,n){this._children[e]=n};Module.prototype.removeChild=function(e){delete this._children[e]};Module.prototype.getChild=function(e){return this._children[e]};Module.prototype.hasChild=function(e){return e in this._children};Module.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Module.prototype.forEachChild=function(e){forEachValue(this._children,e)};Module.prototype.forEachGetter=function(e){this._rawModule.getters&&forEachValue(this._rawModule.getters,e)};Module.prototype.forEachAction=function(e){this._rawModule.actions&&forEachValue(this._rawModule.actions,e)};Module.prototype.forEachMutation=function(e){this._rawModule.mutations&&forEachValue(this._rawModule.mutations,e)};Object.defineProperties(Module.prototype,prototypeAccessors$1);var ModuleCollection=function(e){this.register([],e,!1)};ModuleCollection.prototype.get=function(e){return e.reduce(function(n,i){return n.getChild(i)},this.root)};ModuleCollection.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(i,r){return n=n.getChild(r),i+(n.namespaced?r+"/":"")},"")};ModuleCollection.prototype.update=function(e){update([],this.root,e)};ModuleCollection.prototype.register=function(e,n,i){var r=this;i===void 0&&(i=!0);var s=new Module(n,i);if(e.length===0)this.root=s;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],s)}n.modules&&forEachValue(n.modules,function(a,l){r.register(e.concat(l),a,i)})};ModuleCollection.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1],r=n.getChild(i);!r||!r.runtime||n.removeChild(i)};ModuleCollection.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),i=e[e.length-1];return n?n.hasChild(i):!1};function update(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return;update(t.concat(i),e.getChild(i),n.modules[i])}}function createStore(t){return new Store(t)}var Store=function(e){var n=this;e===void 0&&(e={});var i=e.plugins;i===void 0&&(i=[]);var r=e.strict;r===void 0&&(r=!1);var s=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ModuleCollection(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(g,v){return l.call(o,g,v)},this.commit=function(g,v,C){return c.call(o,g,v,C)},this.strict=r;var u=this._modules.root.state;installModule(this,u,[],this._modules.root),resetStoreState(this,u),i.forEach(function(f){return f(n)})},prototypeAccessors={state:{configurable:!0}};Store.prototype.install=function(e,n){e.provide(n||storeKey,this),e.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!1;i&&addDevtools(e,this)};prototypeAccessors.state.get=function(){return this._state.data};prototypeAccessors.state.set=function(t){};Store.prototype.commit=function(e,n,i){var r=this,s=unifyObjectStyle(e,n,i),o=s.type,a=s.payload,l={type:o,payload:a},c=this._mutations[o];!c||(this._withCommit(function(){c.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(u){return u(l,r.state)}))};Store.prototype.dispatch=function(e,n){var i=this,r=unifyObjectStyle(e,n),s=r.type,o=r.payload,a={type:s,payload:o},l=this._actions[s];if(!!l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,i.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,f){c.then(function(g){try{i._actionSubscribers.filter(function(v){return v.after}).forEach(function(v){return v.after(a,i.state)})}catch{}u(g)},function(g){try{i._actionSubscribers.filter(function(v){return v.error}).forEach(function(v){return v.error(a,i.state,g)})}catch{}f(g)})})}};Store.prototype.subscribe=function(e,n){return genericSubscribe(e,this._subscribers,n)};Store.prototype.subscribeAction=function(e,n){var i=typeof e=="function"?{before:e}:e;return genericSubscribe(i,this._actionSubscribers,n)};Store.prototype.watch=function(e,n,i){var r=this;return watch(function(){return e(r.state,r.getters)},n,Object.assign({},i))};Store.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};Store.prototype.registerModule=function(e,n,i){i===void 0&&(i={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),installModule(this,this.state,e,this._modules.get(e),i.preserveState),resetStoreState(this,this.state)};Store.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var i=getNestedState(n.state,e.slice(0,-1));delete i[e[e.length-1]]}),resetStore(this)};Store.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};Store.prototype.hotUpdate=function(e){this._modules.update(e),resetStore(this,!0)};Store.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(Store.prototype,prototypeAccessors);const Header_vue_vue_type_style_index_0_lang="",_export_sfc=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n},_sfc_main$9={setup(){const t=useStore();onBeforeMount(()=>{t.dispatch("fetchUser")})}},_hoisted_1$8={key:0,id:"nav",class:"nav"},_hoisted_2$7={class:"container"},_hoisted_3$7={class:"flex"},_hoisted_4$6={class:"list"},_hoisted_5$5={class:"list-link"},_hoisted_6$3={class:"list-link"},_hoisted_7$3={class:"list-link"},_hoisted_8$2={class:"list-link"};function _sfc_render$9(t,e,n,i,r,s){const o=resolveComponent("router-link"),a=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[t.$store.state.user?(openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$7,[createBaseVNode("ul",_hoisted_4$6,[createBaseVNode("li",_hoisted_5$5,[createVNode(o,{to:"/"},{default:withCtx(()=>[createTextVNode("Home")]),_:1})]),createBaseVNode("li",_hoisted_6$3,[createVNode(o,{to:"/calculator"},{default:withCtx(()=>[createTextVNode("Calculator")]),_:1})]),createBaseVNode("li",_hoisted_7$3,[createVNode(o,{to:"/todo"},{default:withCtx(()=>[createTextVNode("Todo-List")]),_:1})]),createBaseVNode("li",_hoisted_8$2,[createVNode(o,{to:"/weather-forecast"},{default:withCtx(()=>[createTextVNode("Weather Forecast")]),_:1})])]),createBaseVNode("button",{class:"btn-logout",onClick:e[0]||(e[0]=l=>t.$store.dispatch("logout"))},"Logout")])])])):createCommentVNode("",!0),createVNode(a)],64)}const HeaderVue=_export_sfc(_sfc_main$9,[["render",_sfc_render$9]]),Card_vue_vue_type_style_index_0_scoped_c75ea111_lang="",_sfc_main$8={data(){return{navCards:[{title:"Calculator",text:"This is simple calculator which help you to do a mathematic`s calculations.Try to use app-calculator!",navigation:"/calculator"},{title:"Todo-List",text:"It is a good app if you need to write some important affairs which you don`t want to forget.Try to use app-todo-list!",navigation:"/todo"},{title:"Weather Forecast",text:"If you are going to travel somewhere, you should use this weather foreacts.Try to use app-weather-forecast!",navigation:"/weather-forecast"}]}}},_hoisted_1$7={class:"flex-items"},_hoisted_2$6={class:"item-title"},_hoisted_3$6={class:"item-text"},_hoisted_4$5={class:"btn-card"};function _sfc_render$8(t,e,n,i,r,s){const o=resolveComponent("router-link");return openBlock(),createElementBlock("div",_hoisted_1$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.navCards,a=>(openBlock(),createElementBlock("div",{class:"item",key:a},[createBaseVNode("h3",_hoisted_2$6,toDisplayString(a.title),1),createBaseVNode("p",_hoisted_3$6,toDisplayString(a.text),1),createBaseVNode("button",_hoisted_4$5,[createVNode(o,{to:a.navigation},{default:withCtx(()=>[createTextVNode(" Try")]),_:2},1032,["to"])])]))),128))])}const CardVue=_export_sfc(_sfc_main$8,[["render",_sfc_render$8],["__scopeId","data-v-c75ea111"]]),Home_vue_vue_type_style_index_0_scoped_920f0e50_lang="",_sfc_main$7={components:{HeaderVue,CardVue}},_hoisted_1$6={class:"wrapper"},_hoisted_2$5={class:"container"},_hoisted_3$5={class:"flex-center"};function _sfc_render$7(t,e,n,i,r,s){const o=resolveComponent("HeaderVue"),a=resolveComponent("CardVue"),l=resolveComponent("router-view");return openBlock(),createElementBlock(Fragment,null,[createVNode(o),createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("div",_hoisted_3$5,[createVNode(a)])])]),createVNode(l)],64)}const Home=_export_sfc(_sfc_main$7,[["render",_sfc_render$7],["__scopeId","data-v-920f0e50"]]),Login_vue_vue_type_style_index_0_scoped_0592af3f_lang="",_sfc_main$6={setup(){const t=ref({}),e=useStore();return{login_form:t,login:()=>{e.dispatch("login",t.value)}}}},_withScopeId$3=t=>(pushScopeId("data-v-0592af3f"),t=t(),popScopeId(),t),_hoisted_1$5={class:"login"},_hoisted_2$4={class:"forms"},_hoisted_3$4=_withScopeId$3(()=>createBaseVNode("h2",null,"Login",-1)),_hoisted_4$4=_withScopeId$3(()=>createBaseVNode("input",{type:"submit",value:"Login"},null,-1)),_hoisted_5$4={class:"register-note"};function _sfc_render$6(t,e,n,i,r,s){const o=resolveComponent("router-link");return openBlock(),createElementBlock("main",_hoisted_1$5,[createBaseVNode("section",_hoisted_2$4,[createBaseVNode("form",{class:"login",onSubmit:e[2]||(e[2]=withModifiers((...a)=>i.login&&i.login(...a),["prevent"]))},[_hoisted_3$4,withDirectives(createBaseVNode("input",{type:"email",placeholder:"Email address","onUpdate:modelValue":e[0]||(e[0]=a=>i.login_form.email=a)},null,512),[[vModelText,i.login_form.email]]),withDirectives(createBaseVNode("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=a=>i.login_form.password=a)},null,512),[[vModelText,i.login_form.password]]),_hoisted_4$4,createBaseVNode("p",_hoisted_5$4,[createTextVNode("Don't have an account?"),createBaseVNode("span",null,[createVNode(o,{class:"access-link",to:"/register"},{default:withCtx(()=>[createTextVNode("Register")]),_:1})])])],32)])])}const Login=_export_sfc(_sfc_main$6,[["render",_sfc_render$6],["__scopeId","data-v-0592af3f"]]),Register_vue_vue_type_style_index_0_scoped_5526a5e8_lang="",_sfc_main$5={setup(){const t=ref({}),e=useStore();return{register_form:t,register:()=>{e.dispatch("register",t.value)}}}},_withScopeId$2=t=>(pushScopeId("data-v-5526a5e8"),t=t(),popScopeId(),t),_hoisted_1$4={class:"login"},_hoisted_2$3={class:"forms"},_hoisted_3$3=_withScopeId$2(()=>createBaseVNode("h2",null,"Register",-1)),_hoisted_4$3=_withScopeId$2(()=>createBaseVNode("input",{type:"submit",value:"Register"},null,-1)),_hoisted_5$3={class:"login-note"};function _sfc_render$5(t,e,n,i,r,s){const o=resolveComponent("router-link");return openBlock(),createElementBlock("main",_hoisted_1$4,[createBaseVNode("section",_hoisted_2$3,[createBaseVNode("form",{class:"register",onSubmit:e[2]||(e[2]=withModifiers((...a)=>i.register&&i.register(...a),["prevent"]))},[_hoisted_3$3,withDirectives(createBaseVNode("input",{type:"email",placeholder:"Email address","onUpdate:modelValue":e[0]||(e[0]=a=>i.register_form.email=a)},null,512),[[vModelText,i.register_form.email]]),withDirectives(createBaseVNode("input",{type:"password",placeholder:"Password","onUpdate:modelValue":e[1]||(e[1]=a=>i.register_form.password=a)},null,512),[[vModelText,i.register_form.password]]),_hoisted_4$3,createBaseVNode("p",_hoisted_5$3,[createTextVNode("Already have an account?"),createBaseVNode("span",null,[createVNode(o,{class:"access-linklog",to:"/Login"},{default:withCtx(()=>[createTextVNode("Login")]),_:1})])])],32)])])}const Register=_export_sfc(_sfc_main$5,[["render",_sfc_render$5],["__scopeId","data-v-5526a5e8"]]),Calculator_vue_vue_type_style_index_0_scoped_ef800428_lang="",_sfc_main$4={components:{HeaderVue},data(){return{result:"",numbers:[1,2,3,4,5,6,7,8,9,0],operations:["+","-","*","/","."]}},methods:{show(t){this.result=this.result.toString(),this.result+=t},reset(){this.result=""},calc(){this.result=eval(this.result)},calcPercent(){this.result=`${parseFloat(this.result)/100}`}}},_withScopeId$1=t=>(pushScopeId("data-v-ef800428"),t=t(),popScopeId(),t),_hoisted_1$3={class:"wrapper"},_hoisted_2$2={class:"container"},_hoisted_3$2=_withScopeId$1(()=>createBaseVNode("h1",null,"Calculator",-1)),_hoisted_4$2={class:"app"},_hoisted_5$2={class:"calculator"},_hoisted_6$2=["onClick"],_hoisted_7$2=["onClick"];function _sfc_render$4(t,e,n,i,r,s){const o=resolveComponent("HeaderVue");return openBlock(),createElementBlock(Fragment,null,[createVNode(o),createBaseVNode("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[_hoisted_3$2,createBaseVNode("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$2,[withDirectives(createBaseVNode("input",{class:"display",type:"text","onUpdate:modelValue":e[0]||(e[0]=a=>r.result=a),placeholder:"0"},null,512),[[vModelText,r.result]]),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.numbers,a=>(openBlock(),createElementBlock("button",{class:"cell num",onClick:l=>s.show(a),key:a},toDisplayString(a),9,_hoisted_6$2))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(r.operations,a=>(openBlock(),createElementBlock("button",{class:"cell op",onClick:l=>s.show(a),key:a},toDisplayString(a),9,_hoisted_7$2))),128)),createBaseVNode("button",{class:"cell op",onClick:e[1]||(e[1]=a=>s.calcPercent())},"%"),createBaseVNode("button",{class:"cell op",onClick:e[2]||(e[2]=a=>s.reset())},"R"),createBaseVNode("button",{class:"cell op",onClick:e[3]||(e[3]=a=>s.calc())},"=")])])])])],64)}const Calculator=_export_sfc(_sfc_main$4,[["render",_sfc_render$4],["__scopeId","data-v-ef800428"]]),Todo_vue_vue_type_style_index_0_scoped_122e41b8_lang="",_sfc_main$3={components:{HeaderVue},data(){return{selectedIndex:null,isEditing:!1,todo:"",todos:[]}},async mounted(){const t=localStorage.getItem("todos");t&&(this.todos=JSON.parse(t))},computed:{actionButtonName(){return this.isEditing?"Edit":"Add Note"}},methods:{noteHandler(){this.isEditing?this.updateTodo():this.addToDo()},addToDo(){this.todo.length>0&&(this.todos.push(this.todo),this.todo=""),localStorage.setItem("todos",JSON.stringify(this.todos))},deleteTodo(t){this.todos.splice(t,1),localStorage.setItem("todos",JSON.stringify(this.todos))},editTodo(t,e){console.log(t),this.todo=t,this.selectedIndex=e,this.isEditing=!0},updateTodo(){this.todos.splice(this.selectedIndex,1,this.todo),this.isEditing=!1,this.todo=""}}},_withScopeId=t=>(pushScopeId("data-v-122e41b8"),t=t(),popScopeId(),t),_hoisted_1$2={class:"wrapper"},_hoisted_2$1={class:"container"},_hoisted_3$1=_withScopeId(()=>createBaseVNode("h1",null," Todo-List",-1)),_hoisted_4$1={class:"body"},_hoisted_5$1={class:"input-wrapper"},_hoisted_6$1=["textContent"],_hoisted_7$1=_withScopeId(()=>createBaseVNode("br",null,null,-1)),_hoisted_8$1=_withScopeId(()=>createBaseVNode("hr",null,null,-1)),_hoisted_9$1={class:"list"},_hoisted_10$1=["onClick"],_hoisted_11$1=["onClick"];function _sfc_render$3(t,e,n,i,r,s){const o=resolveComponent("HeaderVue");return openBlock(),createElementBlock(Fragment,null,[createVNode(o),createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[_hoisted_3$1,createBaseVNode("div",_hoisted_4$1,[createBaseVNode("div",_hoisted_5$1,[withDirectives(createBaseVNode("input",{class:"main-input",type:"text",placeholder:"Add your note","onUpdate:modelValue":e[0]||(e[0]=a=>r.todo=a)},null,512),[[vModelText,r.todo]])]),createBaseVNode("button",{class:"main-btn",type:"submit",value:"add",onClick:e[1]||(e[1]=(...a)=>s.noteHandler&&s.noteHandler(...a)),textContent:toDisplayString(s.actionButtonName)},null,8,_hoisted_6$1)]),_hoisted_7$1,_hoisted_8$1,createBaseVNode("ul",_hoisted_9$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.todos,(a,l)=>(openBlock(),createElementBlock("li",{class:"list-item",key:a},[createTextVNode(toDisplayString(l+1)+") "+toDisplayString(a)+" ",1),createBaseVNode("div",null,[createBaseVNode("button",{class:"edit-btn",onClick:c=>s.editTodo(a,l)},"Edit",8,_hoisted_10$1),createBaseVNode("button",{class:"delete-btn",onClick:c=>s.deleteTodo(l)},"Delete",8,_hoisted_11$1)])]))),128))])])])],64)}const Todo=_export_sfc(_sfc_main$3,[["render",_sfc_render$3],["__scopeId","data-v-122e41b8"]]),_imports_0="https://tarasishe.github.io/VueDeploy/assets/spinner-svgrepo-com.1461a1cc.svg",Spinner_vue_vue_type_style_index_0_scoped_5cd7fbdf_lang="",_sfc_main$2={name:"Spinner"},_hoisted_1$1={class:"spinner",src:_imports_0,alt:""};function _sfc_render$2(t,e,n,i,r,s){return openBlock(),createElementBlock("img",_hoisted_1$1)}const Spinner=_export_sfc(_sfc_main$2,[["render",_sfc_render$2],["__scopeId","data-v-5cd7fbdf"]]),WeatherForecast_vue_vue_type_style_index_0_scoped_276c73c2_lang="",_sfc_main$1={components:{Spinner,HeaderVue},data(){return{apiKey:"776cbefeb4e33b7b80b3a1af5b49be36",urlBase:"https://api.openweathermap.org/data/2.5/",query:"",weather:{},loading:!1,queryTimeout:null,cityApiKey:"pk.eyJ1IjoidGFyYXNpc2hlIiwiYSI6ImNsYXh4ZDJjbzA2M2Yzem81c3Z6ZTFsMDgifQ.TYjCtwTUeohyUJo_ustV5w",cities:{},searchCityPanel:!1}},methods:{async fetchWeather(t,e){this.loading=!0;try{const i=await(await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${t}&appid=${this.apiKey}&units=metric`)).json();this.weather=i}catch(n){alert(`Error:${n}`)}this.loading=!1},getSearchResults(){this.searchCityPanel=!0,clearTimeout(this.queryTimeout),this.queryTimeout=setTimeout(async()=>{if(this.query!==""){const e=await(await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${this.query}.json?access_token=${this.cityApiKey}&types=place`)).json();this.cities=e.features,console.log(this.cities)}},300)},dateBuilder(){let t=new Date;const e=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()],r=t.getDate(),s=e[t.getMonth()],o=t.getFullYear();return`${i} , ${r} ${s} ${o}`},appendCity(t,[e,n]){this.searchCityPanel=!0,this.query=t,this.fetchWeather(e,n),this.searchCityPanel=!1}}},_hoisted_1={class:"search-box"},_hoisted_2={key:0,class:"search-filter"},_hoisted_3=["onClick"],_hoisted_4={key:0},_hoisted_5={key:1,class:"weather-wrap"},_hoisted_6={class:"location-box"},_hoisted_7={class:"location"},_hoisted_8={class:"date"},_hoisted_9={class:"weather-box"},_hoisted_10={class:"temp"},_hoisted_11={class:"weather"};function _sfc_render$1(t,e,n,i,r,s){const o=resolveComponent("HeaderVue"),a=resolveComponent("Spinner");return openBlock(),createElementBlock(Fragment,null,[createVNode(o),createBaseVNode("div",{id:"apps",class:normalizeClass(r.weather.main&&r.weather.main.temp>16?"warm":r.weather.main&&r.weather.main.temp<16?"cold":"")},[createBaseVNode("main",null,[createBaseVNode("div",_hoisted_1,[withDirectives(createBaseVNode("input",{type:"text",class:"search-bar",placeholder:"Search...","onUpdate:modelValue":e[0]||(e[0]=l=>r.query=l),onInput:e[1]||(e[1]=(...l)=>s.getSearchResults&&s.getSearchResults(...l))},null,544),[[vModelText,r.query]]),this.searchCityPanel?(openBlock(),createElementBlock("ul",_hoisted_2,[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.cities,l=>(openBlock(),createElementBlock("li",{class:"search-item",key:l.id,onClick:c=>s.appendCity(l.place_name,l.geometry.coordinates)},toDisplayString(l.place_name),9,_hoisted_3))),128))])):createCommentVNode("",!0)]),r.loading?(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(a)])):createCommentVNode("",!0),r.weather.main?(openBlock(),createElementBlock("div",_hoisted_5,[createBaseVNode("div",_hoisted_6,[createBaseVNode("div",_hoisted_7,toDisplayString(r.query),1),createBaseVNode("div",_hoisted_8,toDisplayString(s.dateBuilder()),1)]),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",_hoisted_10,toDisplayString(Math.round(r.weather.main.temp))+"\xB0C",1),createBaseVNode("div",_hoisted_11,toDisplayString(r.weather.weather[0].main),1)])])):createCommentVNode("",!0)])],2)],64)}const WeatherForecast=_export_sfc(_sfc_main$1,[["render",_sfc_render$1],["__scopeId","data-v-276c73c2"]]),router=createRouter({history:createWebHashHistory("https://tarasishe.github.io/VueDeploy/"),routes:[{path:"/",name:"Home",component:Home,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:Login},{path:"/register",name:"Register",component:Register},{path:"/calculator",name:"Calculator",component:Calculator,meta:{requiresAuth:!0}},{path:"/todo",name:"Todo",component:Todo,meta:{requiresAuth:!0}},{path:"/weather-forecast",name:"Weather-Forecast",component:WeatherForecast,meta:{requiresAuth:!0}}]});router.beforeEach((t,e,n)=>{if(console.log(t),t.path==="/login"&&auth.currentUser){n("/");return}if(t.matched.some(i=>i.meta.requiresAuth)&&!auth.currentUser){n("/login");return}n()});const store=createStore({state:{user:null},mutations:{SET_USER(t,e){t.user=e},CLEAR_USER(t){t.user=null}},actions:{async login({commit:t},e){const{email:n,password:i}=e;try{await signInWithEmailAndPassword(auth,n,i),M.toast({html:"Welcome back"})}catch(r){switch(r.code){case"auth/user-not-found":M.toast({html:"User not found"});break;case"auth/wrong-password":M.toast({html:"Wrong password"});break;default:alert("Something went wrong")}return}t("SET_USER",auth.currentUser),router.push("/")},async register({commit:t},e){const{email:n,password:i}=e;try{await createUserWithEmailAndPassword(auth,n,i),M.toast({html:"Hi.It is your profile, have a nice time"})}catch(r){switch(r.code){case"auth/email-already-in-use":M.toast({html:"Email already in use"});break;case"auth/invalid-email":M.toast({html:"Invalid email"});break;case"auth/operation-not-allowed":M.toast({html:"Operation not allowed"});break;case"auth/weak-password":M.toast({html:"Weak password"});break;default:alert("Something went wrong")}return}t("SET_USER",auth.currentUser),router.push("/")},async logout({commit:t}){await signOut(auth),t("CLEAR_USER"),router.push("/login?=message=logout"),M.toast({html:"Logout"})},fetchUser({commit:t}){auth.onAuthStateChanged(async e=>{e===null?t("CLEAR_USER"):(t("SET_USER",e),router.isReady()&&router.currentRoute.value.path==="/login"&&router.push("/"))})}}}),_sfc_main={mounted(){console.log("init")}};function _sfc_render(t,e,n,i,r,s){const o=resolveComponent("router-view");return openBlock(),createBlock(o)}const App=_export_sfc(_sfc_main,[["render",_sfc_render]]);/*!
 * Materialize v1.0.0-rc.2 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */var _get=function t(e,n,i){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:t(s,n,i)}if("value"in r)return r.value;var o=r.get;return o!==void 0?o.call(i):void 0},_createClass=function(){function t(e,n){for(var i=0;i<n.length;i++){var r=n[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||typeof e!="object"&&typeof e!="function"?t:e}function _inherits(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.cash=function(){var t,e=document,n=window,i=Array.prototype,r=i.slice,s=i.filter,o=i.push,a=function(){},l=function(_){return typeof _==typeof a&&_.call},c=function(_){return typeof _=="string"},u=/^#[\w-]*$/,f=/^\.[\w-]*$/,g=/<.+>/,v=/^\w+$/;function C(_,d){d=d||e;var m=f.test(_)?d.getElementsByClassName(_.slice(1)):v.test(_)?d.getElementsByTagName(_):d.querySelectorAll(_);return m}function w(_){if(!t){var d=(t=e.implementation.createHTMLDocument(null)).createElement("base");d.href=e.location.href,t.head.appendChild(d)}return t.body.innerHTML=_,t.body.childNodes}function O(_){e.readyState!=="loading"?_():e.addEventListener("DOMContentLoaded",_)}function U(_,d){if(!_)return this;if(_.cash&&_!==n)return _;var m,y=_,T=0;if(c(_))y=u.test(_)?e.getElementById(_.slice(1)):g.test(_)?w(_):C(_,d);else if(l(_))return O(_),this;if(!y)return this;if(y.nodeType||y===n)this[0]=y,this.length=1;else for(m=this.length=y.length;T<m;T++)this[T]=y[T];return this}function P(_,d){return new U(_,d)}var x=P.fn=P.prototype=U.prototype={cash:!0,length:0,push:o,splice:i.splice,map:i.map,init:U};function K(_,d){for(var m=_.length,y=0;y<m&&d.call(_[y],_[y],y,_)!==!1;y++);}function J(_,d){var m=_&&(_.matches||_.webkitMatchesSelector||_.mozMatchesSelector||_.msMatchesSelector||_.oMatchesSelector);return!!m&&m.call(_,d)}function Q(_){return c(_)?J:_.cash?function(d){return _.is(d)}:function(d,m){return d===m}}function ae(_){return P(r.call(_).filter(function(d,m,y){return y.indexOf(d)===m}))}Object.defineProperty(x,"constructor",{value:P}),P.parseHTML=w,P.noop=a,P.isFunction=l,P.isString=c,P.extend=x.extend=function(_){_=_||{};var d=r.call(arguments),m=d.length,y=1;for(d.length===1&&(_=this,y=0);y<m;y++)if(d[y])for(var T in d[y])d[y].hasOwnProperty(T)&&(_[T]=d[y][T]);return _},P.extend({merge:function(_,d){for(var m=+d.length,y=_.length,T=0;T<m;y++,T++)_[y]=d[T];return _.length=y,_},each:K,matches:J,unique:ae,isArray:Array.isArray,isNumeric:function(_){return!isNaN(parseFloat(_))&&isFinite(_)}});var q=P.uid="_cash"+Date.now();function ie(_){return _[q]=_[q]||{}}function re(_,d,m){return ie(_)[d]=m}function ue(_,d){var m=ie(_);return m[d]===void 0&&(m[d]=_.dataset?_.dataset[d]:P(_).attr("data-"+d)),m[d]}x.extend({data:function(_,d){if(c(_))return d===void 0?ue(this[0],_):this.each(function(y){return re(y,_,d)});for(var m in _)this.data(m,_[m]);return this},removeData:function(_){return this.each(function(d){return y=_,void((T=ie(m=d))?delete T[y]:m.dataset?delete m.dataset[y]:P(m).removeAttr("data-"+name));var m,y,T})}});var de=/\S+/g;function Y(_){return c(_)&&_.match(de)}function he(_,d){return _.classList?_.classList.contains(d):new RegExp("(^| )"+d+"( |$)","gi").test(_.className)}function _e(_,d,m){_.classList?_.classList.add(d):m.indexOf(" "+d+" ")&&(_.className+=" "+d)}function le(_,d){_.classList?_.classList.remove(d):_.className=_.className.replace(d,"")}x.extend({addClass:function(_){var d=Y(_);return d?this.each(function(m){var y=" "+m.className+" ";K(d,function(T){_e(m,T,y)})}):this},attr:function(_,d){if(_){if(c(_))return d===void 0?this[0]?this[0].getAttribute?this[0].getAttribute(_):this[0][_]:void 0:this.each(function(y){y.setAttribute?y.setAttribute(_,d):y[_]=d});for(var m in _)this.attr(m,_[m]);return this}},hasClass:function(_){var d=!1,m=Y(_);return m&&m.length&&this.each(function(y){return!(d=he(y,m[0]))}),d},prop:function(_,d){if(c(_))return d===void 0?this[0][_]:this.each(function(y){y[_]=d});for(var m in _)this.prop(m,_[m]);return this},removeAttr:function(_){return this.each(function(d){d.removeAttribute?d.removeAttribute(_):delete d[_]})},removeClass:function(_){if(!arguments.length)return this.attr("class","");var d=Y(_);return d?this.each(function(m){K(d,function(y){le(m,y)})}):this},removeProp:function(_){return this.each(function(d){delete d[_]})},toggleClass:function(_,d){if(d!==void 0)return this[d?"addClass":"removeClass"](_);var m=Y(_);return m?this.each(function(y){var T=" "+y.className+" ";K(m,function(S){he(y,S)?le(y,S):_e(y,S,T)})}):this}}),x.extend({add:function(_,d){return ae(P.merge(this,P(_,d)))},each:function(_){return K(this,_),this},eq:function(_){return P(this.get(_))},filter:function(_){if(!_)return this;var d=l(_)?_:Q(_);return P(s.call(this,function(m){return d(m,_)}))},first:function(){return this.eq(0)},get:function(_){return _===void 0?r.call(this):_<0?this[_+this.length]:this[_]},index:function(_){var d=_?P(_)[0]:this[0],m=_?this:P(d).parent().children();return r.call(m).indexOf(d)},last:function(){return this.eq(-1)}});var te,se,pe,E,I,R,N=(I=/(?:^\w|[A-Z]|\b\w)/g,R=/[\s-_]+/g,function(_){return _.replace(I,function(d,m){return d[m===0?"toLowerCase":"toUpperCase"]()}).replace(R,"")}),V=(te={},se=document,pe=se.createElement("div"),E=pe.style,function(_){if(_=N(_),te[_])return te[_];var d=_.charAt(0).toUpperCase()+_.slice(1),m=(_+" "+["webkit","moz","ms","o"].join(d+" ")+d).split(" ");return K(m,function(y){if(y in E)return te[y]=_=te[_]=y,!1}),te[_]});function b(_,d){return parseInt(n.getComputedStyle(_[0],null)[d],10)||0}function A(_,d,m){var y,T=ue(_,"_cashEvents"),S=T&&T[d];S&&(m?(_.removeEventListener(d,m),0<=(y=S.indexOf(m))&&S.splice(y,1)):(K(S,function(F){_.removeEventListener(d,F)}),S=[]))}function k(_,d){return"&"+encodeURIComponent(_)+"="+encodeURIComponent(d).replace(/%20/g,"+")}function B(_){var d,m,y,T=_.type;if(!T)return null;switch(T.toLowerCase()){case"select-one":return 0<=(y=(m=_).selectedIndex)?m.options[y].value:null;case"select-multiple":return d=[],K(_.options,function(S){S.selected&&d.push(S.value)}),d.length?d:null;case"radio":case"checkbox":return _.checked?_.value:null;default:return _.value?_.value:null}}function j(_,d,m){var y=c(d);y||!d.length?K(_,y?function(T){return T.insertAdjacentHTML(m?"afterbegin":"beforeend",d)}:function(T,S){return function(F,W,D){if(D){var H=F.childNodes[0];F.insertBefore(W,H)}else F.appendChild(W)}(T,S===0?d:d.cloneNode(!0),m)}):K(d,function(T){return j(_,T,m)})}P.prefixedProp=V,P.camelCase=N,x.extend({css:function(_,d){if(c(_))return _=V(_),1<arguments.length?this.each(function(y){return y.style[_]=d}):n.getComputedStyle(this[0])[_];for(var m in _)this.css(m,_[m]);return this}}),K(["Width","Height"],function(_){var d=_.toLowerCase();x[d]=function(){return this[0].getBoundingClientRect()[d]},x["inner"+_]=function(){return this[0]["client"+_]},x["outer"+_]=function(m){return this[0]["offset"+_]+(m?b(this,"margin"+(_==="Width"?"Left":"Top"))+b(this,"margin"+(_==="Width"?"Right":"Bottom")):0)}}),x.extend({off:function(_,d){return this.each(function(m){return A(m,_,d)})},on:function(_,d,m,y){var T;if(!c(_)){for(var S in _)this.on(S,d,_[S]);return this}return l(d)&&(m=d,d=null),_==="ready"?(O(m),this):(d&&(T=m,m=function(F){for(var W=F.target;!J(W,d);){if(W===this||W===null)return W=!1;W=W.parentNode}W&&T.call(W,F)}),this.each(function(F){var W,D,H,L,G=m;y&&(G=function(){m.apply(this,arguments),A(F,_,G)}),D=_,H=G,(L=ue(W=F,"_cashEvents")||re(W,"_cashEvents",{}))[D]=L[D]||[],L[D].push(H),W.addEventListener(D,H)}))},one:function(_,d,m){return this.on(_,d,m,!0)},ready:O,trigger:function(_,d){if(document.createEvent){var m=document.createEvent("HTMLEvents");return m.initEvent(_,!0,!1),m=this.extend(m,d),this.each(function(y){return y.dispatchEvent(m)})}}}),x.extend({serialize:function(){var _="";return K(this[0].elements||this,function(d){if(!d.disabled&&d.tagName!=="FIELDSET"){var m=d.name;switch(d.type.toLowerCase()){case"file":case"reset":case"submit":case"button":break;case"select-multiple":var y=B(d);y!==null&&K(y,function(S){_+=k(m,S)});break;default:var T=B(d);T!==null&&(_+=k(m,T))}}}),_.substr(1)},val:function(_){return _===void 0?B(this[0]):this.each(function(d){return d.value=_})}}),x.extend({after:function(_){return P(_).insertAfter(this),this},append:function(_){return j(this,_),this},appendTo:function(_){return j(P(_),this),this},before:function(_){return P(_).insertBefore(this),this},clone:function(){return P(this.map(function(_){return _.cloneNode(!0)}))},empty:function(){return this.html(""),this},html:function(_){if(_===void 0)return this[0].innerHTML;var d=_.nodeType?_[0].outerHTML:_;return this.each(function(m){return m.innerHTML=d})},insertAfter:function(_){var d=this;return P(_).each(function(m,y){var T=m.parentNode,S=m.nextSibling;d.each(function(F){T.insertBefore(y===0?F:F.cloneNode(!0),S)})}),this},insertBefore:function(_){var d=this;return P(_).each(function(m,y){var T=m.parentNode;d.each(function(S){T.insertBefore(y===0?S:S.cloneNode(!0),m)})}),this},prepend:function(_){return j(this,_,!0),this},prependTo:function(_){return j(P(_),this,!0),this},remove:function(){return this.each(function(_){if(_.parentNode)return _.parentNode.removeChild(_)})},text:function(_){return _===void 0?this[0].textContent:this.each(function(d){return d.textContent=_})}});var Z=e.documentElement;return x.extend({position:function(){var _=this[0];return{left:_.offsetLeft,top:_.offsetTop}},offset:function(){var _=this[0].getBoundingClientRect();return{top:_.top+n.pageYOffset-Z.clientTop,left:_.left+n.pageXOffset-Z.clientLeft}},offsetParent:function(){return P(this[0].offsetParent)}}),x.extend({children:function(_){var d=[];return this.each(function(m){o.apply(d,m.children)}),d=ae(d),_?d.filter(function(m){return J(m,_)}):d},closest:function(_){return!_||this.length<1?P():this.is(_)?this.filter(_):this.parent().closest(_)},is:function(_){if(!_)return!1;var d=!1,m=Q(_);return this.each(function(y){return!(d=m(y,_))}),d},find:function(_){if(!_||_.nodeType)return P(_&&this.has(_).length?_:null);var d=[];return this.each(function(m){o.apply(d,C(_,m))}),ae(d)},has:function(_){var d=c(_)?function(m){return C(_,m).length!==0}:function(m){return m.contains(_)};return this.filter(d)},next:function(){return P(this[0].nextElementSibling)},not:function(_){if(!_)return this;var d=Q(_);return this.filter(function(m){return!d(m,_)})},parent:function(){var _=[];return this.each(function(d){d&&d.parentNode&&_.push(d.parentNode)}),ae(_)},parents:function(_){var d,m=[];return this.each(function(y){for(d=y;d&&d.parentNode&&d!==e.body.parentNode;)d=d.parentNode,(!_||_&&J(d,_))&&m.push(d)}),ae(m)},prev:function(){return P(this[0].previousElementSibling)},siblings:function(_){var d=this.parent().children(_),m=this[0];return d.filter(function(y){return y!==m})}}),P}();var Component=function(){function t(e,n,i){_classCallCheck(this,t),n instanceof Element||console.error(Error(n+" is not an HTML Element"));var r=e.getInstance(n);r&&r.destroy(),this.el=n,this.$el=cash(n)}return _createClass(t,null,[{key:"init",value:function(e,n,i){var r=null;if(n instanceof Element)r=new e(n,i);else if(n&&(n.jquery||n.cash||n instanceof NodeList)){for(var s=[],o=0;o<n.length;o++)s.push(new e(n[o],i));r=s}return r}}]),t}();(function(t){t.Package?M={}:t.M={},M.jQueryLoaded=!!t.jQuery})(window),typeof define=="function"&&define.amd?define("M",[],function(){return M}):typeof exports>"u"||exports.nodeType||(typeof module<"u"&&!module.nodeType&&module.exports&&(exports=module.exports=M),exports.default=M),M.keys={TAB:9,ENTER:13,ESC:27,ARROW_UP:38,ARROW_DOWN:40},M.tabPressed=!1,M.keyDown=!1;var docHandleKeydown=function(t){M.keyDown=!0,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!0)},docHandleKeyup=function(t){M.keyDown=!1,t.which!==M.keys.TAB&&t.which!==M.keys.ARROW_DOWN&&t.which!==M.keys.ARROW_UP||(M.tabPressed=!1)},docHandleFocus=function(t){M.keyDown&&document.body.classList.add("keyboard-focused")},docHandleBlur=function(t){document.body.classList.remove("keyboard-focused")};document.addEventListener("keydown",docHandleKeydown,!0),document.addEventListener("keyup",docHandleKeyup,!0),document.addEventListener("focus",docHandleFocus,!0),document.addEventListener("blur",docHandleBlur,!0),M.initializeJqueryWrapper=function(t,e,n){jQuery.fn[e]=function(i){if(t.prototype[i]){var r=Array.prototype.slice.call(arguments,1);if(i.slice(0,3)==="get"){var s=this.first()[0][n];return s[i].apply(s,r)}return this.each(function(){var o=this[n];o[i].apply(o,r)})}if(typeof i=="object"||!i)return t.init(this,i),this;jQuery.error("Method "+i+" does not exist on jQuery."+e)}},M.AutoInit=function(t){var e=t||document.body,n={Autocomplete:e.querySelectorAll(".autocomplete:not(.no-autoinit)"),Carousel:e.querySelectorAll(".carousel:not(.no-autoinit)"),Chips:e.querySelectorAll(".chips:not(.no-autoinit)"),Collapsible:e.querySelectorAll(".collapsible:not(.no-autoinit)"),Datepicker:e.querySelectorAll(".datepicker:not(.no-autoinit)"),Dropdown:e.querySelectorAll(".dropdown-trigger:not(.no-autoinit)"),Materialbox:e.querySelectorAll(".materialboxed:not(.no-autoinit)"),Modal:e.querySelectorAll(".modal:not(.no-autoinit)"),Parallax:e.querySelectorAll(".parallax:not(.no-autoinit)"),Pushpin:e.querySelectorAll(".pushpin:not(.no-autoinit)"),ScrollSpy:e.querySelectorAll(".scrollspy:not(.no-autoinit)"),FormSelect:e.querySelectorAll("select:not(.no-autoinit)"),Sidenav:e.querySelectorAll(".sidenav:not(.no-autoinit)"),Tabs:e.querySelectorAll(".tabs:not(.no-autoinit)"),TapTarget:e.querySelectorAll(".tap-target:not(.no-autoinit)"),Timepicker:e.querySelectorAll(".timepicker:not(.no-autoinit)"),Tooltip:e.querySelectorAll(".tooltipped:not(.no-autoinit)"),FloatingActionButton:e.querySelectorAll(".fixed-action-btn:not(.no-autoinit)")};for(var i in n)M[i].init(n[i])},M.objectSelectorString=function(t){return((t.prop("tagName")||"")+(t.attr("id")||"")+(t.attr("class")||"")).replace(/\s/g,"")},M.guid=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}(),M.escapeHash=function(t){return t.replace(/(:|\.|\[|\]|,|=|\/)/g,"\\$1")},M.elementOrParentIsFixed=function(t){var e=$(t),n=e.add(e.parents()),i=!1;return n.each(function(){if($(this).css("position")==="fixed")return!(i=!0)}),i},M.checkWithinContainer=function(t,e,n){var i={top:!1,right:!1,bottom:!1,left:!1},r=t.getBoundingClientRect(),s=t===document.body?Math.max(r.bottom,window.innerHeight):r.bottom,o=t.scrollLeft,a=t.scrollTop,l=e.left-o,c=e.top-a;return(l<r.left+n||l<n)&&(i.left=!0),(l+e.width>r.right-n||l+e.width>window.innerWidth-n)&&(i.right=!0),(c<r.top+n||c<n)&&(i.top=!0),(c+e.height>s-n||c+e.height>window.innerHeight-n)&&(i.bottom=!0),i},M.checkPossibleAlignments=function(t,e,n,i){var r={top:!0,right:!0,bottom:!0,left:!0,spaceOnTop:null,spaceOnRight:null,spaceOnBottom:null,spaceOnLeft:null},s=getComputedStyle(e).overflow==="visible",o=e.getBoundingClientRect(),a=Math.min(o.height,window.innerHeight),l=Math.min(o.width,window.innerWidth),c=t.getBoundingClientRect(),u=e.scrollLeft,f=e.scrollTop,g=n.left-u,v=n.top-f,C=n.top+c.height-f;return r.spaceOnRight=s?window.innerWidth-(c.left+n.width):l-(g+n.width),r.spaceOnRight<0&&(r.left=!1),r.spaceOnLeft=s?c.right-n.width:g-n.width+c.width,r.spaceOnLeft<0&&(r.right=!1),r.spaceOnBottom=s?window.innerHeight-(c.top+n.height+i):a-(v+n.height+i),r.spaceOnBottom<0&&(r.top=!1),r.spaceOnTop=s?c.bottom-(n.height+i):C-(n.height-i),r.spaceOnTop<0&&(r.bottom=!1),r},M.getOverflowParent=function(t){return t==null?null:t===document.body||getComputedStyle(t).overflow!=="visible"?t:M.getOverflowParent(t.parentElement)},M.getIdFromTrigger=function(t){var e=t.getAttribute("data-target");return e||(e=(e=t.getAttribute("href"))?e.slice(1):""),e},M.getDocumentScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0},M.getDocumentScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};var getTime=Date.now||function(){return new Date().getTime()};M.throttle=function(t,e,n){var i=void 0,r=void 0,s=void 0,o=null,a=0;n||(n={});var l=function(){a=n.leading===!1?0:getTime(),o=null,s=t.apply(i,r),i=r=null};return function(){var c=getTime();a||n.leading!==!1||(a=c);var u=e-(c-a);return i=this,r=arguments,u<=0?(clearTimeout(o),o=null,a=c,s=t.apply(i,r),i=r=null):o||n.trailing===!1||(o=setTimeout(l,u)),s}};var $jscomp={scope:{}};$jscomp.defineProperty=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,n){if(n.get||n.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return typeof window<"u"&&window===t?t:typeof global<"u"&&global!=null?global:t},$jscomp.global=$jscomp.getGlobal(globalThis),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),typeof Array.prototype[t]!="function"&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var e=0;return $jscomp.iteratorPrototype(function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}})},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.array=$jscomp.array||{},$jscomp.iteratorFromArray=function(t,e){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var n=0,i={next:function(){if(n<t.length){var r=n++;return{value:e(r,t[r]),done:!1}}return i.next=function(){return{done:!0,value:void 0}},i.next()}};return i[Symbol.iterator]=function(){return i},i},$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&e!=null&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(e){return e})}},"es6-impl","es3");var $jscomp$this=globalThis;M.anime=function(){function t(E){if(!Y.col(E))try{return document.querySelectorAll(E)}catch{}}function e(E,I){for(var R=E.length,N=2<=arguments.length?I:void 0,V=[],b=0;b<R;b++)if(b in E){var A=E[b];I.call(N,A,b,E)&&V.push(A)}return V}function n(E){return E.reduce(function(I,R){return I.concat(Y.arr(R)?n(R):R)},[])}function i(E){return Y.arr(E)?E:(Y.str(E)&&(E=t(E)||E),E instanceof NodeList||E instanceof HTMLCollection?[].slice.call(E):[E])}function r(E,I){return E.some(function(R){return R===I})}function s(E){var I,R={};for(I in E)R[I]=E[I];return R}function o(E,I){var R,N=s(E);for(R in E)N[R]=I.hasOwnProperty(R)?I[R]:E[R];return N}function a(E,I){var R,N=s(E);for(R in I)N[R]=Y.und(E[R])?I[R]:E[R];return N}function l(E){if(E=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(E))return E[2]}function c(E,I){return Y.fnc(E)?E(I.target,I.id,I.total):E}function u(E,I){if(I in E.style)return getComputedStyle(E).getPropertyValue(I.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function f(E,I){return Y.dom(E)&&r(de,I)?"transform":Y.dom(E)&&(E.getAttribute(I)||Y.svg(E)&&E[I])?"attribute":Y.dom(E)&&I!=="transform"&&u(E,I)?"css":E[I]!=null?"object":void 0}function g(E,I){switch(f(E,I)){case"transform":return function(R,N){var V,b=-1<(V=N).indexOf("translate")||V==="perspective"?"px":-1<V.indexOf("rotate")||-1<V.indexOf("skew")?"deg":void 0,b=-1<N.indexOf("scale")?1:0+b;if(!(R=R.style.transform))return b;for(var A=[],k=[],B=[],j=/(\w+)\((.+?)\)/g;A=j.exec(R);)k.push(A[1]),B.push(A[2]);return(R=e(B,function(Z,_){return k[_]===N})).length?R[0]:b}(E,I);case"css":return u(E,I);case"attribute":return E.getAttribute(I)}return E[I]||0}function v(E,I){var R=/^(\*=|\+=|-=)/.exec(E);if(!R)return E;var N=l(E)||0;switch(I=parseFloat(I),E=parseFloat(E.replace(R[0],"")),R[0][0]){case"+":return I+E+N;case"-":return I-E+N;case"*":return I*E+N}}function C(E,I){return Math.sqrt(Math.pow(I.x-E.x,2)+Math.pow(I.y-E.y,2))}function w(E){E=E.points;for(var I,R=0,N=0;N<E.numberOfItems;N++){var V=E.getItem(N);0<N&&(R+=C(I,V)),I=V}return R}function O(E){if(E.getTotalLength)return E.getTotalLength();switch(E.tagName.toLowerCase()){case"circle":return 2*Math.PI*E.getAttribute("r");case"rect":return 2*E.getAttribute("width")+2*E.getAttribute("height");case"line":return C({x:E.getAttribute("x1"),y:E.getAttribute("y1")},{x:E.getAttribute("x2"),y:E.getAttribute("y2")});case"polyline":return w(E);case"polygon":var I=E.points;return w(E)+C(I.getItem(I.numberOfItems-1),I.getItem(0))}}function U(E,I){function R(A){return A=A===void 0?0:A,E.el.getPointAtLength(1<=I+A?I+A:0)}var N=R(),V=R(-1),b=R(1);switch(E.property){case"x":return N.x;case"y":return N.y;case"angle":return 180*Math.atan2(b.y-V.y,b.x-V.x)/Math.PI}}function P(E,I){var R,N=/-?\d*\.?\d+/g;if(R=Y.pth(E)?E.totalLength:E,Y.col(R))if(Y.rgb(R)){var V=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(R);R=V?"rgba("+V[1]+",1)":R}else R=Y.hex(R)?function(b){b=b.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(B,j,Z,_){return j+j+Z+Z+_+_});var k=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);b=parseInt(k[1],16);var A=parseInt(k[2],16),k=parseInt(k[3],16);return"rgba("+b+","+A+","+k+",1)"}(R):Y.hsl(R)?function(b){function A(d,m,y){return y<0&&(y+=1),1<y&&--y,y<1/6?d+6*(m-d)*y:y<.5?m:y<2/3?d+(m-d)*(2/3-y)*6:d}var j=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(b)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(b);b=parseInt(j[1])/360;var k=parseInt(j[2])/100,B=parseInt(j[3])/100,j=j[4]||1;if(k==0)B=k=b=B;else{var Z=B<.5?B*(1+k):B+k-B*k,_=2*B-Z,B=A(_,Z,b+1/3),k=A(_,Z,b);b=A(_,Z,b-1/3)}return"rgba("+255*B+","+255*k+","+255*b+","+j+")"}(R):void 0;else V=(V=l(R))?R.substr(0,R.length-V.length):R,R=I&&!/\s/g.test(R)?V+I:V;return{original:R+="",numbers:R.match(N)?R.match(N).map(Number):[0],strings:Y.str(E)||I?R.split(N):[]}}function x(E){return e(E=E?n(Y.arr(E)?E.map(i):i(E)):[],function(I,R,N){return N.indexOf(I)===R})}function K(E,I){var R=s(I);if(Y.arr(E)){var N=E.length;N!==2||Y.obj(E[0])?Y.fnc(I.duration)||(R.duration=I.duration/N):E={value:E}}return i(E).map(function(V,b){return b=b?0:I.delay,V=Y.obj(V)&&!Y.pth(V)?V:{value:V},Y.und(V.delay)&&(V.delay=b),V}).map(function(V){return a(V,R)})}function J(E,I){var R;return E.tweens.map(function(N){var V=(N=function(B,j){var Z,_={};for(Z in B){var d=c(B[Z],j);Y.arr(d)&&(d=d.map(function(m){return c(m,j)})).length===1&&(d=d[0]),_[Z]=d}return _.duration=parseFloat(_.duration),_.delay=parseFloat(_.delay),_}(N,I)).value,k=g(I.target,E.name),b=R?R.to.original:k,b=Y.arr(V)?V[0]:b,A=v(Y.arr(V)?V[1]:V,b),k=l(A)||l(b)||l(k);return N.from=P(b,k),N.to=P(A,k),N.start=R?R.end:E.offset,N.end=N.start+N.delay+N.duration,N.easing=function(B){return Y.arr(B)?he.apply(this,B):_e[B]}(N.easing),N.elasticity=(1e3-Math.min(Math.max(N.elasticity,1),999))/1e3,N.isPath=Y.pth(V),N.isColor=Y.col(N.from.original),N.isColor&&(N.round=1),R=N})}function Q(E,I,R,N){var V=E==="delay";return I.length?(V?Math.min:Math.max).apply(Math,I.map(function(b){return b[E]})):V?N.delay:R.offset+N.delay+N.duration}function ae(E){var I,R,N,V,b=o(re,E),A=o(ue,E),k=(R=E.targets,(N=x(R)).map(function(Z,_){return{target:Z,id:_,total:N.length}})),B=[],j=a(b,A);for(I in E)j.hasOwnProperty(I)||I==="targets"||B.push({name:I,offset:j.offset,tweens:K(E[I],A)});return V=B,E=e(n(k.map(function(Z){return V.map(function(_){var d=f(Z.target,_.name);if(d){var m=J(_,Z);_={type:d,property:_.name,animatable:Z,tweens:m,duration:m[m.length-1].end,delay:m[0].delay}}else _=void 0;return _})})),function(Z){return!Y.und(Z)}),a(b,{children:[],animatables:k,animations:E,duration:Q("duration",E,b,A),delay:Q("delay",E,b,A)})}function q(E){function I(){return window.Promise&&new Promise(function(m){return Z=m})}function R(m){return d.reversed?d.duration-m:m}function N(m){for(var y=0,T={},S=d.animations,F=S.length;y<F;){var W=S[y],D=W.animatable,H=W.tweens,L=H.length-1,G=H[L];L&&(G=e(H,function(fe){return m<fe.end})[0]||G);for(var H=Math.min(Math.max(m-G.start-G.delay,0),G.duration)/G.duration,z=isNaN(H)?1:G.easing(H,G.elasticity),H=G.to.strings,X=G.round,L=[],ee=void 0,ee=G.to.numbers.length,ne=0;ne<ee;ne++){var oe=void 0,oe=G.to.numbers[ne],ce=G.from.numbers[ne],oe=G.isPath?U(G.value,z*oe):ce+z*(oe-ce);X&&(G.isColor&&2<ne||(oe=Math.round(oe*X)/X)),L.push(oe)}if(G=H.length)for(ee=H[0],z=0;z<G;z++)X=H[z+1],ne=L[z],isNaN(ne)||(ee=X?ee+(ne+X):ee+(ne+" "));else ee=L[0];le[W.type](D.target,W.property,ee,T,D.id),W.currentValue=ee,y++}if(y=Object.keys(T).length)for(S=0;S<y;S++)ie||(ie=u(document.body,"transform")?"transform":"-webkit-transform"),d.animatables[S].target.style[ie]=T[S].join(" ");d.currentTime=m,d.progress=m/d.duration*100}function V(m){d[m]&&d[m](d)}function b(){d.remaining&&d.remaining!==!0&&d.remaining--}function A(m){var y=d.duration,T=d.offset,S=T+d.delay,F=d.currentTime,W=d.reversed,D=R(m);if(d.children.length){var H=d.children,L=H.length;if(D>=d.currentTime)for(var G=0;G<L;G++)H[G].seek(D);else for(;L--;)H[L].seek(D)}(S<=D||!y)&&(d.began||(d.began=!0,V("begin")),V("run")),T<D&&D<y?N(D):(D<=T&&F!==0&&(N(0),W&&b()),(y<=D&&F!==y||!y)&&(N(y),W||b())),V("update"),y<=m&&(d.remaining?(B=k,d.direction==="alternate"&&(d.reversed=!d.reversed)):(d.pause(),d.completed||(d.completed=!0,V("complete"),"Promise"in window&&(Z(),_=I()))),j=0)}E=E===void 0?{}:E;var k,B,j=0,Z=null,_=I(),d=ae(E);return d.reset=function(){var m=d.direction,y=d.loop;for(d.currentTime=0,d.progress=0,d.paused=!0,d.began=!1,d.completed=!1,d.reversed=m==="reverse",d.remaining=m==="alternate"&&y===1?2:y,N(0),m=d.children.length;m--;)d.children[m].reset()},d.tick=function(m){k=m,B||(B=k),A((j+k-B)*q.speed)},d.seek=function(m){A(R(m))},d.pause=function(){var m=te.indexOf(d);-1<m&&te.splice(m,1),d.paused=!0},d.play=function(){d.paused&&(d.paused=!1,B=0,j=R(d.currentTime),te.push(d),se||pe())},d.reverse=function(){d.reversed=!d.reversed,B=0,j=R(d.currentTime)},d.restart=function(){d.pause(),d.reset(),d.play()},d.finished=_,d.reset(),d.autoplay&&d.play(),d}var ie,re={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},ue={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},de="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),Y={arr:function(E){return Array.isArray(E)},obj:function(E){return-1<Object.prototype.toString.call(E).indexOf("Object")},pth:function(E){return Y.obj(E)&&E.hasOwnProperty("totalLength")},svg:function(E){return E instanceof SVGElement},dom:function(E){return E.nodeType||Y.svg(E)},str:function(E){return typeof E=="string"},fnc:function(E){return typeof E=="function"},und:function(E){return E===void 0},hex:function(E){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(E)},rgb:function(E){return/^rgb/.test(E)},hsl:function(E){return/^hsl/.test(E)},col:function(E){return Y.hex(E)||Y.rgb(E)||Y.hsl(E)}},he=function(){function E(I,R,N){return(((1-3*N+3*R)*I+(3*N-6*R))*I+3*R)*I}return function(I,R,N,V){if(0<=I&&I<=1&&0<=N&&N<=1){var b=new Float32Array(11);if(I!==R||N!==V)for(var A=0;A<11;++A)b[A]=E(.1*A,I,N);return function(k){if(I===R&&N===V)return k;if(k===0)return 0;if(k===1)return 1;for(var B=0,j=1;j!==10&&b[j]<=k;++j)B+=.1;var j=B+(k-b[--j])/(b[j+1]-b[j])*.1,Z=3*(1-3*N+3*I)*j*j+2*(3*N-6*I)*j+3*I;if(.001<=Z){for(B=0;B<4&&(Z=3*(1-3*N+3*I)*j*j+2*(3*N-6*I)*j+3*I)!=0;++B)var _=E(j,I,N)-k,j=j-_/Z;k=j}else if(Z===0)k=j;else{for(var j=B,B=B+.1,d=0;0<(Z=E(_=j+(B-j)/2,I,N)-k)?B=_:j=_,1e-7<Math.abs(Z)&&++d<10;);k=_}return E(k,R,V)}}}}(),_e=function(){function E(A,k){return A===0||A===1?A:-Math.pow(2,10*(A-1))*Math.sin(2*(A-1-k/(2*Math.PI)*Math.asin(1))*Math.PI/k)}var I,R="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),N={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],E],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(A,k){return 1-E(1-A,k)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(A,k){return A<.5?E(2*A,k)/2:1-E(-2*A+2,k)/2}]},V={linear:he(.25,.25,.75,.75)},b={};for(I in N)b.type=I,N[b.type].forEach(function(A){return function(k,B){V["ease"+A.type+R[B]]=Y.fnc(k)?k:he.apply($jscomp$this,k)}}(b)),b={type:b.type};return V}(),le={css:function(E,I,R){return E.style[I]=R},attribute:function(E,I,R){return E.setAttribute(I,R)},object:function(E,I,R){return E[I]=R},transform:function(E,I,R,N,V){N[V]||(N[V]=[]),N[V].push(I+"("+R+")")}},te=[],se=0,pe=function(){function E(){se=requestAnimationFrame(I)}function I(R){var N=te.length;if(N){for(var V=0;V<N;)te[V]&&te[V].tick(R),V++;E()}else cancelAnimationFrame(se),se=0}return E}();return q.version="2.2.0",q.speed=1,q.running=te,q.remove=function(E){E=x(E);for(var I=te.length;I--;)for(var R=te[I],N=R.animations,V=N.length;V--;)r(E,N[V].animatable.target)&&(N.splice(V,1),N.length||R.pause())},q.getValue=g,q.path=function(E,I){var R=Y.str(E)?t(E)[0]:E,N=I||100;return function(V){return{el:R,property:V,totalLength:O(R)*(N/100)}}},q.setDashoffset=function(E){var I=O(E);return E.setAttribute("stroke-dasharray",I),I},q.bezier=he,q.easings=_e,q.timeline=function(E){var I=q(E);return I.pause(),I.duration=0,I.add=function(R){return I.children.forEach(function(N){N.began=!0,N.completed=!0}),i(R).forEach(function(N){var V=a(N,o(ue,E||{}));V.targets=V.targets||E.targets,N=I.duration;var b=V.offset;V.autoplay=!1,V.direction=I.direction,V.offset=Y.und(b)?N:v(b,N),I.began=!0,I.completed=!0,I.seek(V.offset),(V=q(V)).began=!0,V.completed=!0,V.duration>N&&(I.duration=V.duration),I.children.push(V)}),I.seek(0),I.reset(),I.autoplay&&I.restart(),I},I},q.random=function(E,I){return Math.floor(Math.random()*(I-E+1))+E},q}(),function(t,e){var n={accordion:!0,onOpenStart:void 0,onOpenEnd:void 0,onCloseStart:void 0,onCloseEnd:void 0,inDuration:300,outDuration:300},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));(l.el.M_Collapsible=l).options=t.extend({},s.defaults,a),l.$headers=l.$el.children("li").children(".collapsible-header"),l.$headers.attr("tabindex",0),l._setupEventHandlers();var c=l.$el.children("li.active").children(".collapsible-body");return l.options.accordion?c.first().css("display","block"):c.css("display","block"),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Collapsible=void 0}},{key:"_setupEventHandlers",value:function(){var o=this;this._handleCollapsibleClickBound=this._handleCollapsibleClick.bind(this),this._handleCollapsibleKeydownBound=this._handleCollapsibleKeydown.bind(this),this.el.addEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.addEventListener("keydown",o._handleCollapsibleKeydownBound)})}},{key:"_removeEventHandlers",value:function(){var o=this;this.el.removeEventListener("click",this._handleCollapsibleClickBound),this.$headers.each(function(a){a.removeEventListener("keydown",o._handleCollapsibleKeydownBound)})}},{key:"_handleCollapsibleClick",value:function(o){var a=t(o.target).closest(".collapsible-header");if(o.target&&a.length){var l=a.closest(".collapsible");if(l[0]===this.el){var c=a.closest("li"),u=l.children("li"),f=c[0].classList.contains("active"),g=u.index(c);f?this.close(g):this.open(g)}}}},{key:"_handleCollapsibleKeydown",value:function(o){o.keyCode===13&&this._handleCollapsibleClickBound(o)}},{key:"_animateIn",value:function(o){var a=this,l=this.$el.children("li").eq(o);if(l.length){var c=l.children(".collapsible-body");e.remove(c[0]),c.css({display:"block",overflow:"hidden",height:0,paddingTop:"",paddingBottom:""});var u=c.css("padding-top"),f=c.css("padding-bottom"),g=c[0].scrollHeight;c.css({paddingTop:0,paddingBottom:0}),e({targets:c[0],height:g,paddingTop:u,paddingBottom:f,duration:this.options.inDuration,easing:"easeInOutCubic",complete:function(v){c.css({overflow:"",paddingTop:"",paddingBottom:"",height:""}),typeof a.options.onOpenEnd=="function"&&a.options.onOpenEnd.call(a,l[0])}})}}},{key:"_animateOut",value:function(o){var a=this,l=this.$el.children("li").eq(o);if(l.length){var c=l.children(".collapsible-body");e.remove(c[0]),c.css("overflow","hidden"),e({targets:c[0],height:0,paddingTop:0,paddingBottom:0,duration:this.options.outDuration,easing:"easeInOutCubic",complete:function(){c.css({height:"",overflow:"",padding:"",display:""}),typeof a.options.onCloseEnd=="function"&&a.options.onCloseEnd.call(a,l[0])}})}}},{key:"open",value:function(o){var a=this,l=this.$el.children("li").eq(o);if(l.length&&!l[0].classList.contains("active")){if(typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,l[0]),this.options.accordion){var c=this.$el.children("li");this.$el.children("li.active").each(function(u){var f=c.index(t(u));a.close(f)})}l[0].classList.add("active"),this._animateIn(o)}}},{key:"close",value:function(o){var a=this.$el.children("li").eq(o);a.length&&a[0].classList.contains("active")&&(typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,a[0]),a[0].classList.remove("active"),this._animateOut(o))}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Collapsible}},{key:"defaults",get:function(){return n}}]),s}();M.Collapsible=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"collapsible","M_Collapsible")}(cash,M.anime),function(t,e){var n={alignment:"left",autoFocus:!0,constrainWidth:!0,container:null,coverTrigger:!0,closeOnClick:!0,hover:!1,inDuration:150,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onItemClick:null},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return l.el.M_Dropdown=l,s._dropdowns.push(l),l.id=M.getIdFromTrigger(o),l.dropdownEl=document.getElementById(l.id),l.$dropdownEl=t(l.dropdownEl),l.options=t.extend({},s.defaults,a),l.isOpen=!1,l.isScrollable=!1,l.isTouchMoving=!1,l.focusedIndex=-1,l.filterQuery=[],l.options.container?t(l.options.container).append(l.dropdownEl):l.$el.after(l.dropdownEl),l._makeDropdownFocusable(),l._resetFilterQueryBound=l._resetFilterQuery.bind(l),l._handleDocumentClickBound=l._handleDocumentClick.bind(l),l._handleDocumentTouchmoveBound=l._handleDocumentTouchmove.bind(l),l._handleDropdownClickBound=l._handleDropdownClick.bind(l),l._handleDropdownKeydownBound=l._handleDropdownKeydown.bind(l),l._handleTriggerKeydownBound=l._handleTriggerKeydown.bind(l),l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._resetDropdownStyles(),this._removeEventHandlers(),s._dropdowns.splice(s._dropdowns.indexOf(this),1),this.el.M_Dropdown=void 0}},{key:"_setupEventHandlers",value:function(){this.el.addEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.addEventListener("click",this._handleDropdownClickBound),this.options.hover?(this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.addEventListener("mouseleave",this._handleMouseLeaveBound)):(this._handleClickBound=this._handleClick.bind(this),this.el.addEventListener("click",this._handleClickBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("keydown",this._handleTriggerKeydownBound),this.dropdownEl.removeEventListener("click",this._handleDropdownClickBound),this.options.hover?(this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.dropdownEl.removeEventListener("mouseleave",this._handleMouseLeaveBound)):this.el.removeEventListener("click",this._handleClickBound)}},{key:"_setupTemporaryEventHandlers",value:function(){document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound),document.body.addEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.addEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_removeTemporaryEventHandlers",value:function(){document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound),document.body.removeEventListener("touchmove",this._handleDocumentTouchmoveBound),this.dropdownEl.removeEventListener("keydown",this._handleDropdownKeydownBound)}},{key:"_handleClick",value:function(o){o.preventDefault(),this.open()}},{key:"_handleMouseEnter",value:function(){this.open()}},{key:"_handleMouseLeave",value:function(o){var a=o.toElement||o.relatedTarget,l=!!t(a).closest(".dropdown-content").length,c=!1,u=t(a).closest(".dropdown-trigger");u.length&&u[0].M_Dropdown&&u[0].M_Dropdown.isOpen&&(c=!0),c||l||this.close()}},{key:"_handleDocumentClick",value:function(o){var a=this,l=t(o.target);this.options.closeOnClick&&l.closest(".dropdown-content").length&&!this.isTouchMoving?setTimeout(function(){a.close()},0):!l.closest(".dropdown-trigger").length&&l.closest(".dropdown-content").length||setTimeout(function(){a.close()},0),this.isTouchMoving=!1}},{key:"_handleTriggerKeydown",value:function(o){o.which!==M.keys.ARROW_DOWN&&o.which!==M.keys.ENTER||this.isOpen||(o.preventDefault(),this.open())}},{key:"_handleDocumentTouchmove",value:function(o){t(o.target).closest(".dropdown-content").length&&(this.isTouchMoving=!0)}},{key:"_handleDropdownClick",value:function(o){if(typeof this.options.onItemClick=="function"){var a=t(o.target).closest("li")[0];this.options.onItemClick.call(this,a)}}},{key:"_handleDropdownKeydown",value:function(o){if(o.which===M.keys.TAB)o.preventDefault(),this.close();else if(o.which!==M.keys.ARROW_DOWN&&o.which!==M.keys.ARROW_UP||!this.isOpen)if(o.which===M.keys.ENTER&&this.isOpen){var a=this.dropdownEl.children[this.focusedIndex],l=t(a).find("a, button").first();l.length?l[0].click():a.click()}else o.which===M.keys.ESC&&this.isOpen&&(o.preventDefault(),this.close());else{o.preventDefault();var c=o.which===M.keys.ARROW_DOWN?1:-1,u=this.focusedIndex,f=!1;do if(u+=c,this.dropdownEl.children[u]&&this.dropdownEl.children[u].tabIndex!==-1){f=!0;break}while(u<this.dropdownEl.children.length&&0<=u);f&&(this.focusedIndex=u,this._focusFocusedItem())}var g=String.fromCharCode(o.which).toLowerCase();if(g&&[9,13,27,38,40].indexOf(o.which)===-1){this.filterQuery.push(g);var v=this.filterQuery.join(""),C=t(this.dropdownEl).find("li").filter(function(w){return t(w).text().toLowerCase().indexOf(v)===0})[0];C&&(this.focusedIndex=t(C).index(),this._focusFocusedItem())}this.filterTimeout=setTimeout(this._resetFilterQueryBound,1e3)}},{key:"_resetFilterQuery",value:function(){this.filterQuery=[]}},{key:"_resetDropdownStyles",value:function(){this.$dropdownEl.css({display:"",width:"",height:"",left:"",top:"","transform-origin":"",transform:"",opacity:""})}},{key:"_makeDropdownFocusable",value:function(){this.dropdownEl.tabIndex=0,t(this.dropdownEl).children().each(function(o){o.getAttribute("tabindex")||o.setAttribute("tabindex",0)})}},{key:"_focusFocusedItem",value:function(){0<=this.focusedIndex&&this.focusedIndex<this.dropdownEl.children.length&&this.options.autoFocus&&this.dropdownEl.children[this.focusedIndex].focus()}},{key:"_getDropdownPosition",value:function(){this.el.offsetParent.getBoundingClientRect();var o=this.el.getBoundingClientRect(),a=this.dropdownEl.getBoundingClientRect(),l=a.height,c=a.width,u=o.left-a.left,f=o.top-a.top,g={left:u,top:f,height:l,width:c},v=this.dropdownEl.offsetParent?this.dropdownEl.offsetParent:this.dropdownEl.parentNode,C=M.checkPossibleAlignments(this.el,v,g,this.options.coverTrigger?0:o.height),w="top",O=this.options.alignment;if(f+=this.options.coverTrigger?0:o.height,this.isScrollable=!1,C.top||(C.bottom?w="bottom":(this.isScrollable=!0,C.spaceOnTop>C.spaceOnBottom?(w="bottom",l+=C.spaceOnTop,f-=C.spaceOnTop):l+=C.spaceOnBottom)),!C[O]){var U=O==="left"?"right":"left";C[U]?O=U:C.spaceOnLeft>C.spaceOnRight?(O="right",c+=C.spaceOnLeft,u-=C.spaceOnLeft):(O="left",c+=C.spaceOnRight)}return w==="bottom"&&(f=f-a.height+(this.options.coverTrigger?o.height:0)),O==="right"&&(u=u-a.width+o.width),{x:u,y:f,verticalAlignment:w,horizontalAlignment:O,height:l,width:c}}},{key:"_animateIn",value:function(){var o=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:[0,1],easing:"easeOutQuad"},scaleX:[.3,1],scaleY:[.3,1],duration:this.options.inDuration,easing:"easeOutQuint",complete:function(a){if(o.options.autoFocus&&o.dropdownEl.focus(),typeof o.options.onOpenEnd=="function"){var l=a.animatables[0].target;o.options.onOpenEnd.call(l,o.el)}}})}},{key:"_animateOut",value:function(){var o=this;e.remove(this.dropdownEl),e({targets:this.dropdownEl,opacity:{value:0,easing:"easeOutQuint"},scaleX:.3,scaleY:.3,duration:this.options.outDuration,easing:"easeOutQuint",complete:function(a){o._resetDropdownStyles(),typeof o.options.onCloseEnd=="function"&&(a.animatables[0].target,o.options.onCloseEnd.call(o,o.el))}})}},{key:"_placeDropdown",value:function(){var o=this.options.constrainWidth?this.el.getBoundingClientRect().width:this.dropdownEl.getBoundingClientRect().width;this.dropdownEl.style.width=o+"px";var a=this._getDropdownPosition();this.dropdownEl.style.left=a.x+"px",this.dropdownEl.style.top=a.y+"px",this.dropdownEl.style.height=a.height+"px",this.dropdownEl.style.width=a.width+"px",this.dropdownEl.style.transformOrigin=(a.horizontalAlignment==="left"?"0":"100%")+" "+(a.verticalAlignment==="top"?"0":"100%")}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._resetDropdownStyles(),this.dropdownEl.style.display="block",this._placeDropdown(),this._animateIn(),this._setupTemporaryEventHandlers())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.focusedIndex=-1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._animateOut(),this._removeTemporaryEventHandlers(),this.options.autoFocus&&this.el.focus())}},{key:"recalculateDimensions",value:function(){this.isOpen&&(this.$dropdownEl.css({width:"",height:"",left:"",top:"","transform-origin":""}),this._placeDropdown())}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Dropdown}},{key:"defaults",get:function(){return n}}]),s}();i._dropdowns=[],window.M.Dropdown=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"dropdown","M_Dropdown")}(cash,M.anime),function(t,e){var n={opacity:.5,inDuration:250,outDuration:250,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0,dismissible:!0,startingTop:"4%",endingTop:"10%"},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Modal=l).options=t.extend({},s.defaults,a),l.isOpen=!1,l.id=l.$el.attr("id"),l._openingTrigger=void 0,l.$overlay=t('<div class="modal-overlay"></div>'),l.el.tabIndex=0,l._nthModalOpened=0,s._count++,l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){s._count--,this._removeEventHandlers(),this.el.removeAttribute("style"),this.$overlay.remove(),this.el.M_Modal=void 0}},{key:"_setupEventHandlers",value:function(){this._handleOverlayClickBound=this._handleOverlayClick.bind(this),this._handleModalCloseClickBound=this._handleModalCloseClick.bind(this),s._count===1&&document.body.addEventListener("click",this._handleTriggerClick),this.$overlay[0].addEventListener("click",this._handleOverlayClickBound),this.el.addEventListener("click",this._handleModalCloseClickBound)}},{key:"_removeEventHandlers",value:function(){s._count===0&&document.body.removeEventListener("click",this._handleTriggerClick),this.$overlay[0].removeEventListener("click",this._handleOverlayClickBound),this.el.removeEventListener("click",this._handleModalCloseClickBound)}},{key:"_handleTriggerClick",value:function(o){var a=t(o.target).closest(".modal-trigger");if(a.length){var l=M.getIdFromTrigger(a[0]),c=document.getElementById(l).M_Modal;c&&c.open(a),o.preventDefault()}}},{key:"_handleOverlayClick",value:function(){this.options.dismissible&&this.close()}},{key:"_handleModalCloseClick",value:function(o){t(o.target).closest(".modal-close").length&&this.close()}},{key:"_handleKeydown",value:function(o){o.keyCode===27&&this.options.dismissible&&this.close()}},{key:"_handleFocus",value:function(o){this.el.contains(o.target)||this._nthModalOpened!==s._modalsOpen||this.el.focus()}},{key:"_animateIn",value:function(){var o=this;t.extend(this.el.style,{display:"block",opacity:0}),t.extend(this.$overlay[0].style,{display:"block",opacity:0}),e({targets:this.$overlay[0],opacity:this.options.opacity,duration:this.options.inDuration,easing:"easeOutQuad"});var a={targets:this.el,duration:this.options.inDuration,easing:"easeOutCubic",complete:function(){typeof o.options.onOpenEnd=="function"&&o.options.onOpenEnd.call(o,o.el,o._openingTrigger)}};this.el.classList.contains("bottom-sheet")?t.extend(a,{bottom:0,opacity:1}):t.extend(a,{top:[this.options.startingTop,this.options.endingTop],opacity:1,scaleX:[.8,1],scaleY:[.8,1]}),e(a)}},{key:"_animateOut",value:function(){var o=this;e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuart"});var a={targets:this.el,duration:this.options.outDuration,easing:"easeOutCubic",complete:function(){o.el.style.display="none",o.$overlay.remove(),typeof o.options.onCloseEnd=="function"&&o.options.onCloseEnd.call(o,o.el)}};this.el.classList.contains("bottom-sheet")?t.extend(a,{bottom:"-100%",opacity:0}):t.extend(a,{top:[this.options.endingTop,this.options.startingTop],opacity:0,scaleX:.8,scaleY:.8}),e(a)}},{key:"open",value:function(o){if(!this.isOpen)return this.isOpen=!0,s._modalsOpen++,this._nthModalOpened=s._modalsOpen,this.$overlay[0].style.zIndex=1e3+2*s._modalsOpen,this.el.style.zIndex=1e3+2*s._modalsOpen+1,this._openingTrigger=o?o[0]:void 0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el,this._openingTrigger),this.options.preventScrolling&&(document.body.style.overflow="hidden"),this.el.classList.add("open"),this.el.insertAdjacentElement("afterend",this.$overlay[0]),this.options.dismissible&&(this._handleKeydownBound=this._handleKeydown.bind(this),this._handleFocusBound=this._handleFocus.bind(this),document.addEventListener("keydown",this._handleKeydownBound),document.addEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateIn(),this.el.focus(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,s._modalsOpen--,this._nthModalOpened=0,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this.el.classList.remove("open"),s._modalsOpen===0&&(document.body.style.overflow=""),this.options.dismissible&&(document.removeEventListener("keydown",this._handleKeydownBound),document.removeEventListener("focus",this._handleFocusBound,!0)),e.remove(this.el),e.remove(this.$overlay[0]),this._animateOut(),this}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Modal}},{key:"defaults",get:function(){return n}}]),s}();i._modalsOpen=0,i._count=0,M.Modal=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"modal","M_Modal")}(cash,M.anime),function(t,e){var n={inDuration:275,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Materialbox=l).options=t.extend({},s.defaults,a),l.overlayActive=!1,l.doneAnimating=!0,l.placeholder=t("<div></div>").addClass("material-placeholder"),l.originalWidth=0,l.originalHeight=0,l.originInlineStyles=l.$el.attr("style"),l.caption=l.el.getAttribute("data-caption")||"",l.$el.before(l.placeholder),l.placeholder.append(l.$el),l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Materialbox=void 0,t(this.placeholder).after(this.el).remove(),this.$el.removeAttr("style")}},{key:"_setupEventHandlers",value:function(){this._handleMaterialboxClickBound=this._handleMaterialboxClick.bind(this),this.el.addEventListener("click",this._handleMaterialboxClickBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleMaterialboxClickBound)}},{key:"_handleMaterialboxClick",value:function(o){this.doneAnimating===!1||this.overlayActive&&this.doneAnimating?this.close():this.open()}},{key:"_handleWindowScroll",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowResize",value:function(){this.overlayActive&&this.close()}},{key:"_handleWindowEscape",value:function(o){o.keyCode===27&&this.doneAnimating&&this.overlayActive&&this.close()}},{key:"_makeAncestorsOverflowVisible",value:function(){this.ancestorsChanged=t();for(var o=this.placeholder[0].parentNode;o!==null&&!t(o).is(document);){var a=t(o);a.css("overflow")!=="visible"&&(a.css("overflow","visible"),this.ancestorsChanged===void 0?this.ancestorsChanged=a:this.ancestorsChanged=this.ancestorsChanged.add(a)),o=o.parentNode}}},{key:"_animateImageIn",value:function(){var o=this,a={targets:this.el,height:[this.originalHeight,this.newHeight],width:[this.originalWidth,this.newWidth],left:M.getDocumentScrollLeft()+this.windowWidth/2-this.placeholder.offset().left-this.newWidth/2,top:M.getDocumentScrollTop()+this.windowHeight/2-this.placeholder.offset().top-this.newHeight/2,duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){o.doneAnimating=!0,typeof o.options.onOpenEnd=="function"&&o.options.onOpenEnd.call(o,o.el)}};this.maxWidth=this.$el.css("max-width"),this.maxHeight=this.$el.css("max-height"),this.maxWidth!=="none"&&(a.maxWidth=this.newWidth),this.maxHeight!=="none"&&(a.maxHeight=this.newHeight),e(a)}},{key:"_animateImageOut",value:function(){var o=this,a={targets:this.el,width:this.originalWidth,height:this.originalHeight,left:0,top:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){o.placeholder.css({height:"",width:"",position:"",top:"",left:""}),o.attrWidth&&o.$el.attr("width",o.attrWidth),o.attrHeight&&o.$el.attr("height",o.attrHeight),o.$el.removeAttr("style"),o.originInlineStyles&&o.$el.attr("style",o.originInlineStyles),o.$el.removeClass("active"),o.doneAnimating=!0,o.ancestorsChanged.length&&o.ancestorsChanged.css("overflow",""),typeof o.options.onCloseEnd=="function"&&o.options.onCloseEnd.call(o,o.el)}};e(a)}},{key:"_updateVars",value:function(){this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight,this.caption=this.el.getAttribute("data-caption")||""}},{key:"open",value:function(){var o=this;this._updateVars(),this.originalWidth=this.el.getBoundingClientRect().width,this.originalHeight=this.el.getBoundingClientRect().height,this.doneAnimating=!1,this.$el.addClass("active"),this.overlayActive=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this.placeholder.css({width:this.placeholder[0].getBoundingClientRect().width+"px",height:this.placeholder[0].getBoundingClientRect().height+"px",position:"relative",top:0,left:0}),this._makeAncestorsOverflowVisible(),this.$el.css({position:"absolute","z-index":1e3,"will-change":"left, top, width, height"}),this.attrWidth=this.$el.attr("width"),this.attrHeight=this.$el.attr("height"),this.attrWidth&&(this.$el.css("width",this.attrWidth+"px"),this.$el.removeAttr("width")),this.attrHeight&&(this.$el.css("width",this.attrHeight+"px"),this.$el.removeAttr("height")),this.$overlay=t('<div id="materialbox-overlay"></div>').css({opacity:0}).one("click",function(){o.doneAnimating&&o.close()}),this.$el.before(this.$overlay);var a=this.$overlay[0].getBoundingClientRect();this.$overlay.css({width:this.windowWidth+"px",height:this.windowHeight+"px",left:-1*a.left+"px",top:-1*a.top+"px"}),e.remove(this.el),e.remove(this.$overlay[0]),e({targets:this.$overlay[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}),this.caption!==""&&(this.$photocaption&&e.remove(this.$photoCaption[0]),this.$photoCaption=t('<div class="materialbox-caption"></div>'),this.$photoCaption.text(this.caption),t("body").append(this.$photoCaption),this.$photoCaption.css({display:"inline"}),e({targets:this.$photoCaption[0],opacity:1,duration:this.options.inDuration,easing:"easeOutQuad"}));var l=0,c=this.originalWidth/this.windowWidth,u=this.originalHeight/this.windowHeight;this.newWidth=0,this.newHeight=0,u<c?(l=this.originalHeight/this.originalWidth,this.newWidth=.9*this.windowWidth,this.newHeight=.9*this.windowWidth*l):(l=this.originalWidth/this.originalHeight,this.newWidth=.9*this.windowHeight*l,this.newHeight=.9*this.windowHeight),this._animateImageIn(),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),this._handleWindowResizeBound=this._handleWindowResize.bind(this),this._handleWindowEscapeBound=this._handleWindowEscape.bind(this),window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleWindowResizeBound),window.addEventListener("keyup",this._handleWindowEscapeBound)}},{key:"close",value:function(){var o=this;this._updateVars(),this.doneAnimating=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),e.remove(this.el),e.remove(this.$overlay[0]),this.caption!==""&&e.remove(this.$photoCaption[0]),window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleWindowResizeBound),window.removeEventListener("keyup",this._handleWindowEscapeBound),e({targets:this.$overlay[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){o.overlayActive=!1,o.$overlay.remove()}}),this._animateImageOut(),this.caption!==""&&e({targets:this.$photoCaption[0],opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){o.$photoCaption.remove()}})}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Materialbox}},{key:"defaults",get:function(){return n}}]),s}();M.Materialbox=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"materialbox","M_Materialbox")}(cash,M.anime),function(t){var e={responsiveThreshold:0},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Parallax=a).options=t.extend({},r.defaults,o),a._enabled=window.innerWidth>a.options.responsiveThreshold,a.$img=a.$el.find("img").first(),a.$img.each(function(){this.complete&&t(this).trigger("load")}),a._updateParallax(),a._setupEventHandlers(),a._setupStyles(),r._parallaxes.push(a),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){r._parallaxes.splice(r._parallaxes.indexOf(this),1),this.$img[0].style.transform="",this._removeEventHandlers(),this.$el[0].M_Parallax=void 0}},{key:"_setupEventHandlers",value:function(){this._handleImageLoadBound=this._handleImageLoad.bind(this),this.$img[0].addEventListener("load",this._handleImageLoadBound),r._parallaxes.length===0&&(r._handleScrollThrottled=M.throttle(r._handleScroll,5),window.addEventListener("scroll",r._handleScrollThrottled),r._handleWindowResizeThrottled=M.throttle(r._handleWindowResize,5),window.addEventListener("resize",r._handleWindowResizeThrottled))}},{key:"_removeEventHandlers",value:function(){this.$img[0].removeEventListener("load",this._handleImageLoadBound),r._parallaxes.length===0&&(window.removeEventListener("scroll",r._handleScrollThrottled),window.removeEventListener("resize",r._handleWindowResizeThrottled))}},{key:"_setupStyles",value:function(){this.$img[0].style.opacity=1}},{key:"_handleImageLoad",value:function(){this._updateParallax()}},{key:"_updateParallax",value:function(){var s=0<this.$el.height()?this.el.parentNode.offsetHeight:500,o=this.$img[0].offsetHeight-s,a=this.$el.offset().top+s,l=this.$el.offset().top,c=M.getDocumentScrollTop(),u=window.innerHeight,f=o*((c+u-l)/(s+u));this._enabled?c<a&&l<c+u&&(this.$img[0].style.transform="translate3D(-50%, "+f+"px, 0)"):this.$img[0].style.transform=""}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Parallax}},{key:"_handleScroll",value:function(){for(var s=0;s<r._parallaxes.length;s++){var o=r._parallaxes[s];o._updateParallax.call(o)}}},{key:"_handleWindowResize",value:function(){for(var s=0;s<r._parallaxes.length;s++){var o=r._parallaxes[s];o._enabled=window.innerWidth>o.options.responsiveThreshold}}},{key:"defaults",get:function(){return e}}]),r}();n._parallaxes=[],M.Parallax=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"parallax","M_Parallax")}(cash),function(t,e){var n={duration:300,onShow:null,swipeable:!1,responsiveThreshold:1/0},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Tabs=l).options=t.extend({},s.defaults,a),l.$tabLinks=l.$el.children("li.tab").children("a"),l.index=0,l._setupActiveTabLink(),l.options.swipeable?l._setupSwipeableTabs():l._setupNormalTabs(),l._setTabsAndTabWidth(),l._createIndicator(),l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._indicator.parentNode.removeChild(this._indicator),this.options.swipeable?this._teardownSwipeableTabs():this._teardownNormalTabs(),this.$el[0].M_Tabs=void 0}},{key:"_setupEventHandlers",value:function(){this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound),this._handleTabClickBound=this._handleTabClick.bind(this),this.el.addEventListener("click",this._handleTabClickBound)}},{key:"_removeEventHandlers",value:function(){window.removeEventListener("resize",this._handleWindowResizeBound),this.el.removeEventListener("click",this._handleTabClickBound)}},{key:"_handleWindowResize",value:function(){this._setTabsAndTabWidth(),this.tabWidth!==0&&this.tabsWidth!==0&&(this._indicator.style.left=this._calcLeftPos(this.$activeTabLink)+"px",this._indicator.style.right=this._calcRightPos(this.$activeTabLink)+"px")}},{key:"_handleTabClick",value:function(o){var a=this,l=t(o.target).closest("li.tab"),c=t(o.target).closest("a");if(c.length&&c.parent().hasClass("tab")){if(l.hasClass("disabled"))o.preventDefault();else if(!c.attr("target")){this.$activeTabLink.removeClass("active");var u=this.$content;this.$activeTabLink=c,this.$content=t(M.escapeHash(c[0].hash)),this.$tabLinks=this.$el.children("li.tab").children("a"),this.$activeTabLink.addClass("active");var f=this.index;this.index=Math.max(this.$tabLinks.index(c),0),this.options.swipeable?this._tabsCarousel&&this._tabsCarousel.set(this.index,function(){typeof a.options.onShow=="function"&&a.options.onShow.call(a,a.$content[0])}):this.$content.length&&(this.$content[0].style.display="block",this.$content.addClass("active"),typeof this.options.onShow=="function"&&this.options.onShow.call(this,this.$content[0]),u.length&&!u.is(this.$content)&&(u[0].style.display="none",u.removeClass("active"))),this._setTabsAndTabWidth(),this._animateIndicator(f),o.preventDefault()}}}},{key:"_createIndicator",value:function(){var o=this,a=document.createElement("li");a.classList.add("indicator"),this.el.appendChild(a),this._indicator=a,setTimeout(function(){o._indicator.style.left=o._calcLeftPos(o.$activeTabLink)+"px",o._indicator.style.right=o._calcRightPos(o.$activeTabLink)+"px"},0)}},{key:"_setupActiveTabLink",value:function(){this.$activeTabLink=t(this.$tabLinks.filter('[href="'+location.hash+'"]')),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a.active").first()),this.$activeTabLink.length===0&&(this.$activeTabLink=this.$el.children("li.tab").children("a").first()),this.$tabLinks.removeClass("active"),this.$activeTabLink[0].classList.add("active"),this.index=Math.max(this.$tabLinks.index(this.$activeTabLink),0),this.$activeTabLink.length&&(this.$content=t(M.escapeHash(this.$activeTabLink[0].hash)),this.$content.addClass("active"))}},{key:"_setupSwipeableTabs",value:function(){var o=this;window.innerWidth>this.options.responsiveThreshold&&(this.options.swipeable=!1);var a=t();this.$tabLinks.each(function(u){var f=t(M.escapeHash(u.hash));f.addClass("carousel-item"),a=a.add(f)});var l=t('<div class="tabs-content carousel carousel-slider"></div>');a.first().before(l),l.append(a),a[0].style.display="";var c=this.$activeTabLink.closest(".tab").index();this._tabsCarousel=M.Carousel.init(l[0],{fullWidth:!0,noWrap:!0,onCycleTo:function(u){var f=o.index;o.index=t(u).index(),o.$activeTabLink.removeClass("active"),o.$activeTabLink=o.$tabLinks.eq(o.index),o.$activeTabLink.addClass("active"),o._animateIndicator(f),typeof o.options.onShow=="function"&&o.options.onShow.call(o,o.$content[0])}}),this._tabsCarousel.set(c)}},{key:"_teardownSwipeableTabs",value:function(){var o=this._tabsCarousel.$el;this._tabsCarousel.destroy(),o.after(o.children()),o.remove()}},{key:"_setupNormalTabs",value:function(){this.$tabLinks.not(this.$activeTabLink).each(function(o){if(o.hash){var a=t(M.escapeHash(o.hash));a.length&&(a[0].style.display="none")}})}},{key:"_teardownNormalTabs",value:function(){this.$tabLinks.each(function(o){if(o.hash){var a=t(M.escapeHash(o.hash));a.length&&(a[0].style.display="")}})}},{key:"_setTabsAndTabWidth",value:function(){this.tabsWidth=this.$el.width(),this.tabWidth=Math.max(this.tabsWidth,this.el.scrollWidth)/this.$tabLinks.length}},{key:"_calcRightPos",value:function(o){return Math.ceil(this.tabsWidth-o.position().left-o[0].getBoundingClientRect().width)}},{key:"_calcLeftPos",value:function(o){return Math.floor(o.position().left)}},{key:"updateTabIndicator",value:function(){this._setTabsAndTabWidth(),this._animateIndicator(this.index)}},{key:"_animateIndicator",value:function(o){var a=0,l=0;0<=this.index-o?a=90:l=90;var c={targets:this._indicator,left:{value:this._calcLeftPos(this.$activeTabLink),delay:a},right:{value:this._calcRightPos(this.$activeTabLink),delay:l},duration:this.options.duration,easing:"easeOutQuad"};e.remove(this._indicator),e(c)}},{key:"select",value:function(o){var a=this.$tabLinks.filter('[href="#'+o+'"]');a.length&&a.trigger("click")}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Tabs}},{key:"defaults",get:function(){return n}}]),s}();window.M.Tabs=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tabs","M_Tabs")}(cash,M.anime),function(t,e){var n={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Tooltip=l).options=t.extend({},s.defaults,a),l.isOpen=!1,l.isHovered=!1,l.isFocused=!1,l._appendTooltipEl(),l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){t(this.tooltipEl).remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}},{key:"_appendTooltipEl",value:function(){var o=document.createElement("div");o.classList.add("material-tooltip"),this.tooltipEl=o;var a=document.createElement("div");a.classList.add("tooltip-content"),a.innerHTML=this.options.html,o.appendChild(a),document.body.appendChild(o)}},{key:"_updateTooltipContent",value:function(){this.tooltipEl.querySelector(".tooltip-content").innerHTML=this.options.html}},{key:"_setupEventHandlers",value:function(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}},{key:"open",value:function(o){this.isOpen||(o=o===void 0||void 0,this.isOpen=!0,this.options=t.extend({},this.options,this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(o))}},{key:"close",value:function(){this.isOpen&&(this.isHovered=!1,this.isFocused=!1,this.isOpen=!1,this._setExitDelayTimeout())}},{key:"_setExitDelayTimeout",value:function(){var o=this;clearTimeout(this._exitDelayTimeout),this._exitDelayTimeout=setTimeout(function(){o.isHovered||o.isFocused||o._animateOut()},this.options.exitDelay)}},{key:"_setEnterDelayTimeout",value:function(o){var a=this;clearTimeout(this._enterDelayTimeout),this._enterDelayTimeout=setTimeout(function(){(a.isHovered||a.isFocused||o)&&a._animateIn()},this.options.enterDelay)}},{key:"_positionTooltip",value:function(){var o,a=this.el,l=this.tooltipEl,c=a.offsetHeight,u=a.offsetWidth,f=l.offsetHeight,g=l.offsetWidth,v=this.options.margin,C=void 0,w=void 0;this.xMovement=0,this.yMovement=0,C=a.getBoundingClientRect().top+M.getDocumentScrollTop(),w=a.getBoundingClientRect().left+M.getDocumentScrollLeft(),this.options.position==="top"?(C+=-f-v,w+=u/2-g/2,this.yMovement=-this.options.transitionMovement):this.options.position==="right"?(C+=c/2-f/2,w+=u+v,this.xMovement=this.options.transitionMovement):this.options.position==="left"?(C+=c/2-f/2,w+=-g-v,this.xMovement=-this.options.transitionMovement):(C+=c+v,w+=u/2-g/2,this.yMovement=this.options.transitionMovement),o=this._repositionWithinScreen(w,C,g,f),t(l).css({top:o.y+"px",left:o.x+"px"})}},{key:"_repositionWithinScreen",value:function(o,a,l,c){var u=M.getDocumentScrollLeft(),f=M.getDocumentScrollTop(),g=o-u,v=a-f,C={left:g,top:v,width:l,height:c},w=this.options.margin+this.options.transitionMovement,O=M.checkWithinContainer(document.body,C,w);return O.left?g=w:O.right&&(g-=g+l-window.innerWidth),O.top?v=w:O.bottom&&(v-=v+c-window.innerHeight),{x:g+u,y:v+f}}},{key:"_animateIn",value:function(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:1,translateX:this.xMovement,translateY:this.yMovement,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_animateOut",value:function(){e.remove(this.tooltipEl),e({targets:this.tooltipEl,opacity:0,translateX:0,translateY:0,duration:this.options.outDuration,easing:"easeOutCubic"})}},{key:"_handleMouseEnter",value:function(){this.isHovered=!0,this.isFocused=!1,this.open(!1)}},{key:"_handleMouseLeave",value:function(){this.isHovered=!1,this.isFocused=!1,this.close()}},{key:"_handleFocus",value:function(){M.tabPressed&&(this.isFocused=!0,this.open(!1))}},{key:"_handleBlur",value:function(){this.isFocused=!1,this.close()}},{key:"_getAttributeOptions",value:function(){var o={},a=this.el.getAttribute("data-tooltip"),l=this.el.getAttribute("data-position");return a&&(o.html=a),l&&(o.position=l),o}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Tooltip}},{key:"defaults",get:function(){return n}}]),s}();M.Tooltip=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"tooltip","M_Tooltip")}(cash,M.anime),function(t){var e=e||{},n=document.querySelectorAll.bind(document);function i(a){var l="";for(var c in a)a.hasOwnProperty(c)&&(l+=c+":"+a[c]+";");return l}var r={duration:750,show:function(a,l){if(a.button===2)return!1;var c=l||this,u=document.createElement("div");u.className="waves-ripple",c.appendChild(u);var f,g,v,C,w,O,U,P=(O={top:0,left:0},U=(f=c)&&f.ownerDocument,g=U.documentElement,f.getBoundingClientRect!==void 0&&(O=f.getBoundingClientRect()),v=(w=C=U)!==null&&w===w.window?C:C.nodeType===9&&C.defaultView,{top:O.top+v.pageYOffset-g.clientTop,left:O.left+v.pageXOffset-g.clientLeft}),x=a.pageY-P.top,K=a.pageX-P.left,J="scale("+c.clientWidth/100*10+")";"touches"in a&&(x=a.touches[0].pageY-P.top,K=a.touches[0].pageX-P.left),u.setAttribute("data-hold",Date.now()),u.setAttribute("data-scale",J),u.setAttribute("data-x",K),u.setAttribute("data-y",x);var Q={top:x+"px",left:K+"px"};u.className=u.className+" waves-notransition",u.setAttribute("style",i(Q)),u.className=u.className.replace("waves-notransition",""),Q["-webkit-transform"]=J,Q["-moz-transform"]=J,Q["-ms-transform"]=J,Q["-o-transform"]=J,Q.transform=J,Q.opacity="1",Q["-webkit-transition-duration"]=r.duration+"ms",Q["-moz-transition-duration"]=r.duration+"ms",Q["-o-transition-duration"]=r.duration+"ms",Q["transition-duration"]=r.duration+"ms",Q["-webkit-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Q["-moz-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Q["-o-transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",Q["transition-timing-function"]="cubic-bezier(0.250, 0.460, 0.450, 0.940)",u.setAttribute("style",i(Q))},hide:function(a){s.touchup(a);var l=this,c=(l.clientWidth,null),u=l.getElementsByClassName("waves-ripple");if(!(0<u.length))return!1;var f=(c=u[u.length-1]).getAttribute("data-x"),g=c.getAttribute("data-y"),v=c.getAttribute("data-scale"),C=350-(Date.now()-Number(c.getAttribute("data-hold")));C<0&&(C=0),setTimeout(function(){var w={top:g+"px",left:f+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms","-webkit-transform":v,"-moz-transform":v,"-ms-transform":v,"-o-transform":v,transform:v};c.setAttribute("style",i(w)),setTimeout(function(){try{l.removeChild(c)}catch{return!1}},r.duration)},C)},wrapInput:function(a){for(var l=0;l<a.length;l++){var c=a[l];if(c.tagName.toLowerCase()==="input"){var u=c.parentNode;if(u.tagName.toLowerCase()==="i"&&u.className.indexOf("waves-effect")!==-1)continue;var f=document.createElement("i");f.className=c.className+" waves-input-wrapper";var g=c.getAttribute("style");g||(g=""),f.setAttribute("style",g),c.className="waves-button-input",c.removeAttribute("style"),u.replaceChild(f,c),f.appendChild(c)}}}},s={touches:0,allowEvent:function(a){var l=!0;return a.type==="touchstart"?s.touches+=1:a.type==="touchend"||a.type==="touchcancel"?setTimeout(function(){0<s.touches&&(s.touches-=1)},500):a.type==="mousedown"&&0<s.touches&&(l=!1),l},touchup:function(a){s.allowEvent(a)}};function o(a){var l=function(c){if(s.allowEvent(c)===!1)return null;for(var u=null,f=c.target||c.srcElement;f.parentNode!==null;){if(!(f instanceof SVGElement)&&f.className.indexOf("waves-effect")!==-1){u=f;break}f=f.parentNode}return u}(a);l!==null&&(r.show(a,l),"ontouchstart"in t&&(l.addEventListener("touchend",r.hide,!1),l.addEventListener("touchcancel",r.hide,!1)),l.addEventListener("mouseup",r.hide,!1),l.addEventListener("mouseleave",r.hide,!1),l.addEventListener("dragend",r.hide,!1))}e.displayEffect=function(a){"duration"in(a=a||{})&&(r.duration=a.duration),r.wrapInput(n(".waves-effect")),"ontouchstart"in t&&document.body.addEventListener("touchstart",o,!1),document.body.addEventListener("mousedown",o,!1)},e.attach=function(a){a.tagName.toLowerCase()==="input"&&(r.wrapInput([a]),a=a.parentNode),"ontouchstart"in t&&a.addEventListener("touchstart",o,!1),a.addEventListener("mousedown",o,!1)},t.Waves=e,document.addEventListener("DOMContentLoaded",function(){e.displayEffect()},!1)}(window),function(t,e){var n={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:null,activationPercent:.8},i=function(){function r(s){_classCallCheck(this,r),this.options=t.extend({},r.defaults,s),this.message=this.options.html,this.panning=!1,this.timeRemaining=this.options.displayLength,r._toasts.length===0&&r._createContainer(),r._toasts.push(this);var o=this._createToast();(o.M_Toast=this).el=o,this.$el=t(o),this._animateIn(),this._setTimer()}return _createClass(r,[{key:"_createToast",value:function(){var s=document.createElement("div");return s.classList.add("toast"),this.options.classes.length&&t(s).addClass(this.options.classes),(typeof HTMLElement=="object"?this.message instanceof HTMLElement:this.message&&typeof this.message=="object"&&this.message!==null&&this.message.nodeType===1&&typeof this.message.nodeName=="string")?s.appendChild(this.message):this.message.jquery?t(s).append(this.message[0]):s.innerHTML=this.message,r._container.appendChild(s),s}},{key:"_animateIn",value:function(){e({targets:this.el,top:0,opacity:1,duration:this.options.inDuration,easing:"easeOutCubic"})}},{key:"_setTimer",value:function(){var s=this;this.timeRemaining!==1/0&&(this.counterInterval=setInterval(function(){s.panning||(s.timeRemaining-=20),s.timeRemaining<=0&&s.dismiss()},20))}},{key:"dismiss",value:function(){var s=this;window.clearInterval(this.counterInterval);var o=this.el.offsetWidth*this.options.activationPercent;this.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform="translateX("+o+"px)",this.el.style.opacity=0),e({targets:this.el,opacity:0,marginTop:-40,duration:this.options.outDuration,easing:"easeOutExpo",complete:function(){typeof s.options.completeCallback=="function"&&s.options.completeCallback(),s.$el.remove(),r._toasts.splice(r._toasts.indexOf(s),1),r._toasts.length===0&&r._removeContainer()}})}}],[{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Toast}},{key:"_createContainer",value:function(){var s=document.createElement("div");s.setAttribute("id","toast-container"),s.addEventListener("touchstart",r._onDragStart),s.addEventListener("touchmove",r._onDragMove),s.addEventListener("touchend",r._onDragEnd),s.addEventListener("mousedown",r._onDragStart),document.addEventListener("mousemove",r._onDragMove),document.addEventListener("mouseup",r._onDragEnd),document.body.appendChild(s),r._container=s}},{key:"_removeContainer",value:function(){document.removeEventListener("mousemove",r._onDragMove),document.removeEventListener("mouseup",r._onDragEnd),t(r._container).remove(),r._container=null}},{key:"_onDragStart",value:function(s){if(s.target&&t(s.target).closest(".toast").length){var o=t(s.target).closest(".toast")[0].M_Toast;o.panning=!0,(r._draggedToast=o).el.classList.add("panning"),o.el.style.transition="",o.startingXPos=r._xPos(s),o.time=Date.now(),o.xPos=r._xPos(s)}}},{key:"_onDragMove",value:function(s){if(r._draggedToast){s.preventDefault();var o=r._draggedToast;o.deltaX=Math.abs(o.xPos-r._xPos(s)),o.xPos=r._xPos(s),o.velocityX=o.deltaX/(Date.now()-o.time),o.time=Date.now();var a=o.xPos-o.startingXPos,l=o.el.offsetWidth*o.options.activationPercent;o.el.style.transform="translateX("+a+"px)",o.el.style.opacity=1-Math.abs(a/l)}}},{key:"_onDragEnd",value:function(){if(r._draggedToast){var s=r._draggedToast;s.panning=!1,s.el.classList.remove("panning");var o=s.xPos-s.startingXPos,a=s.el.offsetWidth*s.options.activationPercent;Math.abs(o)>a||1<s.velocityX?(s.wasSwiped=!0,s.dismiss()):(s.el.style.transition="transform .2s, opacity .2s",s.el.style.transform="",s.el.style.opacity=""),r._draggedToast=null}}},{key:"_xPos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientX:s.clientX}},{key:"dismissAll",value:function(){for(var s in r._toasts)r._toasts[s].dismiss()}},{key:"defaults",get:function(){return n}}]),r}();i._toasts=[],i._container=null,i._draggedToast=null,M.Toast=i,M.toast=function(r){return new i(r)}}(cash,M.anime),function(t,e){var n={edge:"left",draggable:!0,inDuration:250,outDuration:200,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,preventScrolling:!0},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Sidenav=l).id=l.$el.attr("id"),l.options=t.extend({},s.defaults,a),l.isOpen=!1,l.isFixed=l.el.classList.contains("sidenav-fixed"),l.isDragged=!1,l.lastWindowWidth=window.innerWidth,l.lastWindowHeight=window.innerHeight,l._createOverlay(),l._createDragTarget(),l._setupEventHandlers(),l._setupClasses(),l._setupFixed(),s._sidenavs.push(l),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._enableBodyScrolling(),this._overlay.parentNode.removeChild(this._overlay),this.dragTarget.parentNode.removeChild(this.dragTarget),this.el.M_Sidenav=void 0,this.el.style.transform="";var o=s._sidenavs.indexOf(this);0<=o&&s._sidenavs.splice(o,1)}},{key:"_createOverlay",value:function(){var o=document.createElement("div");this._closeBound=this.close.bind(this),o.classList.add("sidenav-overlay"),o.addEventListener("click",this._closeBound),document.body.appendChild(o),this._overlay=o}},{key:"_setupEventHandlers",value:function(){s._sidenavs.length===0&&document.body.addEventListener("click",this._handleTriggerClick),this._handleDragTargetDragBound=this._handleDragTargetDrag.bind(this),this._handleDragTargetReleaseBound=this._handleDragTargetRelease.bind(this),this._handleCloseDragBound=this._handleCloseDrag.bind(this),this._handleCloseReleaseBound=this._handleCloseRelease.bind(this),this._handleCloseTriggerClickBound=this._handleCloseTriggerClick.bind(this),this.dragTarget.addEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.addEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.addEventListener("touchmove",this._handleCloseDragBound),this._overlay.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("touchmove",this._handleCloseDragBound),this.el.addEventListener("touchend",this._handleCloseReleaseBound),this.el.addEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&(this._handleWindowResizeBound=this._handleWindowResize.bind(this),window.addEventListener("resize",this._handleWindowResizeBound))}},{key:"_removeEventHandlers",value:function(){s._sidenavs.length===1&&document.body.removeEventListener("click",this._handleTriggerClick),this.dragTarget.removeEventListener("touchmove",this._handleDragTargetDragBound),this.dragTarget.removeEventListener("touchend",this._handleDragTargetReleaseBound),this._overlay.removeEventListener("touchmove",this._handleCloseDragBound),this._overlay.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("touchmove",this._handleCloseDragBound),this.el.removeEventListener("touchend",this._handleCloseReleaseBound),this.el.removeEventListener("click",this._handleCloseTriggerClickBound),this.isFixed&&window.removeEventListener("resize",this._handleWindowResizeBound)}},{key:"_handleTriggerClick",value:function(o){var a=t(o.target).closest(".sidenav-trigger");if(o.target&&a.length){var l=M.getIdFromTrigger(a[0]),c=document.getElementById(l).M_Sidenav;c&&c.open(a),o.preventDefault()}}},{key:"_startDrag",value:function(o){var a=o.targetTouches[0].clientX;this.isDragged=!0,this._startingXpos=a,this._xPos=this._startingXpos,this._time=Date.now(),this._width=this.el.getBoundingClientRect().width,this._overlay.style.display="block",this._initialScrollTop=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop(),this._verticallyScrolling=!1,e.remove(this.el),e.remove(this._overlay)}},{key:"_dragMoveUpdate",value:function(o){var a=o.targetTouches[0].clientX,l=this.isOpen?this.el.scrollTop:M.getDocumentScrollTop();this.deltaX=Math.abs(this._xPos-a),this._xPos=a,this.velocityX=this.deltaX/(Date.now()-this._time),this._time=Date.now(),this._initialScrollTop!==l&&(this._verticallyScrolling=!0)}},{key:"_handleDragTargetDrag",value:function(o){if(this.options.draggable&&!this._isCurrentlyFixed()&&!this._verticallyScrolling){this.isDragged||this._startDrag(o),this._dragMoveUpdate(o);var a=this._xPos-this._startingXpos,l=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge===l&&(a=0);var c=a,u="translateX(-100%)";this.options.edge==="right"&&(u="translateX(100%)",c=-c),this.percentOpen=Math.min(1,a/this._width),this.el.style.transform=u+" translateX("+c+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleDragTargetRelease",value:function(){this.isDragged&&(.2<this.percentOpen?this.open():this._animateOut(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseDrag",value:function(o){if(this.isOpen){if(!this.options.draggable||this._isCurrentlyFixed()||this._verticallyScrolling)return;this.isDragged||this._startDrag(o),this._dragMoveUpdate(o);var a=this._xPos-this._startingXpos,l=0<a?"right":"left";a=Math.min(this._width,Math.abs(a)),this.options.edge!==l&&(a=0);var c=-a;this.options.edge==="right"&&(c=-c),this.percentOpen=Math.min(1,1-a/this._width),this.el.style.transform="translateX("+c+"px)",this._overlay.style.opacity=this.percentOpen}}},{key:"_handleCloseRelease",value:function(){this.isOpen&&this.isDragged&&(.8<this.percentOpen?this._animateIn():this.close(),this.isDragged=!1,this._verticallyScrolling=!1)}},{key:"_handleCloseTriggerClick",value:function(o){t(o.target).closest(".sidenav-close").length&&!this._isCurrentlyFixed()&&this.close()}},{key:"_handleWindowResize",value:function(){this.lastWindowWidth!==window.innerWidth&&(992<window.innerWidth?this.open():this.close()),this.lastWindowWidth=window.innerWidth,this.lastWindowHeight=window.innerHeight}},{key:"_setupClasses",value:function(){this.options.edge==="right"&&(this.el.classList.add("right-aligned"),this.dragTarget.classList.add("right-aligned"))}},{key:"_removeClasses",value:function(){this.el.classList.remove("right-aligned"),this.dragTarget.classList.remove("right-aligned")}},{key:"_setupFixed",value:function(){this._isCurrentlyFixed()&&this.open()}},{key:"_isCurrentlyFixed",value:function(){return this.isFixed&&992<window.innerWidth}},{key:"_createDragTarget",value:function(){var o=document.createElement("div");o.classList.add("drag-target"),document.body.appendChild(o),this.dragTarget=o}},{key:"_preventBodyScrolling",value:function(){document.body.style.overflow="hidden"}},{key:"_enableBodyScrolling",value:function(){document.body.style.overflow=""}},{key:"open",value:function(){this.isOpen!==!0&&(this.isOpen=!0,typeof this.options.onOpenStart=="function"&&this.options.onOpenStart.call(this,this.el),this._isCurrentlyFixed()?(e.remove(this.el),e({targets:this.el,translateX:0,duration:0,easing:"easeOutQuad"}),this._enableBodyScrolling(),this._overlay.style.display="none"):(this.options.preventScrolling&&this._preventBodyScrolling(),this.isDragged&&this.percentOpen==1||this._animateIn()))}},{key:"close",value:function(){if(this.isOpen!==!1)if(this.isOpen=!1,typeof this.options.onCloseStart=="function"&&this.options.onCloseStart.call(this,this.el),this._isCurrentlyFixed()){var o=this.options.edge==="left"?"-105%":"105%";this.el.style.transform="translateX("+o+")"}else this._enableBodyScrolling(),this.isDragged&&this.percentOpen==0?this._overlay.style.display="none":this._animateOut()}},{key:"_animateIn",value:function(){this._animateSidenavIn(),this._animateOverlayIn()}},{key:"_animateSidenavIn",value:function(){var o=this,a=this.options.edge==="left"?-1:1;this.isDragged&&(a=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*a+"%",0],duration:this.options.inDuration,easing:"easeOutQuad",complete:function(){typeof o.options.onOpenEnd=="function"&&o.options.onOpenEnd.call(o,o.el)}})}},{key:"_animateOverlayIn",value:function(){var o=0;this.isDragged?o=this.percentOpen:t(this._overlay).css({display:"block"}),e.remove(this._overlay),e({targets:this._overlay,opacity:[o,1],duration:this.options.inDuration,easing:"easeOutQuad"})}},{key:"_animateOut",value:function(){this._animateSidenavOut(),this._animateOverlayOut()}},{key:"_animateSidenavOut",value:function(){var o=this,a=this.options.edge==="left"?-1:1,l=0;this.isDragged&&(l=this.options.edge==="left"?a+this.percentOpen:a-this.percentOpen),e.remove(this.el),e({targets:this.el,translateX:[100*l+"%",105*a+"%"],duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){typeof o.options.onCloseEnd=="function"&&o.options.onCloseEnd.call(o,o.el)}})}},{key:"_animateOverlayOut",value:function(){var o=this;e.remove(this._overlay),e({targets:this._overlay,opacity:0,duration:this.options.outDuration,easing:"easeOutQuad",complete:function(){t(o._overlay).css("display","none")}})}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Sidenav}},{key:"defaults",get:function(){return n}}]),s}();i._sidenavs=[],window.M.Sidenav=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"sidenav","M_Sidenav")}(cash,M.anime),function(t,e){var n={throttle:100,scrollOffset:200,activeClass:"active",getActiveElement:function(r){return'a[href="#'+r+'"]'}},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_ScrollSpy=l).options=t.extend({},s.defaults,a),s._elements.push(l),s._count++,s._increment++,l.tickId=-1,l.id=s._increment,l._setupEventHandlers(),l._handleWindowScroll(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){s._elements.splice(s._elements.indexOf(this),1),s._elementsInView.splice(s._elementsInView.indexOf(this),1),s._visibleElements.splice(s._visibleElements.indexOf(this.$el),1),s._count--,this._removeEventHandlers(),t(this.options.getActiveElement(this.$el.attr("id"))).removeClass(this.options.activeClass),this.el.M_ScrollSpy=void 0}},{key:"_setupEventHandlers",value:function(){var o=M.throttle(this._handleWindowScroll,200);this._handleThrottledResizeBound=o.bind(this),this._handleWindowScrollBound=this._handleWindowScroll.bind(this),s._count===1&&(window.addEventListener("scroll",this._handleWindowScrollBound),window.addEventListener("resize",this._handleThrottledResizeBound),document.body.addEventListener("click",this._handleTriggerClick))}},{key:"_removeEventHandlers",value:function(){s._count===0&&(window.removeEventListener("scroll",this._handleWindowScrollBound),window.removeEventListener("resize",this._handleThrottledResizeBound),document.body.removeEventListener("click",this._handleTriggerClick))}},{key:"_handleTriggerClick",value:function(o){for(var a=t(o.target),l=s._elements.length-1;0<=l;l--){var c=s._elements[l];if(a.is('a[href="#'+c.$el.attr("id")+'"]')){o.preventDefault();var u=c.$el.offset().top+1;e({targets:[document.documentElement,document.body],scrollTop:u-c.options.scrollOffset,duration:400,easing:"easeOutCubic"});break}}}},{key:"_handleWindowScroll",value:function(){s._ticks++;for(var o=M.getDocumentScrollTop(),a=M.getDocumentScrollLeft(),l=a+window.innerWidth,c=o+window.innerHeight,u=s._findElements(o,l,c,a),f=0;f<u.length;f++){var g=u[f];g.tickId<0&&g._enter(),g.tickId=s._ticks}for(var v=0;v<s._elementsInView.length;v++){var C=s._elementsInView[v],w=C.tickId;0<=w&&w!==s._ticks&&(C._exit(),C.tickId=-1)}s._elementsInView=u}},{key:"_enter",value:function(){(s._visibleElements=s._visibleElements.filter(function(o){return o.height()!=0}))[0]?(t(this.options.getActiveElement(s._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),s._visibleElements[0][0].M_ScrollSpy&&this.id<s._visibleElements[0][0].M_ScrollSpy.id?s._visibleElements.unshift(this.$el):s._visibleElements.push(this.$el)):s._visibleElements.push(this.$el),t(this.options.getActiveElement(s._visibleElements[0].attr("id"))).addClass(this.options.activeClass)}},{key:"_exit",value:function(){var o=this;(s._visibleElements=s._visibleElements.filter(function(a){return a.height()!=0}))[0]&&(t(this.options.getActiveElement(s._visibleElements[0].attr("id"))).removeClass(this.options.activeClass),(s._visibleElements=s._visibleElements.filter(function(a){return a.attr("id")!=o.$el.attr("id")}))[0]&&t(this.options.getActiveElement(s._visibleElements[0].attr("id"))).addClass(this.options.activeClass))}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_ScrollSpy}},{key:"_findElements",value:function(o,a,l,c){for(var u=[],f=0;f<s._elements.length;f++){var g=s._elements[f],v=o+g.options.scrollOffset||200;if(0<g.$el.height()){var C=g.$el.offset().top,w=g.$el.offset().left,O=w+g.$el.width(),U=C+g.$el.height();!(a<w||O<c||l<C||U<v)&&u.push(g)}}return u}},{key:"defaults",get:function(){return n}}]),s}();i._elements=[],i._elementsInView=[],i._visibleElements=[],i._count=0,i._increment=0,i._ticks=0,M.ScrollSpy=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"scrollSpy","M_ScrollSpy")}(cash,M.anime),function(t){var e={data:{},limit:1/0,onAutocomplete:null,minLength:1,sortFunction:function(i,r,s){return i.indexOf(s)-r.indexOf(s)}},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Autocomplete=a).options=t.extend({},r.defaults,o),a.isOpen=!1,a.count=0,a.activeIndex=-1,a.oldVal,a.$inputField=a.$el.closest(".input-field"),a.$active=t(),a._mousedown=!1,a._setupDropdown(),a._setupEventHandlers(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_Autocomplete=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputBlurBound=this._handleInputBlur.bind(this),this._handleInputKeyupAndFocusBound=this._handleInputKeyupAndFocus.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleContainerMousedownAndTouchstartBound=this._handleContainerMousedownAndTouchstart.bind(this),this._handleContainerMouseupAndTouchendBound=this._handleContainerMouseupAndTouchend.bind(this),this.el.addEventListener("blur",this._handleInputBlurBound),this.el.addEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.addEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("click",this._handleInputClickBound),this.container.addEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.addEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.addEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("blur",this._handleInputBlurBound),this.el.removeEventListener("keyup",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("focus",this._handleInputKeyupAndFocusBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("click",this._handleInputClickBound),this.container.removeEventListener("mousedown",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("mouseup",this._handleContainerMouseupAndTouchendBound),window.ontouchstart!==void 0&&(this.container.removeEventListener("touchstart",this._handleContainerMousedownAndTouchstartBound),this.container.removeEventListener("touchend",this._handleContainerMouseupAndTouchendBound))}},{key:"_setupDropdown",value:function(){var s=this;this.container=document.createElement("ul"),this.container.id="autocomplete-options-"+M.guid(),t(this.container).addClass("autocomplete-content dropdown-content"),this.$inputField.append(this.container),this.el.setAttribute("data-target",this.container.id),this.dropdown=M.Dropdown.init(this.el,{autoFocus:!1,closeOnClick:!1,coverTrigger:!1,onItemClick:function(o){s.selectOption(t(o))}}),this.el.removeEventListener("click",this.dropdown._handleClickBound)}},{key:"_removeDropdown",value:function(){this.container.parentNode.removeChild(this.container)}},{key:"_handleInputBlur",value:function(){this._mousedown||(this.close(),this._resetAutocomplete())}},{key:"_handleInputKeyupAndFocus",value:function(s){s.type==="keyup"&&(r._keydown=!1),this.count=0;var o=this.el.value.toLowerCase();s.keyCode!==13&&s.keyCode!==38&&s.keyCode!==40&&(this.oldVal===o||!M.tabPressed&&s.type==="focus"||this.open(),this.oldVal=o)}},{key:"_handleInputKeydown",value:function(s){r._keydown=!0;var o=s.keyCode,a=void 0,l=t(this.container).children("li").length;o===M.keys.ENTER&&0<=this.activeIndex?(a=t(this.container).children("li").eq(this.activeIndex)).length&&(this.selectOption(a),s.preventDefault()):o!==M.keys.ARROW_UP&&o!==M.keys.ARROW_DOWN||(s.preventDefault(),o===M.keys.ARROW_UP&&0<this.activeIndex&&this.activeIndex--,o===M.keys.ARROW_DOWN&&this.activeIndex<l-1&&this.activeIndex++,this.$active.removeClass("active"),0<=this.activeIndex&&(this.$active=t(this.container).children("li").eq(this.activeIndex),this.$active.addClass("active")))}},{key:"_handleInputClick",value:function(s){this.open()}},{key:"_handleContainerMousedownAndTouchstart",value:function(s){this._mousedown=!0}},{key:"_handleContainerMouseupAndTouchend",value:function(s){this._mousedown=!1}},{key:"_highlight",value:function(s,o){var a=o.find("img"),l=o.text().toLowerCase().indexOf(""+s.toLowerCase()),c=l+s.length-1,u=o.text().slice(0,l),f=o.text().slice(l,c+1),g=o.text().slice(c+1);o.html("<span>"+u+"<span class='highlight'>"+f+"</span>"+g+"</span>"),a.length&&o.prepend(a)}},{key:"_resetCurrentElement",value:function(){this.activeIndex=-1,this.$active.removeClass("active")}},{key:"_resetAutocomplete",value:function(){t(this.container).empty(),this._resetCurrentElement(),this.oldVal=null,this.isOpen=!1,this._mousedown=!1}},{key:"selectOption",value:function(s){var o=s.text().trim();this.el.value=o,this.$el.trigger("change"),this._resetAutocomplete(),this.close(),typeof this.options.onAutocomplete=="function"&&this.options.onAutocomplete.call(this,o)}},{key:"_renderDropdown",value:function(s,o){var a=this;this._resetAutocomplete();var l=[];for(var c in s)if(s.hasOwnProperty(c)&&c.toLowerCase().indexOf(o)!==-1){if(this.count>=this.options.limit)break;var u={data:s[c],key:c};l.push(u),this.count++}this.options.sortFunction&&l.sort(function(C,w){return a.options.sortFunction(C.key.toLowerCase(),w.key.toLowerCase(),o.toLowerCase())});for(var f=0;f<l.length;f++){var g=l[f],v=t("<li></li>");g.data?v.append('<img src="'+g.data+'" class="right circle"><span>'+g.key+"</span>"):v.append("<span>"+g.key+"</span>"),t(this.container).append(v),this._highlight(o,v)}}},{key:"open",value:function(){var s=this.el.value.toLowerCase();this._resetAutocomplete(),s.length>=this.options.minLength&&(this.isOpen=!0,this._renderDropdown(this.options.data,s)),this.dropdown.isOpen?this.dropdown.recalculateDimensions():this.dropdown.open()}},{key:"close",value:function(){this.dropdown.close()}},{key:"updateData",value:function(s){var o=this.el.value.toLowerCase();this.options.data=s,this.isOpen&&this._renderDropdown(s,o)}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Autocomplete}},{key:"defaults",get:function(){return e}}]),r}();n._keydown=!1,M.Autocomplete=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"autocomplete","M_Autocomplete")}(cash),function(t){M.updateTextFields=function(){t("input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea").each(function(e,n){var i=t(this);0<e.value.length||t(e).is(":focus")||e.autofocus||i.attr("placeholder")!==null?i.siblings("label").addClass("active"):e.validity?i.siblings("label").toggleClass("active",e.validity.badInput===!0):i.siblings("label").removeClass("active")})},M.validate_field=function(e){var n=e.attr("data-length")!==null,i=parseInt(e.attr("data-length")),r=e[0].value.length;r!==0||e[0].validity.badInput!==!1||e.is(":required")?e.hasClass("validate")&&(e.is(":valid")&&n&&r<=i||e.is(":valid")&&!n?(e.removeClass("invalid"),e.addClass("valid")):(e.removeClass("valid"),e.addClass("invalid"))):e.hasClass("validate")&&(e.removeClass("valid"),e.removeClass("invalid"))},M.textareaAutoResize=function(e){if(e instanceof Element&&(e=t(e)),e.length){var n=t(".hiddendiv").first();n.length||(n=t('<div class="hiddendiv common"></div>'),t("body").append(n));var i=e.css("font-family"),r=e.css("font-size"),s=e.css("line-height"),o=e.css("padding-top"),a=e.css("padding-right"),l=e.css("padding-bottom"),c=e.css("padding-left");r&&n.css("font-size",r),i&&n.css("font-family",i),s&&n.css("line-height",s),o&&n.css("padding-top",o),a&&n.css("padding-right",a),l&&n.css("padding-bottom",l),c&&n.css("padding-left",c),e.data("original-height")||e.data("original-height",e.height()),e.attr("wrap")==="off"&&n.css("overflow-wrap","normal").css("white-space","pre"),n.text(e[0].value+`
`);var u=n.html().replace(/\n/g,"<br>");n.html(u),0<e[0].offsetWidth&&0<e[0].offsetHeight?n.css("width",e.width()+"px"):n.css("width",window.innerWidth/2+"px"),e.data("original-height")<=n.innerHeight()?e.css("height",n.innerHeight()+"px"):e[0].value.length<e.data("previous-length")&&e.css("height",e.data("original-height")+"px"),e.data("previous-length",e[0].value.length)}else console.error("No textarea element found")},t(document).ready(function(){var e="input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea";t(document).on("change",e,function(){this.value.length===0&&t(this).attr("placeholder")===null||t(this).siblings("label").addClass("active"),M.validate_field(t(this))}),t(document).ready(function(){M.updateTextFields()}),t(document).on("reset",function(i){var r=t(i.target);r.is("form")&&(r.find(e).removeClass("valid").removeClass("invalid"),r.find(e).each(function(s){this.value.length&&t(this).siblings("label").removeClass("active")}),setTimeout(function(){r.find("select").each(function(){this.M_FormSelect&&t(this).trigger("change")})},0))}),document.addEventListener("focus",function(i){t(i.target).is(e)&&t(i.target).siblings("label, .prefix").addClass("active")},!0),document.addEventListener("blur",function(i){var r=t(i.target);if(r.is(e)){var s=".prefix";r[0].value.length===0&&r[0].validity.badInput!==!0&&r.attr("placeholder")===null&&(s+=", label"),r.siblings(s).removeClass("active"),M.validate_field(r)}},!0),t(document).on("keyup","input[type=radio], input[type=checkbox]",function(i){if(i.which===M.keys.TAB)return t(this).addClass("tabbed"),void t(this).one("blur",function(r){t(this).removeClass("tabbed")})});var n=".materialize-textarea";t(n).each(function(){var i=t(this);i.data("original-height",i.height()),i.data("previous-length",this.value.length),M.textareaAutoResize(i)}),t(document).on("keyup",n,function(){M.textareaAutoResize(t(this))}),t(document).on("keydown",n,function(){M.textareaAutoResize(t(this))}),t(document).on("change",'.file-field input[type="file"]',function(){for(var i=t(this).closest(".file-field").find("input.file-path"),r=t(this)[0].files,s=[],o=0;o<r.length;o++)s.push(r[o].name);i[0].value=s.join(", "),i.trigger("change")})})}(cash),function(t,e){var n={indicators:!0,height:400,duration:500,interval:6e3},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Slider=l).options=t.extend({},s.defaults,a),l.$slider=l.$el.find(".slides"),l.$slides=l.$slider.children("li"),l.activeIndex=l.$slides.filter(function(c){return t(c).hasClass("active")}).first().index(),l.activeIndex!=-1&&(l.$active=l.$slides.eq(l.activeIndex)),l._setSliderHeight(),l.$slides.find(".caption").each(function(c){l._animateCaptionIn(c,0)}),l.$slides.find("img").each(function(c){var u="data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";t(c).attr("src")!==u&&(t(c).css("background-image",'url("'+t(c).attr("src")+'")'),t(c).attr("src",u))}),l._setupIndicators(),l.$active?l.$active.css("display","block"):(l.$slides.first().addClass("active"),e({targets:l.$slides.first()[0],opacity:1,duration:l.options.duration,easing:"easeOutQuad"}),l.activeIndex=0,l.$active=l.$slides.eq(l.activeIndex),l.options.indicators&&l.$indicators.eq(l.activeIndex).addClass("active")),l.$active.find("img").each(function(c){e({targets:l.$active.find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:l.options.duration,easing:"easeOutQuad"})}),l._setupEventHandlers(),l.start(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this.pause(),this._removeIndicators(),this._removeEventHandlers(),this.el.M_Slider=void 0}},{key:"_setupEventHandlers",value:function(){var o=this;this._handleIntervalBound=this._handleInterval.bind(this),this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.options.indicators&&this.$indicators.each(function(a){a.addEventListener("click",o._handleIndicatorClickBound)})}},{key:"_removeEventHandlers",value:function(){var o=this;this.options.indicators&&this.$indicators.each(function(a){a.removeEventListener("click",o._handleIndicatorClickBound)})}},{key:"_handleIndicatorClick",value:function(o){var a=t(o.target).index();this.set(a)}},{key:"_handleInterval",value:function(){var o=this.$slider.find(".active").index();this.$slides.length===o+1?o=0:o+=1,this.set(o)}},{key:"_animateCaptionIn",value:function(o,a){var l={targets:o,opacity:0,duration:a,easing:"easeOutQuad"};t(o).hasClass("center-align")?l.translateY=-100:t(o).hasClass("right-align")?l.translateX=100:t(o).hasClass("left-align")&&(l.translateX=-100),e(l)}},{key:"_setSliderHeight",value:function(){this.$el.hasClass("fullscreen")||(this.options.indicators?this.$el.css("height",this.options.height+40+"px"):this.$el.css("height",this.options.height+"px"),this.$slider.css("height",this.options.height+"px"))}},{key:"_setupIndicators",value:function(){var o=this;this.options.indicators&&(this.$indicators=t('<ul class="indicators"></ul>'),this.$slides.each(function(a,l){var c=t('<li class="indicator-item"></li>');o.$indicators.append(c[0])}),this.$el.append(this.$indicators[0]),this.$indicators=this.$indicators.children("li.indicator-item"))}},{key:"_removeIndicators",value:function(){this.$el.find("ul.indicators").remove()}},{key:"set",value:function(o){var a=this;if(o>=this.$slides.length?o=0:o<0&&(o=this.$slides.length-1),this.activeIndex!=o){this.$active=this.$slides.eq(this.activeIndex);var l=this.$active.find(".caption");this.$active.removeClass("active"),e({targets:this.$active[0],opacity:0,duration:this.options.duration,easing:"easeOutQuad",complete:function(){a.$slides.not(".active").each(function(c){e({targets:c,opacity:0,translateX:0,translateY:0,duration:0,easing:"easeOutQuad"})})}}),this._animateCaptionIn(l[0],this.options.duration),this.options.indicators&&(this.$indicators.eq(this.activeIndex).removeClass("active"),this.$indicators.eq(o).addClass("active")),e({targets:this.$slides.eq(o)[0],opacity:1,duration:this.options.duration,easing:"easeOutQuad"}),e({targets:this.$slides.eq(o).find(".caption")[0],opacity:1,translateX:0,translateY:0,duration:this.options.duration,delay:this.options.duration,easing:"easeOutQuad"}),this.$slides.eq(o).addClass("active"),this.activeIndex=o,this.start()}}},{key:"pause",value:function(){clearInterval(this.interval)}},{key:"start",value:function(){clearInterval(this.interval),this.interval=setInterval(this._handleIntervalBound,this.options.duration+this.options.interval)}},{key:"next",value:function(){var o=this.activeIndex+1;o>=this.$slides.length?o=0:o<0&&(o=this.$slides.length-1),this.set(o)}},{key:"prev",value:function(){var o=this.activeIndex-1;o>=this.$slides.length?o=0:o<0&&(o=this.$slides.length-1),this.set(o)}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Slider}},{key:"defaults",get:function(){return n}}]),s}();M.Slider=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"slider","M_Slider")}(cash,M.anime),function(t,e){t(document).on("click",".card",function(n){if(t(this).children(".card-reveal").length){var i=t(n.target).closest(".card");i.data("initialOverflow")===void 0&&i.data("initialOverflow",i.css("overflow")===void 0?"":i.css("overflow"));var r=t(this).find(".card-reveal");t(n.target).is(t(".card-reveal .card-title"))||t(n.target).is(t(".card-reveal .card-title i"))?e({targets:r[0],translateY:0,duration:225,easing:"easeInOutQuad",complete:function(s){var o=s.animatables[0].target;t(o).css({display:"none"}),i.css("overflow",i.data("initialOverflow"))}}):(t(n.target).is(t(".card .activator"))||t(n.target).is(t(".card .activator i")))&&(i.css("overflow","hidden"),r.css({display:"block"}),e({targets:r[0],translateY:"-100%",duration:300,easing:"easeInOutQuad"}))}})}(cash,M.anime),function(t){var e={data:[],placeholder:"",secondaryPlaceholder:"",autocompleteOptions:{},limit:1/0,onChipAdd:null,onChipSelect:null,onChipDelete:null},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Chips=a).options=t.extend({},r.defaults,o),a.$el.addClass("chips input-field"),a.chipsData=[],a.$chips=t(),a._setupInput(),a.hasAutocomplete=0<Object.keys(a.options.autocompleteOptions).length,a.$input.attr("id")||a.$input.attr("id",M.guid()),a.options.data.length&&(a.chipsData=a.options.data,a._renderChips(a.chipsData)),a.hasAutocomplete&&a._setupAutocomplete(),a._setPlaceholder(),a._setupLabel(),a._setupEventHandlers(),a}return _inherits(r,Component),_createClass(r,[{key:"getData",value:function(){return this.chipsData}},{key:"destroy",value:function(){this._removeEventHandlers(),this.$chips.remove(),this.el.M_Chips=void 0}},{key:"_setupEventHandlers",value:function(){this._handleChipClickBound=this._handleChipClick.bind(this),this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputFocusBound=this._handleInputFocus.bind(this),this._handleInputBlurBound=this._handleInputBlur.bind(this),this.el.addEventListener("click",this._handleChipClickBound),document.addEventListener("keydown",r._handleChipsKeydown),document.addEventListener("keyup",r._handleChipsKeyup),this.el.addEventListener("blur",r._handleChipsBlur,!0),this.$input[0].addEventListener("focus",this._handleInputFocusBound),this.$input[0].addEventListener("blur",this._handleInputBlurBound),this.$input[0].addEventListener("keydown",this._handleInputKeydownBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleChipClickBound),document.removeEventListener("keydown",r._handleChipsKeydown),document.removeEventListener("keyup",r._handleChipsKeyup),this.el.removeEventListener("blur",r._handleChipsBlur,!0),this.$input[0].removeEventListener("focus",this._handleInputFocusBound),this.$input[0].removeEventListener("blur",this._handleInputBlurBound),this.$input[0].removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleChipClick",value:function(s){var o=t(s.target).closest(".chip"),a=t(s.target).is(".close");if(o.length){var l=o.index();a?(this.deleteChip(l),this.$input[0].focus()):this.selectChip(l)}else this.$input[0].focus()}},{key:"_handleInputFocus",value:function(){this.$el.addClass("focus")}},{key:"_handleInputBlur",value:function(){this.$el.removeClass("focus")}},{key:"_handleInputKeydown",value:function(s){if(r._keydown=!0,s.keyCode===13){if(this.hasAutocomplete&&this.autocomplete&&this.autocomplete.isOpen)return;s.preventDefault(),this.addChip({tag:this.$input[0].value}),this.$input[0].value=""}else s.keyCode!==8&&s.keyCode!==37||this.$input[0].value!==""||!this.chipsData.length||(s.preventDefault(),this.selectChip(this.chipsData.length-1))}},{key:"_renderChip",value:function(s){if(s.tag){var o=document.createElement("div"),a=document.createElement("i");if(o.classList.add("chip"),o.textContent=s.tag,o.setAttribute("tabindex",0),t(a).addClass("material-icons close"),a.textContent="close",s.image){var l=document.createElement("img");l.setAttribute("src",s.image),o.insertBefore(l,o.firstChild)}return o.appendChild(a),o}}},{key:"_renderChips",value:function(){this.$chips.remove();for(var s=0;s<this.chipsData.length;s++){var o=this._renderChip(this.chipsData[s]);this.$el.append(o),this.$chips.add(o)}this.$el.append(this.$input[0])}},{key:"_setupAutocomplete",value:function(){var s=this;this.options.autocompleteOptions.onAutocomplete=function(o){s.addChip({tag:o}),s.$input[0].value="",s.$input[0].focus()},this.autocomplete=M.Autocomplete.init(this.$input[0],this.options.autocompleteOptions)}},{key:"_setupInput",value:function(){this.$input=this.$el.find("input"),this.$input.length||(this.$input=t("<input></input>"),this.$el.append(this.$input)),this.$input.addClass("input")}},{key:"_setupLabel",value:function(){this.$label=this.$el.find("label"),this.$label.length&&this.$label.setAttribute("for",this.$input.attr("id"))}},{key:"_setPlaceholder",value:function(){this.chipsData!==void 0&&!this.chipsData.length&&this.options.placeholder?t(this.$input).prop("placeholder",this.options.placeholder):(this.chipsData===void 0||this.chipsData.length)&&this.options.secondaryPlaceholder&&t(this.$input).prop("placeholder",this.options.secondaryPlaceholder)}},{key:"_isValid",value:function(s){if(s.hasOwnProperty("tag")&&s.tag!==""){for(var o=!1,a=0;a<this.chipsData.length;a++)if(this.chipsData[a].tag===s.tag){o=!0;break}return!o}return!1}},{key:"addChip",value:function(s){if(this._isValid(s)&&!(this.chipsData.length>=this.options.limit)){var o=this._renderChip(s);this.$chips.add(o),this.chipsData.push(s),t(this.$input).before(o),this._setPlaceholder(),typeof this.options.onChipAdd=="function"&&this.options.onChipAdd.call(this,this.$el,o)}}},{key:"deleteChip",value:function(s){var o=this.$chips.eq(s);this.$chips.eq(s).remove(),this.$chips=this.$chips.filter(function(a){return 0<=t(a).index()}),this.chipsData.splice(s,1),this._setPlaceholder(),typeof this.options.onChipDelete=="function"&&this.options.onChipDelete.call(this,this.$el,o[0])}},{key:"selectChip",value:function(s){var o=this.$chips.eq(s);(this._selectedChip=o)[0].focus(),typeof this.options.onChipSelect=="function"&&this.options.onChipSelect.call(this,this.$el,o[0])}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Chips}},{key:"_handleChipsKeydown",value:function(s){r._keydown=!0;var o=t(s.target).closest(".chips"),a=s.target&&o.length;if(!t(s.target).is("input, textarea")&&a){var l=o[0].M_Chips;if(s.keyCode===8||s.keyCode===46){s.preventDefault();var c=l.chipsData.length;if(l._selectedChip){var u=l._selectedChip.index();l.deleteChip(u),l._selectedChip=null,c=Math.max(u-1,0)}l.chipsData.length&&l.selectChip(c)}else if(s.keyCode===37){if(l._selectedChip){var f=l._selectedChip.index()-1;if(f<0)return;l.selectChip(f)}}else if(s.keyCode===39&&l._selectedChip){var g=l._selectedChip.index()+1;g>=l.chipsData.length?l.$input[0].focus():l.selectChip(g)}}}},{key:"_handleChipsKeyup",value:function(s){r._keydown=!1}},{key:"_handleChipsBlur",value:function(s){r._keydown||(t(s.target).closest(".chips")[0].M_Chips._selectedChip=null)}},{key:"defaults",get:function(){return e}}]),r}();n._keydown=!1,M.Chips=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"chips","M_Chips"),t(document).ready(function(){t(document.body).on("click",".chip .close",function(){var i=t(this).closest(".chips");i.length&&i[0].M_Chips||t(this).closest(".chip").remove()})})}(cash),function(t){var e={top:0,bottom:1/0,offset:0,onPositionChange:null},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Pushpin=a).options=t.extend({},r.defaults,o),a.originalOffset=a.el.offsetTop,r._pushpins.push(a),a._setupEventHandlers(),a._updatePosition(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this.el.style.top=null,this._removePinClasses(),this._removeEventHandlers();var s=r._pushpins.indexOf(this);r._pushpins.splice(s,1)}},{key:"_setupEventHandlers",value:function(){document.addEventListener("scroll",r._updateElements)}},{key:"_removeEventHandlers",value:function(){document.removeEventListener("scroll",r._updateElements)}},{key:"_updatePosition",value:function(){var s=M.getDocumentScrollTop()+this.options.offset;this.options.top<=s&&this.options.bottom>=s&&!this.el.classList.contains("pinned")&&(this._removePinClasses(),this.el.style.top=this.options.offset+"px",this.el.classList.add("pinned"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pinned")),s<this.options.top&&!this.el.classList.contains("pin-top")&&(this._removePinClasses(),this.el.style.top=0,this.el.classList.add("pin-top"),typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-top")),s>this.options.bottom&&!this.el.classList.contains("pin-bottom")&&(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.top=this.options.bottom-this.originalOffset+"px",typeof this.options.onPositionChange=="function"&&this.options.onPositionChange.call(this,"pin-bottom"))}},{key:"_removePinClasses",value:function(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Pushpin}},{key:"_updateElements",value:function(){for(var s in r._pushpins)r._pushpins[s]._updatePosition()}},{key:"defaults",get:function(){return e}}]),r}();n._pushpins=[],M.Pushpin=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"pushpin","M_Pushpin")}(cash),function(t,e){var n={direction:"top",hoverEnabled:!0,toolbarEnabled:!1};t.fn.reverse=[].reverse;var i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_FloatingActionButton=l).options=t.extend({},s.defaults,a),l.isOpen=!1,l.$anchor=l.$el.children("a").first(),l.$menu=l.$el.children("ul").first(),l.$floatingBtns=l.$el.find("ul .btn-floating"),l.$floatingBtnsReverse=l.$el.find("ul .btn-floating").reverse(),l.offsetY=0,l.offsetX=0,l.$el.addClass("direction-"+l.options.direction),l.options.direction==="top"?l.offsetY=40:l.options.direction==="right"?l.offsetX=-40:l.options.direction==="bottom"?l.offsetY=-40:l.offsetX=40,l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_FloatingActionButton=void 0}},{key:"_setupEventHandlers",value:function(){this._handleFABClickBound=this._handleFABClick.bind(this),this._handleOpenBound=this.open.bind(this),this._handleCloseBound=this.close.bind(this),this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.addEventListener("mouseenter",this._handleOpenBound),this.el.addEventListener("mouseleave",this._handleCloseBound)):this.el.addEventListener("click",this._handleFABClickBound)}},{key:"_removeEventHandlers",value:function(){this.options.hoverEnabled&&!this.options.toolbarEnabled?(this.el.removeEventListener("mouseenter",this._handleOpenBound),this.el.removeEventListener("mouseleave",this._handleCloseBound)):this.el.removeEventListener("click",this._handleFABClickBound)}},{key:"_handleFABClick",value:function(){this.isOpen?this.close():this.open()}},{key:"_handleDocumentClick",value:function(o){t(o.target).closest(this.$menu).length||this.close()}},{key:"open",value:function(){this.isOpen||(this.options.toolbarEnabled?this._animateInToolbar():this._animateInFAB(),this.isOpen=!0)}},{key:"close",value:function(){this.isOpen&&(this.options.toolbarEnabled?(window.removeEventListener("scroll",this._handleCloseBound,!0),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),this._animateOutToolbar()):this._animateOutFAB(),this.isOpen=!1)}},{key:"_animateInFAB",value:function(){var o=this;this.$el.addClass("active");var a=0;this.$floatingBtnsReverse.each(function(l){e({targets:l,opacity:1,scale:[.4,1],translateY:[o.offsetY,0],translateX:[o.offsetX,0],duration:275,delay:a,easing:"easeInOutQuad"}),a+=40})}},{key:"_animateOutFAB",value:function(){var o=this;this.$floatingBtnsReverse.each(function(a){e.remove(a),e({targets:a,opacity:0,scale:.4,translateY:o.offsetY,translateX:o.offsetX,duration:175,easing:"easeOutQuad",complete:function(){o.$el.removeClass("active")}})})}},{key:"_animateInToolbar",value:function(){var o,a=this,l=window.innerWidth,c=window.innerHeight,u=this.el.getBoundingClientRect(),f=t('<div class="fab-backdrop"></div>'),g=this.$anchor.css("background-color");this.$anchor.append(f),this.offsetX=u.left-l/2+u.width/2,this.offsetY=c-u.bottom,o=l/f[0].clientWidth,this.btnBottom=u.bottom,this.btnLeft=u.left,this.btnWidth=u.width,this.$el.addClass("active"),this.$el.css({"text-align":"center",width:"100%",bottom:0,left:0,transform:"translateX("+this.offsetX+"px)",transition:"none"}),this.$anchor.css({transform:"translateY("+-this.offsetY+"px)",transition:"none"}),f.css({"background-color":g}),setTimeout(function(){a.$el.css({transform:"",transition:"transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s"}),a.$anchor.css({overflow:"visible",transform:"",transition:"transform .2s"}),setTimeout(function(){a.$el.css({overflow:"hidden","background-color":g}),f.css({transform:"scale("+o+")",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"}),a.$menu.children("li").children("a").css({opacity:1}),a._handleDocumentClickBound=a._handleDocumentClick.bind(a),window.addEventListener("scroll",a._handleCloseBound,!0),document.body.addEventListener("click",a._handleDocumentClickBound,!0)},100)},0)}},{key:"_animateOutToolbar",value:function(){var o=this,a=window.innerWidth,l=window.innerHeight,c=this.$el.find(".fab-backdrop"),u=this.$anchor.css("background-color");this.offsetX=this.btnLeft-a/2+this.btnWidth/2,this.offsetY=l-this.btnBottom,this.$el.removeClass("active"),this.$el.css({"background-color":"transparent",transition:"none"}),this.$anchor.css({transition:"none"}),c.css({transform:"scale(0)","background-color":u}),this.$menu.children("li").children("a").css({opacity:""}),setTimeout(function(){c.remove(),o.$el.css({"text-align":"",width:"",bottom:"",left:"",overflow:"","background-color":"",transform:"translate3d("+-o.offsetX+"px,0,0)"}),o.$anchor.css({overflow:"",transform:"translate3d(0,"+o.offsetY+"px,0)"}),setTimeout(function(){o.$el.css({transform:"translate3d(0,0,0)",transition:"transform .2s"}),o.$anchor.css({transform:"translate3d(0,0,0)",transition:"transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)"})},20)},200)}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_FloatingActionButton}},{key:"defaults",get:function(){return n}}]),s}();M.FloatingActionButton=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"floatingActionButton","M_FloatingActionButton")}(cash,M.anime),function(t){var e={autoClose:!1,format:"mmm dd, yyyy",parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:10,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,container:null,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"\u2039",nextMonth:"\u203A",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));(a.el.M_Datepicker=a).options=t.extend({},r.defaults,o),o&&o.hasOwnProperty("i18n")&&typeof o.i18n=="object"&&(a.options.i18n=t.extend({},r.defaults.i18n,o.i18n)),a.options.minDate&&a.options.minDate.setHours(0,0,0,0),a.options.maxDate&&a.options.maxDate.setHours(0,0,0,0),a.id=M.guid(),a._setupVariables(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupEventHandlers(),a.options.defaultDate||(a.options.defaultDate=new Date(Date.parse(a.el.value)));var l=a.options.defaultDate;return r._isDate(l)?a.options.setDefaultDate?(a.setDate(l,!0),a.setInputValue()):a.gotoDate(l):a.gotoDate(new Date),a.isOpen=!1,a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.destroySelects(),this.el.M_Datepicker=void 0}},{key:"destroySelects",value:function(){var s=this.calendarEl.querySelector(".orig-select-year");s&&M.FormSelect.getInstance(s).destroy();var o=this.calendarEl.querySelector(".orig-select-month");o&&M.FormSelect.getInstance(o).destroy()}},{key:"_insertHTMLIntoDOM",value:function(){this.options.showClearBtn&&(t(this.clearBtn).css({visibility:""}),this.clearBtn.innerHTML=this.options.i18n.clear),this.doneBtn.innerHTML=this.options.i18n.done,this.cancelBtn.innerHTML=this.options.i18n.cancel,this.options.container?this.$modalEl.appendTo(this.options.container):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var s=this;this.modalEl.id="modal-"+this.id,this.modal=M.Modal.init(this.modalEl,{onCloseEnd:function(){s.isOpen=!1}})}},{key:"toString",value:function(s){var o=this;return s=s||this.options.format,r._isDate(this.date)?s.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g).map(function(a){return o.formats[a]?o.formats[a]():a}).join(""):""}},{key:"setDate",value:function(s,o){if(!s)return this.date=null,this._renderDateDisplay(),this.draw();if(typeof s=="string"&&(s=new Date(Date.parse(s))),r._isDate(s)){var a=this.options.minDate,l=this.options.maxDate;r._isDate(a)&&s<a?s=a:r._isDate(l)&&l<s&&(s=l),this.date=new Date(s.getTime()),this._renderDateDisplay(),r._setToStartOfDay(this.date),this.gotoDate(this.date),o||typeof this.options.onSelect!="function"||this.options.onSelect.call(this,this.date)}}},{key:"setInputValue",value:function(){this.el.value=this.toString(),this.$el.trigger("change",{firedBy:this})}},{key:"_renderDateDisplay",value:function(){var s=r._isDate(this.date)?this.date:new Date,o=this.options.i18n,a=o.weekdaysShort[s.getDay()],l=o.monthsShort[s.getMonth()],c=s.getDate();this.yearTextEl.innerHTML=s.getFullYear(),this.dateTextEl.innerHTML=a+", "+l+" "+c}},{key:"gotoDate",value:function(s){var o=!0;if(r._isDate(s)){if(this.calendars){var a=new Date(this.calendars[0].year,this.calendars[0].month,1),l=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),c=s.getTime();l.setMonth(l.getMonth()+1),l.setDate(l.getDate()-1),o=c<a.getTime()||l.getTime()<c}o&&(this.calendars=[{month:s.getMonth(),year:s.getFullYear()}]),this.adjustCalendars()}}},{key:"adjustCalendars",value:function(){this.calendars[0]=this.adjustCalendar(this.calendars[0]),this.draw()}},{key:"adjustCalendar",value:function(s){return s.month<0&&(s.year-=Math.ceil(Math.abs(s.month)/12),s.month+=12),11<s.month&&(s.year+=Math.floor(Math.abs(s.month)/12),s.month-=12),s}},{key:"nextMonth",value:function(){this.calendars[0].month++,this.adjustCalendars()}},{key:"prevMonth",value:function(){this.calendars[0].month--,this.adjustCalendars()}},{key:"render",value:function(s,o,a){var l=this.options,c=new Date,u=r._getDaysInMonth(s,o),f=new Date(s,o,1).getDay(),g=[],v=[];r._setToStartOfDay(c),0<l.firstDay&&(f-=l.firstDay)<0&&(f+=7);for(var C=o===0?11:o-1,w=o===11?0:o+1,O=o===0?s-1:s,U=o===11?s+1:s,P=r._getDaysInMonth(O,C),x=u+f,K=x;7<K;)K-=7;x+=7-K;for(var J=!1,Q=0,ae=0;Q<x;Q++){var q=new Date(s,o,Q-f+1),ie=!!r._isDate(this.date)&&r._compareDates(q,this.date),re=r._compareDates(q,c),ue=l.events.indexOf(q.toDateString())!==-1,de=Q<f||u+f<=Q,Y=Q-f+1,he=o,_e=s,le=l.startRange&&r._compareDates(l.startRange,q),te=l.endRange&&r._compareDates(l.endRange,q),se=l.startRange&&l.endRange&&l.startRange<q&&q<l.endRange;de&&(Q<f?(Y=P+Y,he=C,_e=O):(Y-=u,he=w,_e=U));var pe={day:Y,month:he,year:_e,hasEvent:ue,isSelected:ie,isToday:re,isDisabled:l.minDate&&q<l.minDate||l.maxDate&&q>l.maxDate||l.disableWeekends&&r._isWeekend(q)||l.disableDayFn&&l.disableDayFn(q),isEmpty:de,isStartRange:le,isEndRange:te,isInRange:se,showDaysInNextAndPreviousMonths:l.showDaysInNextAndPreviousMonths};v.push(this.renderDay(pe)),++ae==7&&(g.push(this.renderRow(v,l.isRTL,J)),ae=0,J=!(v=[]))}return this.renderTable(l,g,a)}},{key:"renderDay",value:function(s){var o=[],a="false";if(s.isEmpty){if(!s.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';o.push("is-outside-current-month"),o.push("is-selection-disabled")}return s.isDisabled&&o.push("is-disabled"),s.isToday&&o.push("is-today"),s.isSelected&&(o.push("is-selected"),a="true"),s.hasEvent&&o.push("has-event"),s.isInRange&&o.push("is-inrange"),s.isStartRange&&o.push("is-startrange"),s.isEndRange&&o.push("is-endrange"),'<td data-day="'+s.day+'" class="'+o.join(" ")+'" aria-selected="'+a+'"><button class="datepicker-day-button" type="button" data-year="'+s.year+'" data-month="'+s.month+'" data-day="'+s.day+'">'+s.day+"</button></td>"}},{key:"renderRow",value:function(s,o,a){return'<tr class="datepicker-row'+(a?" is-selected":"")+'">'+(o?s.reverse():s).join("")+"</tr>"}},{key:"renderTable",value:function(s,o,a){return'<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="'+a+'">'+this.renderHead(s)+this.renderBody(o)+"</table></div>"}},{key:"renderHead",value:function(s){var o=void 0,a=[];for(o=0;o<7;o++)a.push('<th scope="col"><abbr title="'+this.renderDayName(s,o)+'">'+this.renderDayName(s,o,!0)+"</abbr></th>");return"<thead><tr>"+(s.isRTL?a.reverse():a).join("")+"</tr></thead>"}},{key:"renderBody",value:function(s){return"<tbody>"+s.join("")+"</tbody>"}},{key:"renderTitle",value:function(s,o,a,l,c,u){var f,g,v=void 0,C=void 0,w=void 0,O=this.options,U=a===O.minYear,P=a===O.maxYear,x='<div id="'+u+'" class="datepicker-controls" role="heading" aria-live="assertive">',K=!0,J=!0;for(w=[],v=0;v<12;v++)w.push('<option value="'+(a===c?v-o:12+v-o)+'"'+(v===l?' selected="selected"':"")+(U&&v<O.minMonth||P&&v>O.maxMonth?'disabled="disabled"':"")+">"+O.i18n.months[v]+"</option>");for(f='<select class="datepicker-select orig-select-month" tabindex="-1">'+w.join("")+"</select>",t.isArray(O.yearRange)?(v=O.yearRange[0],C=O.yearRange[1]+1):(v=a-O.yearRange,C=1+a+O.yearRange),w=[];v<C&&v<=O.maxYear;v++)v>=O.minYear&&w.push('<option value="'+v+'" '+(v===a?'selected="selected"':"")+">"+v+"</option>");return g='<select class="datepicker-select orig-select-year" tabindex="-1">'+w.join("")+"</select>",x+='<button class="month-prev'+(K?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg></button>',x+='<div class="selects-container">',O.showMonthAfterYear?x+=g+f:x+=f+g,x+="</div>",U&&(l===0||O.minMonth>=l)&&(K=!1),P&&(l===11||O.maxMonth<=l)&&(J=!1),(x+='<button class="month-next'+(J?"":" is-disabled")+'" type="button"><svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg></button>')+"</div>"}},{key:"draw",value:function(s){if(this.isOpen||s){var o,a=this.options,l=a.minYear,c=a.maxYear,u=a.minMonth,f=a.maxMonth,g="";this._y<=l&&(this._y=l,!isNaN(u)&&this._m<u&&(this._m=u)),this._y>=c&&(this._y=c,!isNaN(f)&&this._m>f&&(this._m=f)),o="datepicker-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var v=0;v<1;v++)this._renderDateDisplay(),g+=this.renderTitle(this,v,this.calendars[v].year,this.calendars[v].month,this.calendars[0].year,o)+this.render(this.calendars[v].year,this.calendars[v].month,o);this.destroySelects(),this.calendarEl.innerHTML=g;var C=this.calendarEl.querySelector(".orig-select-year"),w=this.calendarEl.querySelector(".orig-select-month");M.FormSelect.init(C,{classes:"select-year",dropdownOptions:{container:document.body,constrainWidth:!1}}),M.FormSelect.init(w,{classes:"select-month",dropdownOptions:{container:document.body,constrainWidth:!1}}),C.addEventListener("change",this._handleYearChange.bind(this)),w.addEventListener("change",this._handleMonthChange.bind(this)),typeof this.options.onDraw=="function"&&this.options.onDraw(this)}}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleInputChangeBound=this._handleInputChange.bind(this),this._handleCalendarClickBound=this._handleCalendarClick.bind(this),this._finishSelectionBound=this._finishSelection.bind(this),this._handleMonthChange=this._handleMonthChange.bind(this),this._closeBound=this.close.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.el.addEventListener("change",this._handleInputChangeBound),this.calendarEl.addEventListener("click",this._handleCalendarClickBound),this.doneBtn.addEventListener("click",this._finishSelectionBound),this.cancelBtn.addEventListener("click",this._closeBound),this.options.showClearBtn&&(this._handleClearClickBound=this._handleClearClick.bind(this),this.clearBtn.addEventListener("click",this._handleClearClickBound))}},{key:"_setupVariables",value:function(){var s=this;this.$modalEl=t(r._template),this.modalEl=this.$modalEl[0],this.calendarEl=this.modalEl.querySelector(".datepicker-calendar"),this.yearTextEl=this.modalEl.querySelector(".year-text"),this.dateTextEl=this.modalEl.querySelector(".date-text"),this.options.showClearBtn&&(this.clearBtn=this.modalEl.querySelector(".datepicker-clear")),this.doneBtn=this.modalEl.querySelector(".datepicker-done"),this.cancelBtn=this.modalEl.querySelector(".datepicker-cancel"),this.formats={d:function(){return s.date.getDate()},dd:function(){var o=s.date.getDate();return(o<10?"0":"")+o},ddd:function(){return s.options.i18n.weekdaysShort[s.date.getDay()]},dddd:function(){return s.options.i18n.weekdays[s.date.getDay()]},m:function(){return s.date.getMonth()+1},mm:function(){var o=s.date.getMonth()+1;return(o<10?"0":"")+o},mmm:function(){return s.options.i18n.monthsShort[s.date.getMonth()]},mmmm:function(){return s.options.i18n.months[s.date.getMonth()]},yy:function(){return(""+s.date.getFullYear()).slice(2)},yyyy:function(){return s.date.getFullYear()}}}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound),this.el.removeEventListener("change",this._handleInputChangeBound),this.calendarEl.removeEventListener("click",this._handleCalendarClickBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(s){s.which===M.keys.ENTER&&(s.preventDefault(),this.open())}},{key:"_handleCalendarClick",value:function(s){if(this.isOpen){var o=t(s.target);o.hasClass("is-disabled")||(!o.hasClass("datepicker-day-button")||o.hasClass("is-empty")||o.parent().hasClass("is-disabled")?o.closest(".month-prev").length?this.prevMonth():o.closest(".month-next").length&&this.nextMonth():(this.setDate(new Date(s.target.getAttribute("data-year"),s.target.getAttribute("data-month"),s.target.getAttribute("data-day"))),this.options.autoClose&&this._finishSelection()))}}},{key:"_handleClearClick",value:function(){this.date=null,this.setInputValue(),this.close()}},{key:"_handleMonthChange",value:function(s){this.gotoMonth(s.target.value)}},{key:"_handleYearChange",value:function(s){this.gotoYear(s.target.value)}},{key:"gotoMonth",value:function(s){isNaN(s)||(this.calendars[0].month=parseInt(s,10),this.adjustCalendars())}},{key:"gotoYear",value:function(s){isNaN(s)||(this.calendars[0].year=parseInt(s,10),this.adjustCalendars())}},{key:"_handleInputChange",value:function(s){var o=void 0;s.firedBy!==this&&(o=this.options.parse?this.options.parse(this.el.value,this.options.format):new Date(Date.parse(this.el.value)),r._isDate(o)&&this.setDate(o))}},{key:"renderDayName",value:function(s,o,a){for(o+=s.firstDay;7<=o;)o-=7;return a?s.i18n.weekdaysAbbrev[o]:s.i18n.weekdays[o]}},{key:"_finishSelection",value:function(){this.setInputValue(),this.close()}},{key:"open",value:function(){if(!this.isOpen)return this.isOpen=!0,typeof this.options.onOpen=="function"&&this.options.onOpen.call(this),this.draw(),this.modal.open(),this}},{key:"close",value:function(){if(this.isOpen)return this.isOpen=!1,typeof this.options.onClose=="function"&&this.options.onClose.call(this),this.modal.close(),this}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"_isDate",value:function(s){return/Date/.test(Object.prototype.toString.call(s))&&!isNaN(s.getTime())}},{key:"_isWeekend",value:function(s){var o=s.getDay();return o===0||o===6}},{key:"_setToStartOfDay",value:function(s){r._isDate(s)&&s.setHours(0,0,0,0)}},{key:"_getDaysInMonth",value:function(s,o){return[31,r._isLeapYear(s)?29:28,31,30,31,30,31,31,30,31,30,31][o]}},{key:"_isLeapYear",value:function(s){return s%4==0&&s%100!=0||s%400==0}},{key:"_compareDates",value:function(s,o){return s.getTime()===o.getTime()}},{key:"_setToStartOfDay",value:function(s){r._isDate(s)&&s.setHours(0,0,0,0)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Datepicker}},{key:"defaults",get:function(){return e}}]),r}();n._template=['<div class= "modal datepicker-modal">','<div class="modal-content datepicker-container">','<div class="datepicker-date-display">','<span class="year-text"></span>','<span class="date-text"></span>',"</div>",'<div class="datepicker-calendar-container">','<div class="datepicker-calendar"></div>','<div class="datepicker-footer">','<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>','<div class="confirmation-btns">','<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>','<button class="btn-flat datepicker-done waves-effect" type="button"></button>',"</div>","</div>","</div>","</div>","</div>"].join(""),M.Datepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"datepicker","M_Datepicker")}(cash),function(t){var e={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpenStart:null,onOpenEnd:null,onCloseStart:null,onCloseEnd:null,onSelect:null},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Timepicker=a).options=t.extend({},r.defaults,o),a.id=M.guid(),a._insertHTMLIntoDOM(),a._setupModal(),a._setupVariables(),a._setupEventHandlers(),a._clockSetup(),a._pickerSetup(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.modal.destroy(),t(this.modalEl).remove(),this.el.M_Timepicker=void 0}},{key:"_setupEventHandlers",value:function(){this._handleInputKeydownBound=this._handleInputKeydown.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),this._handleClockClickStartBound=this._handleClockClickStart.bind(this),this._handleDocumentClickMoveBound=this._handleDocumentClickMove.bind(this),this._handleDocumentClickEndBound=this._handleDocumentClickEnd.bind(this),this.el.addEventListener("click",this._handleInputClickBound),this.el.addEventListener("keydown",this._handleInputKeydownBound),this.plate.addEventListener("mousedown",this._handleClockClickStartBound),this.plate.addEventListener("touchstart",this._handleClockClickStartBound),t(this.spanHours).on("click",this.showView.bind(this,"hours")),t(this.spanMinutes).on("click",this.showView.bind(this,"minutes"))}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleInputClickBound),this.el.removeEventListener("keydown",this._handleInputKeydownBound)}},{key:"_handleInputClick",value:function(){this.open()}},{key:"_handleInputKeydown",value:function(s){s.which===M.keys.ENTER&&(s.preventDefault(),this.open())}},{key:"_handleClockClickStart",value:function(s){s.preventDefault();var o=this.plate.getBoundingClientRect(),a=o.left,l=o.top;this.x0=a+this.options.dialRadius,this.y0=l+this.options.dialRadius,this.moved=!1;var c=r._Pos(s);this.dx=c.x-this.x0,this.dy=c.y-this.y0,this.setHand(this.dx,this.dy,!1),document.addEventListener("mousemove",this._handleDocumentClickMoveBound),document.addEventListener("touchmove",this._handleDocumentClickMoveBound),document.addEventListener("mouseup",this._handleDocumentClickEndBound),document.addEventListener("touchend",this._handleDocumentClickEndBound)}},{key:"_handleDocumentClickMove",value:function(s){s.preventDefault();var o=r._Pos(s),a=o.x-this.x0,l=o.y-this.y0;this.moved=!0,this.setHand(a,l,!1,!0)}},{key:"_handleDocumentClickEnd",value:function(s){var o=this;s.preventDefault(),document.removeEventListener("mouseup",this._handleDocumentClickEndBound),document.removeEventListener("touchend",this._handleDocumentClickEndBound);var a=r._Pos(s),l=a.x-this.x0,c=a.y-this.y0;this.moved&&l===this.dx&&c===this.dy&&this.setHand(l,c),this.currentView==="hours"?this.showView("minutes",this.options.duration/2):this.options.autoClose&&(t(this.minutesView).addClass("timepicker-dial-out"),setTimeout(function(){o.done()},this.options.duration/2)),typeof this.options.onSelect=="function"&&this.options.onSelect.call(this,this.hours,this.minutes),document.removeEventListener("mousemove",this._handleDocumentClickMoveBound),document.removeEventListener("touchmove",this._handleDocumentClickMoveBound)}},{key:"_insertHTMLIntoDOM",value:function(){this.$modalEl=t(r._template),this.modalEl=this.$modalEl[0],this.modalEl.id="modal-"+this.id;var s=document.querySelector(this.options.container);this.options.container&&s?this.$modalEl.appendTo(s):this.$modalEl.insertBefore(this.el)}},{key:"_setupModal",value:function(){var s=this;this.modal=M.Modal.init(this.modalEl,{onOpenStart:this.options.onOpenStart,onOpenEnd:this.options.onOpenEnd,onCloseStart:this.options.onCloseStart,onCloseEnd:function(){typeof s.options.onCloseEnd=="function"&&s.options.onCloseEnd.call(s),s.isOpen=!1}})}},{key:"_setupVariables",value:function(){this.currentView="hours",this.vibrate=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,this._canvas=this.modalEl.querySelector(".timepicker-canvas"),this.plate=this.modalEl.querySelector(".timepicker-plate"),this.hoursView=this.modalEl.querySelector(".timepicker-hours"),this.minutesView=this.modalEl.querySelector(".timepicker-minutes"),this.spanHours=this.modalEl.querySelector(".timepicker-span-hours"),this.spanMinutes=this.modalEl.querySelector(".timepicker-span-minutes"),this.spanAmPm=this.modalEl.querySelector(".timepicker-span-am-pm"),this.footer=this.modalEl.querySelector(".timepicker-footer"),this.amOrPm="PM"}},{key:"_pickerSetup",value:function(){var s=t('<button class="btn-flat timepicker-clear waves-effect" style="visibility: hidden;" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.clear+"</button>").appendTo(this.footer).on("click",this.clear.bind(this));this.options.showClearBtn&&s.css({visibility:""});var o=t('<div class="confirmation-btns"></div>');t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.cancel+"</button>").appendTo(o).on("click",this.close.bind(this)),t('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="'+(this.options.twelveHour?"3":"1")+'">'+this.options.i18n.done+"</button>").appendTo(o).on("click",this.done.bind(this)),o.appendTo(this.footer)}},{key:"_clockSetup",value:function(){this.options.twelveHour&&(this.$amBtn=t('<div class="am-btn">AM</div>'),this.$pmBtn=t('<div class="pm-btn">PM</div>'),this.$amBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm),this.$pmBtn.on("click",this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm)),this._buildHoursView(),this._buildMinutesView(),this._buildSVGClock()}},{key:"_buildSVGClock",value:function(){var s=this.options.dialRadius,o=this.options.tickRadius,a=2*s,l=r._createSVGEl("svg");l.setAttribute("class","timepicker-svg"),l.setAttribute("width",a),l.setAttribute("height",a);var c=r._createSVGEl("g");c.setAttribute("transform","translate("+s+","+s+")");var u=r._createSVGEl("circle");u.setAttribute("class","timepicker-canvas-bearing"),u.setAttribute("cx",0),u.setAttribute("cy",0),u.setAttribute("r",4);var f=r._createSVGEl("line");f.setAttribute("x1",0),f.setAttribute("y1",0);var g=r._createSVGEl("circle");g.setAttribute("class","timepicker-canvas-bg"),g.setAttribute("r",o),c.appendChild(f),c.appendChild(g),c.appendChild(u),l.appendChild(c),this._canvas.appendChild(l),this.hand=f,this.bg=g,this.bearing=u,this.g=c}},{key:"_buildHoursView",value:function(){var s=t('<div class="timepicker-tick"></div>');if(this.options.twelveHour)for(var o=1;o<13;o+=1){var a=s.clone(),l=o/6*Math.PI,c=this.options.outerRadius;a.css({left:this.options.dialRadius+Math.sin(l)*c-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(l)*c-this.options.tickRadius+"px"}),a.html(o===0?"00":o),this.hoursView.appendChild(a[0])}else for(var u=0;u<24;u+=1){var f=s.clone(),g=u/6*Math.PI,v=0<u&&u<13?this.options.innerRadius:this.options.outerRadius;f.css({left:this.options.dialRadius+Math.sin(g)*v-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(g)*v-this.options.tickRadius+"px"}),f.html(u===0?"00":u),this.hoursView.appendChild(f[0])}}},{key:"_buildMinutesView",value:function(){for(var s=t('<div class="timepicker-tick"></div>'),o=0;o<60;o+=5){var a=s.clone(),l=o/30*Math.PI;a.css({left:this.options.dialRadius+Math.sin(l)*this.options.outerRadius-this.options.tickRadius+"px",top:this.options.dialRadius-Math.cos(l)*this.options.outerRadius-this.options.tickRadius+"px"}),a.html(r._addLeadingZero(o)),this.minutesView.appendChild(a[0])}}},{key:"_handleAmPmClick",value:function(s){var o=t(s.target);this.amOrPm=o.hasClass("am-btn")?"AM":"PM",this._updateAmPmView()}},{key:"_updateAmPmView",value:function(){this.options.twelveHour&&(this.$amBtn.toggleClass("text-primary",this.amOrPm==="AM"),this.$pmBtn.toggleClass("text-primary",this.amOrPm==="PM"))}},{key:"_updateTimeFromInput",value:function(){var s=((this.el.value||this.options.defaultTime||"")+"").split(":");if(this.options.twelveHour&&s[1]!==void 0&&(0<s[1].toUpperCase().indexOf("AM")?this.amOrPm="AM":this.amOrPm="PM",s[1]=s[1].replace("AM","").replace("PM","")),s[0]==="now"){var o=new Date(+new Date+this.options.fromNow);s=[o.getHours(),o.getMinutes()],this.options.twelveHour&&(this.amOrPm=12<=s[0]&&s[0]<24?"PM":"AM")}this.hours=+s[0]||0,this.minutes=+s[1]||0,this.spanHours.innerHTML=this.hours,this.spanMinutes.innerHTML=r._addLeadingZero(this.minutes),this._updateAmPmView()}},{key:"showView",value:function(s,o){s==="minutes"&&t(this.hoursView).css("visibility");var a=s==="hours",l=a?this.hoursView:this.minutesView,c=a?this.minutesView:this.hoursView;this.currentView=s,t(this.spanHours).toggleClass("text-primary",a),t(this.spanMinutes).toggleClass("text-primary",!a),c.classList.add("timepicker-dial-out"),t(l).css("visibility","visible").removeClass("timepicker-dial-out"),this.resetClock(o),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){t(c).css("visibility","hidden")},this.options.duration)}},{key:"resetClock",value:function(s){var o=this.currentView,a=this[o],l=o==="hours",c=a*(Math.PI/(l?6:30)),u=l&&0<a&&a<13?this.options.innerRadius:this.options.outerRadius,f=Math.sin(c)*u,g=-Math.cos(c)*u,v=this;s?(t(this.canvas).addClass("timepicker-canvas-out"),setTimeout(function(){t(v.canvas).removeClass("timepicker-canvas-out"),v.setHand(f,g)},s)):this.setHand(f,g)}},{key:"setHand",value:function(s,o,a){var l=this,c=Math.atan2(s,-o),u=this.currentView==="hours",f=Math.PI/(u||a?6:30),g=Math.sqrt(s*s+o*o),v=u&&g<(this.options.outerRadius+this.options.innerRadius)/2,C=v?this.options.innerRadius:this.options.outerRadius;this.options.twelveHour&&(C=this.options.outerRadius),c<0&&(c=2*Math.PI+c);var w=Math.round(c/f);c=w*f,this.options.twelveHour?u?w===0&&(w=12):(a&&(w*=5),w===60&&(w=0)):u?(w===12&&(w=0),w=v?w===0?12:w:w===0?0:w+12):(a&&(w*=5),w===60&&(w=0)),this[this.currentView]!==w&&this.vibrate&&this.options.vibrate&&(this.vibrateTimer||(navigator[this.vibrate](10),this.vibrateTimer=setTimeout(function(){l.vibrateTimer=null},100))),this[this.currentView]=w,u?this.spanHours.innerHTML=w:this.spanMinutes.innerHTML=r._addLeadingZero(w);var O=Math.sin(c)*(C-this.options.tickRadius),U=-Math.cos(c)*(C-this.options.tickRadius),P=Math.sin(c)*C,x=-Math.cos(c)*C;this.hand.setAttribute("x2",O),this.hand.setAttribute("y2",U),this.bg.setAttribute("cx",P),this.bg.setAttribute("cy",x)}},{key:"open",value:function(){this.isOpen||(this.isOpen=!0,this._updateTimeFromInput(),this.showView("hours"),this.modal.open())}},{key:"close",value:function(){this.isOpen&&(this.isOpen=!1,this.modal.close())}},{key:"done",value:function(s,o){var a=this.el.value,l=o?"":r._addLeadingZero(this.hours)+":"+r._addLeadingZero(this.minutes);this.time=l,!o&&this.options.twelveHour&&(l=l+" "+this.amOrPm),(this.el.value=l)!==a&&this.$el.trigger("change"),this.close(),this.el.focus()}},{key:"clear",value:function(){this.done(null,!0)}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"_addLeadingZero",value:function(s){return(s<10?"0":"")+s}},{key:"_createSVGEl",value:function(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}},{key:"_Pos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?{x:s.targetTouches[0].clientX,y:s.targetTouches[0].clientY}:{x:s.clientX,y:s.clientY}}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Timepicker}},{key:"defaults",get:function(){return e}}]),r}();n._template=['<div class= "modal timepicker-modal">','<div class="modal-content timepicker-container">','<div class="timepicker-digital-display">','<div class="timepicker-text-container">','<div class="timepicker-display-column">','<span class="timepicker-span-hours text-primary"></span>',":",'<span class="timepicker-span-minutes"></span>',"</div>",'<div class="timepicker-display-column timepicker-display-am-pm">','<div class="timepicker-span-am-pm"></div>',"</div>","</div>","</div>",'<div class="timepicker-analog-display">','<div class="timepicker-plate">','<div class="timepicker-canvas"></div>','<div class="timepicker-dial timepicker-hours"></div>','<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>',"</div>",'<div class="timepicker-footer"></div>',"</div>","</div>","</div>"].join(""),M.Timepicker=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"timepicker","M_Timepicker")}(cash),function(t){var e={},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_CharacterCounter=a).options=t.extend({},r.defaults,o),a.isInvalid=!1,a.isValidLength=!1,a._setupCounter(),a._setupEventHandlers(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.CharacterCounter=void 0,this._removeCounter()}},{key:"_setupEventHandlers",value:function(){this._handleUpdateCounterBound=this.updateCounter.bind(this),this.el.addEventListener("focus",this._handleUpdateCounterBound,!0),this.el.addEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("focus",this._handleUpdateCounterBound,!0),this.el.removeEventListener("input",this._handleUpdateCounterBound,!0)}},{key:"_setupCounter",value:function(){this.counterEl=document.createElement("span"),t(this.counterEl).addClass("character-counter").css({float:"right","font-size":"12px",height:1}),this.$el.parent().append(this.counterEl)}},{key:"_removeCounter",value:function(){t(this.counterEl).remove()}},{key:"updateCounter",value:function(){var s=+this.$el.attr("data-length"),o=this.el.value.length;this.isValidLength=o<=s;var a=o;s&&(a+="/"+s,this._validateInput()),t(this.counterEl).html(a)}},{key:"_validateInput",value:function(){this.isValidLength&&this.isInvalid?(this.isInvalid=!1,this.$el.removeClass("invalid")):this.isValidLength||this.isInvalid||(this.isInvalid=!0,this.$el.removeClass("valid"),this.$el.addClass("invalid"))}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_CharacterCounter}},{key:"defaults",get:function(){return e}}]),r}();M.CharacterCounter=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"characterCounter","M_CharacterCounter")}(cash),function(t){var e={duration:200,dist:-100,shift:0,padding:0,numVisible:5,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_Carousel=a).options=t.extend({},r.defaults,o),a.hasMultipleSlides=1<a.$el.find(".carousel-item").length,a.showIndicators=a.options.indicators&&a.hasMultipleSlides,a.noWrap=a.options.noWrap||!a.hasMultipleSlides,a.pressed=!1,a.dragged=!1,a.offset=a.target=0,a.images=[],a.itemWidth=a.$el.find(".carousel-item").first().innerWidth(),a.itemHeight=a.$el.find(".carousel-item").first().innerHeight(),a.dim=2*a.itemWidth+a.options.padding||1,a._autoScrollBound=a._autoScroll.bind(a),a._trackBound=a._track.bind(a),a.options.fullWidth&&(a.options.dist=0,a._setCarouselHeight(),a.showIndicators&&a.$el.find(".carousel-fixed-item").addClass("with-indicators")),a.$indicators=t('<ul class="indicators"></ul>'),a.$el.find(".carousel-item").each(function(l,c){if(a.images.push(l),a.showIndicators){var u=t('<li class="indicator-item"></li>');c===0&&u[0].classList.add("active"),a.$indicators.append(u)}}),a.showIndicators&&a.$el.append(a.$indicators),a.count=a.images.length,a.options.numVisible=Math.min(a.count,a.options.numVisible),a.xform="transform",["webkit","Moz","O","ms"].every(function(l){var c=l+"Transform";return document.body.style[c]===void 0||(a.xform=c,!1)}),a._setupEventHandlers(),a._scroll(a.offset),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.M_Carousel=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleCarouselTapBound=this._handleCarouselTap.bind(this),this._handleCarouselDragBound=this._handleCarouselDrag.bind(this),this._handleCarouselReleaseBound=this._handleCarouselRelease.bind(this),this._handleCarouselClickBound=this._handleCarouselClick.bind(this),window.ontouchstart!==void 0&&(this.el.addEventListener("touchstart",this._handleCarouselTapBound),this.el.addEventListener("touchmove",this._handleCarouselDragBound),this.el.addEventListener("touchend",this._handleCarouselReleaseBound)),this.el.addEventListener("mousedown",this._handleCarouselTapBound),this.el.addEventListener("mousemove",this._handleCarouselDragBound),this.el.addEventListener("mouseup",this._handleCarouselReleaseBound),this.el.addEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.addEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&(this._handleIndicatorClickBound=this._handleIndicatorClick.bind(this),this.$indicators.find(".indicator-item").each(function(a,l){a.addEventListener("click",s._handleIndicatorClickBound)}));var o=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=o.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){var s=this;window.ontouchstart!==void 0&&(this.el.removeEventListener("touchstart",this._handleCarouselTapBound),this.el.removeEventListener("touchmove",this._handleCarouselDragBound),this.el.removeEventListener("touchend",this._handleCarouselReleaseBound)),this.el.removeEventListener("mousedown",this._handleCarouselTapBound),this.el.removeEventListener("mousemove",this._handleCarouselDragBound),this.el.removeEventListener("mouseup",this._handleCarouselReleaseBound),this.el.removeEventListener("mouseleave",this._handleCarouselReleaseBound),this.el.removeEventListener("click",this._handleCarouselClickBound),this.showIndicators&&this.$indicators&&this.$indicators.find(".indicator-item").each(function(o,a){o.removeEventListener("click",s._handleIndicatorClickBound)}),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleCarouselTap",value:function(s){s.type==="mousedown"&&t(s.target).is("img")&&s.preventDefault(),this.pressed=!0,this.dragged=!1,this.verticalDragged=!1,this.reference=this._xpos(s),this.referenceY=this._ypos(s),this.velocity=this.amplitude=0,this.frame=this.offset,this.timestamp=Date.now(),clearInterval(this.ticker),this.ticker=setInterval(this._trackBound,100)}},{key:"_handleCarouselDrag",value:function(s){var o=void 0,a=void 0,l=void 0;if(this.pressed)if(o=this._xpos(s),a=this._ypos(s),l=this.reference-o,Math.abs(this.referenceY-a)<30&&!this.verticalDragged)(2<l||l<-2)&&(this.dragged=!0,this.reference=o,this._scroll(this.offset+l));else{if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1;this.verticalDragged=!0}if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1}},{key:"_handleCarouselRelease",value:function(s){if(this.pressed)return this.pressed=!1,clearInterval(this.ticker),this.target=this.offset,(10<this.velocity||this.velocity<-10)&&(this.amplitude=.9*this.velocity,this.target=this.offset+this.amplitude),this.target=Math.round(this.target/this.dim)*this.dim,this.noWrap&&(this.target>=this.dim*(this.count-1)?this.target=this.dim*(this.count-1):this.target<0&&(this.target=0)),this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound),this.dragged&&(s.preventDefault(),s.stopPropagation()),!1}},{key:"_handleCarouselClick",value:function(s){if(this.dragged)return s.preventDefault(),s.stopPropagation(),!1;if(!this.options.fullWidth){var o=t(s.target).closest(".carousel-item").index();this._wrap(this.center)-o!==0&&(s.preventDefault(),s.stopPropagation()),this._cycleTo(o)}}},{key:"_handleIndicatorClick",value:function(s){s.stopPropagation();var o=t(s.target).closest(".indicator-item");o.length&&this._cycleTo(o.index())}},{key:"_handleResize",value:function(s){this.options.fullWidth?(this.itemWidth=this.$el.find(".carousel-item").first().innerWidth(),this.imageHeight=this.$el.find(".carousel-item.active").height(),this.dim=2*this.itemWidth+this.options.padding,this.offset=2*this.center*this.itemWidth,this.target=this.offset,this._setCarouselHeight(!0)):this._scroll()}},{key:"_setCarouselHeight",value:function(s){var o=this,a=this.$el.find(".carousel-item.active").length?this.$el.find(".carousel-item.active").first():this.$el.find(".carousel-item").first(),l=a.find("img").first();if(l.length)if(l[0].complete){var c=l.height();if(0<c)this.$el.css("height",c+"px");else{var u=l[0].naturalWidth,f=l[0].naturalHeight,g=this.$el.width()/u*f;this.$el.css("height",g+"px")}}else l.one("load",function(C,w){o.$el.css("height",C.offsetHeight+"px")});else if(!s){var v=a.height();this.$el.css("height",v+"px")}}},{key:"_xpos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientX:s.clientX}},{key:"_ypos",value:function(s){return s.targetTouches&&1<=s.targetTouches.length?s.targetTouches[0].clientY:s.clientY}},{key:"_wrap",value:function(s){return s>=this.count?s%this.count:s<0?this._wrap(this.count+s%this.count):s}},{key:"_track",value:function(){var s,o,a,l;o=(s=Date.now())-this.timestamp,this.timestamp=s,a=this.offset-this.frame,this.frame=this.offset,l=1e3*a/(1+o),this.velocity=.8*l+.2*this.velocity}},{key:"_autoScroll",value:function(){var s=void 0,o=void 0;this.amplitude&&(s=Date.now()-this.timestamp,2<(o=this.amplitude*Math.exp(-s/this.options.duration))||o<-2?(this._scroll(this.target-o),requestAnimationFrame(this._autoScrollBound)):this._scroll(this.target))}},{key:"_scroll",value:function(s){var o=this;this.$el.hasClass("scrolling")||this.el.classList.add("scrolling"),this.scrollingTimeout!=null&&window.clearTimeout(this.scrollingTimeout),this.scrollingTimeout=window.setTimeout(function(){o.$el.removeClass("scrolling")},this.options.duration);var a,l,c,u,f=void 0,g=void 0,v=void 0,C=void 0,w=void 0,O=void 0,U=this.center,P=1/this.options.numVisible;if(this.offset=typeof s=="number"?s:this.offset,this.center=Math.floor((this.offset+this.dim/2)/this.dim),u=-(c=(l=this.offset-this.center*this.dim)<0?1:-1)*l*2/this.dim,a=this.count>>1,this.options.fullWidth?(v="translateX(0)",O=1):(v="translateX("+(this.el.clientWidth-this.itemWidth)/2+"px) ",v+="translateY("+(this.el.clientHeight-this.itemHeight)/2+"px)",O=1-P*u),this.showIndicators){var x=this.center%this.count,K=this.$indicators.find(".indicator-item.active");K.index()!==x&&(K.removeClass("active"),this.$indicators.find(".indicator-item").eq(x)[0].classList.add("active"))}if(!this.noWrap||0<=this.center&&this.center<this.count){g=this.images[this._wrap(this.center)],t(g).hasClass("active")||(this.$el.find(".carousel-item").removeClass("active"),g.classList.add("active"));var J=v+" translateX("+-l/2+"px) translateX("+c*this.options.shift*u*f+"px) translateZ("+this.options.dist*u+"px)";this._updateItemStyle(g,O,0,J)}for(f=1;f<=a;++f){if(this.options.fullWidth?(C=this.options.dist,w=f===a&&l<0?1-u:1):(C=this.options.dist*(2*f+u*c),w=1-P*(2*f+u*c)),!this.noWrap||this.center+f<this.count){g=this.images[this._wrap(this.center+f)];var Q=v+" translateX("+(this.options.shift+(this.dim*f-l)/2)+"px) translateZ("+C+"px)";this._updateItemStyle(g,w,-f,Q)}if(this.options.fullWidth?(C=this.options.dist,w=f===a&&0<l?1-u:1):(C=this.options.dist*(2*f-u*c),w=1-P*(2*f-u*c)),!this.noWrap||0<=this.center-f){g=this.images[this._wrap(this.center-f)];var ae=v+" translateX("+(-this.options.shift+(-this.dim*f-l)/2)+"px) translateZ("+C+"px)";this._updateItemStyle(g,w,-f,ae)}}if(!this.noWrap||0<=this.center&&this.center<this.count){g=this.images[this._wrap(this.center)];var q=v+" translateX("+-l/2+"px) translateX("+c*this.options.shift*u+"px) translateZ("+this.options.dist*u+"px)";this._updateItemStyle(g,O,0,q)}var ie=this.$el.find(".carousel-item").eq(this._wrap(this.center));U!==this.center&&typeof this.options.onCycleTo=="function"&&this.options.onCycleTo.call(this,ie[0],this.dragged),typeof this.oneTimeCallback=="function"&&(this.oneTimeCallback.call(this,ie[0],this.dragged),this.oneTimeCallback=null)}},{key:"_updateItemStyle",value:function(s,o,a,l){s.style[this.xform]=l,s.style.zIndex=a,s.style.opacity=o,s.style.visibility="visible"}},{key:"_cycleTo",value:function(s,o){var a=this.center%this.count-s;this.noWrap||(a<0?Math.abs(a+this.count)<Math.abs(a)&&(a+=this.count):0<a&&Math.abs(a-this.count)<a&&(a-=this.count)),this.target=this.dim*Math.round(this.offset/this.dim),a<0?this.target+=this.dim*Math.abs(a):0<a&&(this.target-=this.dim*a),typeof o=="function"&&(this.oneTimeCallback=o),this.offset!==this.target&&(this.amplitude=this.target-this.offset,this.timestamp=Date.now(),requestAnimationFrame(this._autoScrollBound))}},{key:"next",value:function(s){(s===void 0||isNaN(s))&&(s=1);var o=this.center+s;if(o>=this.count||o<0){if(this.noWrap)return;o=this._wrap(o)}this._cycleTo(o)}},{key:"prev",value:function(s){(s===void 0||isNaN(s))&&(s=1);var o=this.center-s;if(o>=this.count||o<0){if(this.noWrap)return;o=this._wrap(o)}this._cycleTo(o)}},{key:"set",value:function(s,o){if((s===void 0||isNaN(s))&&(s=0),s>this.count||s<0){if(this.noWrap)return;s=this._wrap(s)}this._cycleTo(s,o)}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_Carousel}},{key:"defaults",get:function(){return e}}]),r}();M.Carousel=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"carousel","M_Carousel")}(cash),function(t){var e={onOpen:void 0,onClose:void 0},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return(a.el.M_TapTarget=a).options=t.extend({},r.defaults,o),a.isOpen=!1,a.$origin=t("#"+a.$el.attr("data-target")),a._setup(),a._calculatePositioning(),a._setupEventHandlers(),a}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this.el.TapTarget=void 0}},{key:"_setupEventHandlers",value:function(){this._handleDocumentClickBound=this._handleDocumentClick.bind(this),this._handleTargetClickBound=this._handleTargetClick.bind(this),this._handleOriginClickBound=this._handleOriginClick.bind(this),this.el.addEventListener("click",this._handleTargetClickBound),this.originEl.addEventListener("click",this._handleOriginClickBound);var s=M.throttle(this._handleResize,200);this._handleThrottledResizeBound=s.bind(this),window.addEventListener("resize",this._handleThrottledResizeBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("click",this._handleTargetClickBound),this.originEl.removeEventListener("click",this._handleOriginClickBound),window.removeEventListener("resize",this._handleThrottledResizeBound)}},{key:"_handleTargetClick",value:function(s){this.open()}},{key:"_handleOriginClick",value:function(s){this.close()}},{key:"_handleResize",value:function(s){this._calculatePositioning()}},{key:"_handleDocumentClick",value:function(s){t(s.target).closest(".tap-target-wrapper").length||(this.close(),s.preventDefault(),s.stopPropagation())}},{key:"_setup",value:function(){this.wrapper=this.$el.parent()[0],this.waveEl=t(this.wrapper).find(".tap-target-wave")[0],this.originEl=t(this.wrapper).find(".tap-target-origin")[0],this.contentEl=this.$el.find(".tap-target-content")[0],t(this.wrapper).hasClass(".tap-target-wrapper")||(this.wrapper=document.createElement("div"),this.wrapper.classList.add("tap-target-wrapper"),this.$el.before(t(this.wrapper)),this.wrapper.append(this.el)),this.contentEl||(this.contentEl=document.createElement("div"),this.contentEl.classList.add("tap-target-content"),this.$el.append(this.contentEl)),this.waveEl||(this.waveEl=document.createElement("div"),this.waveEl.classList.add("tap-target-wave"),this.originEl||(this.originEl=this.$origin.clone(!0,!0),this.originEl.addClass("tap-target-origin"),this.originEl.removeAttr("id"),this.originEl.removeAttr("style"),this.originEl=this.originEl[0],this.waveEl.append(this.originEl)),this.wrapper.append(this.waveEl))}},{key:"_calculatePositioning",value:function(){var s=this.$origin.css("position")==="fixed";if(!s)for(var o=this.$origin.parents(),a=0;a<o.length&&!(s=t(o[a]).css("position")=="fixed");a++);var l=this.$origin.outerWidth(),c=this.$origin.outerHeight(),u=s?this.$origin.offset().top-M.getDocumentScrollTop():this.$origin.offset().top,f=s?this.$origin.offset().left-M.getDocumentScrollLeft():this.$origin.offset().left,g=window.innerWidth,v=window.innerHeight,C=g/2,w=v/2,O=f<=C,U=C<f,P=u<=w,x=w<u,K=.25*g<=f&&f<=.75*g,J=this.$el.outerWidth(),Q=this.$el.outerHeight(),ae=u+c/2-Q/2,q=f+l/2-J/2,ie=s?"fixed":"absolute",re=K?J:J/2+l,ue=Q/2,de=P?Q/2:0,Y=O&&!K?J/2-l:0,he=l,_e=x?"bottom":"top",le=2*l,te=le,se=Q/2-te/2,pe=J/2-le/2,E={};E.top=P?ae+"px":"",E.right=U?g-q-J+"px":"",E.bottom=x?v-ae-Q+"px":"",E.left=O?q+"px":"",E.position=ie,t(this.wrapper).css(E),t(this.contentEl).css({width:re+"px",height:ue+"px",top:de+"px",right:"0px",bottom:"0px",left:Y+"px",padding:he+"px",verticalAlign:_e}),t(this.waveEl).css({top:se+"px",left:pe+"px",width:le+"px",height:te+"px"})}},{key:"open",value:function(){this.isOpen||(typeof this.options.onOpen=="function"&&this.options.onOpen.call(this,this.$origin[0]),this.isOpen=!0,this.wrapper.classList.add("open"),document.body.addEventListener("click",this._handleDocumentClickBound,!0),document.body.addEventListener("touchend",this._handleDocumentClickBound))}},{key:"close",value:function(){this.isOpen&&(typeof this.options.onClose=="function"&&this.options.onClose.call(this,this.$origin[0]),this.isOpen=!1,this.wrapper.classList.remove("open"),document.body.removeEventListener("click",this._handleDocumentClickBound,!0),document.body.removeEventListener("touchend",this._handleDocumentClickBound))}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_TapTarget}},{key:"defaults",get:function(){return e}}]),r}();M.TapTarget=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"tapTarget","M_TapTarget")}(cash),function(t){var e={classes:"",dropdownOptions:{}},n=function(i){function r(s,o){_classCallCheck(this,r);var a=_possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,r,s,o));return a.$el.hasClass("browser-default")?_possibleConstructorReturn(a):((a.el.M_FormSelect=a).options=t.extend({},r.defaults,o),a.isMultiple=a.$el.prop("multiple"),a.el.tabIndex=-1,a._keysSelected={},a._valueDict={},a._setupDropdown(),a._setupEventHandlers(),a)}return _inherits(r,Component),_createClass(r,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeDropdown(),this.el.M_FormSelect=void 0}},{key:"_setupEventHandlers",value:function(){var s=this;this._handleSelectChangeBound=this._handleSelectChange.bind(this),this._handleOptionClickBound=this._handleOptionClick.bind(this),this._handleInputClickBound=this._handleInputClick.bind(this),t(this.dropdownOptions).find("li:not(.optgroup)").each(function(o){o.addEventListener("click",s._handleOptionClickBound)}),this.el.addEventListener("change",this._handleSelectChangeBound),this.input.addEventListener("click",this._handleInputClickBound)}},{key:"_removeEventHandlers",value:function(){var s=this;t(this.dropdownOptions).find("li:not(.optgroup)").each(function(o){o.removeEventListener("click",s._handleOptionClickBound)}),this.el.removeEventListener("change",this._handleSelectChangeBound),this.input.removeEventListener("click",this._handleInputClickBound)}},{key:"_handleSelectChange",value:function(s){this._setValueToInput()}},{key:"_handleOptionClick",value:function(s){s.preventDefault();var o=t(s.target).closest("li")[0],a=o.id;if(!t(o).hasClass("disabled")&&!t(o).hasClass("optgroup")&&a.length){var l=!0;if(this.isMultiple){var c=t(this.dropdownOptions).find("li.disabled.selected");c.length&&(c.removeClass("selected"),c.find('input[type="checkbox"]').prop("checked",!1),this._toggleEntryFromArray(c[0].id)),l=this._toggleEntryFromArray(a)}else t(this.dropdownOptions).find("li").removeClass("selected"),t(o).toggleClass("selected",l);t(this._valueDict[a].el).prop("selected")!==l&&(t(this._valueDict[a].el).prop("selected",l),this.$el.trigger("change"))}s.stopPropagation()}},{key:"_handleInputClick",value:function(){this.dropdown&&this.dropdown.isOpen&&(this._setValueToInput(),this._setSelectedStates())}},{key:"_setupDropdown",value:function(){var s=this;this.wrapper=document.createElement("div"),t(this.wrapper).addClass("select-wrapper "+this.options.classes),this.$el.before(t(this.wrapper)),this.wrapper.appendChild(this.el),this.el.disabled&&this.wrapper.classList.add("disabled"),this.$selectOptions=this.$el.children("option, optgroup"),this.dropdownOptions=document.createElement("ul"),this.dropdownOptions.id="select-options-"+M.guid(),t(this.dropdownOptions).addClass("dropdown-content select-dropdown "+(this.isMultiple?"multiple-select-dropdown":"")),this.$selectOptions.length&&this.$selectOptions.each(function(l){if(t(l).is("option")){var c=void 0;c=s.isMultiple?s._appendOptionWithIcon(s.$el,l,"multiple"):s._appendOptionWithIcon(s.$el,l),s._addOptionToValueDict(l,c)}else if(t(l).is("optgroup")){var u=t(l).children("option");t(s.dropdownOptions).append(t('<li class="optgroup"><span>'+l.getAttribute("label")+"</span></li>")[0]),u.each(function(f){var g=s._appendOptionWithIcon(s.$el,f,"optgroup-option");s._addOptionToValueDict(f,g)})}}),this.$el.after(this.dropdownOptions),this.input=document.createElement("input"),t(this.input).addClass("select-dropdown dropdown-trigger"),this.input.setAttribute("type","text"),this.input.setAttribute("readonly","true"),this.input.setAttribute("data-target",this.dropdownOptions.id),this.el.disabled&&t(this.input).prop("disabled","true"),this.$el.before(this.input),this._setValueToInput();var o=t('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');if(this.$el.before(o[0]),!this.el.disabled){var a=t.extend({},this.options.dropdownOptions);a.onOpenEnd=function(l){var c=t(s.dropdownOptions).find(".selected").first();if(s.dropdown.isScrollable&&c.length){var u=c[0].getBoundingClientRect().top-s.dropdownOptions.getBoundingClientRect().top;u-=s.dropdownOptions.clientHeight/2,s.dropdownOptions.scrollTop=u}},this.isMultiple&&(a.closeOnClick=!1),this.dropdown=M.Dropdown.init(this.input,a)}this._setSelectedStates()}},{key:"_addOptionToValueDict",value:function(s,o){var a=Object.keys(this._valueDict).length,l=this.dropdownOptions.id+a,c={};o.id=l,c.el=s,c.optionEl=o,this._valueDict[l]=c}},{key:"_removeDropdown",value:function(){t(this.wrapper).find(".caret").remove(),t(this.input).remove(),t(this.dropdownOptions).remove(),t(this.wrapper).before(this.$el),t(this.wrapper).remove()}},{key:"_appendOptionWithIcon",value:function(s,o,a){var l=o.disabled?"disabled ":"",c=a==="optgroup-option"?"optgroup-option ":"",u=this.isMultiple?'<label><input type="checkbox"'+l+'"/><span>'+o.innerHTML+"</span></label>":o.innerHTML,f=t("<li></li>"),g=t("<span></span>");g.html(u),f.addClass(l+" "+c),f.append(g);var v=o.getAttribute("data-icon");if(v){var C=t('<img alt="" src="'+v+'">');f.prepend(C)}return t(this.dropdownOptions).append(f[0]),f[0]}},{key:"_toggleEntryFromArray",value:function(s){var o=!this._keysSelected.hasOwnProperty(s),a=t(this._valueDict[s].optionEl);return o?this._keysSelected[s]=!0:delete this._keysSelected[s],a.toggleClass("selected",o),a.find('input[type="checkbox"]').prop("checked",o),a.prop("selected",o),o}},{key:"_setValueToInput",value:function(){var s=[];if(this.$el.find("option").each(function(a){if(t(a).prop("selected")){var l=t(a).text();s.push(l)}}),!s.length){var o=this.$el.find("option:disabled").eq(0);o.length&&o[0].value===""&&s.push(o.text())}this.input.value=s.join(", ")}},{key:"_setSelectedStates",value:function(){for(var s in this._keysSelected={},this._valueDict){var o=this._valueDict[s],a=t(o.el).prop("selected");t(o.optionEl).find('input[type="checkbox"]').prop("checked",a),a?(this._activateOption(t(this.dropdownOptions),t(o.optionEl)),this._keysSelected[s]=!0):t(o.optionEl).removeClass("selected")}}},{key:"_activateOption",value:function(s,o){o&&(this.isMultiple||s.find("li.selected").removeClass("selected"),t(o).addClass("selected"))}},{key:"getSelectedValues",value:function(){var s=[];for(var o in this._keysSelected)s.push(this._valueDict[o].el.value);return s}}],[{key:"init",value:function(s,o){return _get(r.__proto__||Object.getPrototypeOf(r),"init",this).call(this,this,s,o)}},{key:"getInstance",value:function(s){return(s.jquery?s[0]:s).M_FormSelect}},{key:"defaults",get:function(){return e}}]),r}();M.FormSelect=n,M.jQueryLoaded&&M.initializeJqueryWrapper(n,"formSelect","M_FormSelect")}(cash),function(t,e){var n={},i=function(r){function s(o,a){_classCallCheck(this,s);var l=_possibleConstructorReturn(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s,o,a));return(l.el.M_Range=l).options=t.extend({},s.defaults,a),l._mousedown=!1,l._setupThumb(),l._setupEventHandlers(),l}return _inherits(s,Component),_createClass(s,[{key:"destroy",value:function(){this._removeEventHandlers(),this._removeThumb(),this.el.M_Range=void 0}},{key:"_setupEventHandlers",value:function(){this._handleRangeChangeBound=this._handleRangeChange.bind(this),this._handleRangeMousedownTouchstartBound=this._handleRangeMousedownTouchstart.bind(this),this._handleRangeInputMousemoveTouchmoveBound=this._handleRangeInputMousemoveTouchmove.bind(this),this._handleRangeMouseupTouchendBound=this._handleRangeMouseupTouchend.bind(this),this._handleRangeBlurMouseoutTouchleaveBound=this._handleRangeBlurMouseoutTouchleave.bind(this),this.el.addEventListener("change",this._handleRangeChangeBound),this.el.addEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.addEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.addEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.addEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.addEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.addEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_removeEventHandlers",value:function(){this.el.removeEventListener("change",this._handleRangeChangeBound),this.el.removeEventListener("mousedown",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("touchstart",this._handleRangeMousedownTouchstartBound),this.el.removeEventListener("input",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mousemove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("touchmove",this._handleRangeInputMousemoveTouchmoveBound),this.el.removeEventListener("mouseup",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("touchend",this._handleRangeMouseupTouchendBound),this.el.removeEventListener("blur",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("mouseout",this._handleRangeBlurMouseoutTouchleaveBound),this.el.removeEventListener("touchleave",this._handleRangeBlurMouseoutTouchleaveBound)}},{key:"_handleRangeChange",value:function(){t(this.value).html(this.$el.val()),t(this.thumb).hasClass("active")||this._showRangeBubble();var o=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",o+"px")}},{key:"_handleRangeMousedownTouchstart",value:function(o){if(t(this.value).html(this.$el.val()),this._mousedown=!0,this.$el.addClass("active"),t(this.thumb).hasClass("active")||this._showRangeBubble(),o.type!=="input"){var a=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",a+"px")}}},{key:"_handleRangeInputMousemoveTouchmove",value:function(){if(this._mousedown){t(this.thumb).hasClass("active")||this._showRangeBubble();var o=this._calcRangeOffset();t(this.thumb).addClass("active").css("left",o+"px"),t(this.value).html(this.$el.val())}}},{key:"_handleRangeMouseupTouchend",value:function(){this._mousedown=!1,this.$el.removeClass("active")}},{key:"_handleRangeBlurMouseoutTouchleave",value:function(){if(!this._mousedown){var o=7+parseInt(this.$el.css("padding-left"))+"px";t(this.thumb).hasClass("active")&&(e.remove(this.thumb),e({targets:this.thumb,height:0,width:0,top:10,easing:"easeOutQuad",marginLeft:o,duration:100})),t(this.thumb).removeClass("active")}}},{key:"_setupThumb",value:function(){this.thumb=document.createElement("span"),this.value=document.createElement("span"),t(this.thumb).addClass("thumb"),t(this.value).addClass("value"),t(this.thumb).append(this.value),this.$el.after(this.thumb)}},{key:"_removeThumb",value:function(){t(this.thumb).remove()}},{key:"_showRangeBubble",value:function(){var o=-7+parseInt(t(this.thumb).parent().css("padding-left"))+"px";e.remove(this.thumb),e({targets:this.thumb,height:30,width:30,top:-30,marginLeft:o,duration:300,easing:"easeOutQuint"})}},{key:"_calcRangeOffset",value:function(){var o=this.$el.width()-15,a=parseFloat(this.$el.attr("max"))||100,l=parseFloat(this.$el.attr("min"))||0;return(parseFloat(this.$el.val())-l)/(a-l)*o}}],[{key:"init",value:function(o,a){return _get(s.__proto__||Object.getPrototypeOf(s),"init",this).call(this,this,o,a)}},{key:"getInstance",value:function(o){return(o.jquery?o[0]:o).M_Range}},{key:"defaults",get:function(){return n}}]),s}();M.Range=i,M.jQueryLoaded&&M.initializeJqueryWrapper(i,"range","M_Range"),i.init(t("input[type=range]"))}(cash,M.anime);createApp(App).use(store).use(router).mount("#app")});export default Ie();
